{"version":3,"sources":["url/index.js","actions/blog.js","components/form/Form.js","components/form/FormInput.js","components/form/FormCaptcha.js","components/container_component/Login.js","components/stateless_component/File.js","components/form/FormFile.js","components/container_component/Signup.js","routes/AuthenticationRoute.js","routes/AccessDenied.js","components/form/FormDraft.js","components/container_component/PostEditor.js","components/stateless_component/User.js","util/getRelativeTimestamp.js","components/stateless_component/Timestamp.js","components/stateless_component/PostDigest.js","components/stateless_component/Loading.js","components/stateless_component/PostsList.js","components/container_component/withVirtualScroll.js","components/container_component/Blog.js","components/container_component/PostContent.js","components/stateless_component/Dropdown.js","components/stateless_component/Comment.js","util/getRest.js","components/container_component/withPaginationController.js","components/stateless_component/CommentsList.js","components/container_component/CommentEditor.js","components/container_component/Post.js","components/container_component/Comet.js","components/container_component/Home.js","routes/PrivateRoute.js","routes/NotFound.js","routes/index.js","App.js","reducers/masonryReducer.js","reducers/cubeReducer.js","reducers/blogReducer.js","reducers/index.js","configureStore.js","serviceWorker.js","index.js","util/ajax.js","components/stateless_component/Input.js","components/container_component/Outerlayer.js","components/stateless_component/Button.js"],"names":["pro_api","pro_avatars","baseUrl","firstQueryRequest","lastFetch","type","payload","queryRequest","direction","queryRequestFailure","error","queryHomePostsSuccess","queryRequestSuccess","res","fetchStatus","oldUnreadCount","querySuccessFunc","data","filter","item","hasOwnProperty","id","ids","map","unreadCount","length","created_at","method","updateRequestFailure","getFieldsValidate","fields","Object","values","every","_ref","required","validate","getFieldsValues","reduce","_ref2","name","value","toRAW","publishRequestFailure","timelineStatePublishUpdate","dispatchAll","dispatch","actions","forEach","action","authenticationFailure","authentication","url","options","ajax","then","response","initInputField","catch","_ref4","message","inputField","initLastFetch","top","bottom","handleQueryUserPosts","user_id","withUserinfo","arguments","undefined","limit","getState","blog","homeTimeline","Date","now","concat","entities","posts","entity","objectSpread","queryPostsWithEntitySuccess","userinfo","queryUserPostsSuccess","err","handleQueryComments","post_id","comments","queryCommentsSuccess","signup","_getState9","router","location","pathname","body","form","_ref3","append","FormData","StyledForm","styled","_templateObject","props","theme","bgc","Form","_this","this","_this$props","children","fieldsName","btnTxt","handleSubmit","handleInputChange","handleFileChange","handleDraftChange","handleDraftBlur","btnClassName","react_default","a","createElement","React","Children","child","cloneElement","onChange","onBlur","validator","bind","className","Button","onClick","text","Component","connect","field","_ref11","event","pattern","file","target","files","result","regExp","RegExp","test","suffix","apply","_ref10","editorValue","getSate","_ref12","_ref12$minLength","minLength","_ref12$maxLength","maxLength","Infinity","_ref12$maxLine","maxLine","blocks","textLength","re","it","line","StyleFormInput","div","FormInput_templateObject","FormInput","prefix","help","requiredVisible","Input","StyledFormCaptcha","FormCaptcha_templateObject","FormCaptcha","alt","src","ConnectedComponent","state","self_id","user","login","_getState10","_getFieldsValues","username","password","captcha","JSON","stringify","headers","Content-Type","Redirect","to","Fragment","form_Form","form_FormInput","form_FormCaptcha","StyledFile","File_templateObject","color","File","htmlFor","accept","StyledFormFile","FormFile_templateObject","FormFile","stateless_component_File","form_FormFile","StyledAuth","AuthenticationRoute_templateObject","StyledAuthForm","_templateObject2","AuthenticationRoute","match","Link","Switch","Route","path","component","Signup","exact","Login","StyledAccessDenied","style","AccessDenied_templateObject","AccessDenied","BraftEditor","use","CodeHighlighter","Markdown","StyleFormDraft","FormDraft_templateObject","FormDraft","controls","braft_editor_dist_default","media","validateFn","size","accepts","StyledPostEditor","PostEditor_templateObject","PostEditor","form_FormDraft","StyledUser","User_templateObject","User","slice","avatar","getRelativeTimestamp","timestamp","relativeTime","Math","floor","sec","min","hour","StyledTimestamp","Timestamp_templateObject","Timestamp","toLocaleString","updated_at","StyledPostDigest","PostDigest_templateObject","PostDigest","_BraftEditor$createEd","createEditorState","content","entityMap","img","len","stateless_component_User","author","title","stateless_component_Timestamp","rotate","keyframes","Loading_templateObject","StyledLoading","Loading_templateObject2","Loading","nextprops","nextState","visible","withVirtualScroll","WrappedList","_Component","_class","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","start","end","ceil","document","documentElement","clientHeight","itemHeight","screenHeight","_handleScroll","throttle","assertThisInitialized","_handleResize","_handleQueryRequest","handleQueryRequest","leading","inherits","createClass","key","_this2","scrollTop","setState","timeline","loading","addEventListener","window","removeEventListener","isLoadingDirection","loadingTop","loadingBottom","paddingTopOffset","paddingBottomOffset","currentTimeline","paddingTop","paddingBottom","stateless_component_Loading","height","list","index","_props$posts$entities","stateless_component_PostDigest","Blog","params","usersEntities","nextProps","handlePublishPost","container_component_PostEditor","stateless_component_PostsList","users","postEditor","_getState4","_blog$user","_ref5","PostContent","readOnly","StyledDropdown","label","Dropdown_templateObject","bgi","display","Dropdown","StyledComment","Comment_templateObject","Comment","stateless_component_Dropdown","handleStartUp","handleDelComment","dangerouslySetInnerHTML","__html","toHTML","getRest","collection","section","entries","slicedToArray","val","withPaginationController","ListComponent","StyledWrapper","withPaginationController_templateObject","current","width","randomName","toString","padEnd","split","hex","random","join","defaultCurrent","hideOnSinglePage","pageSize","defaultPageSize","pageSizeOptions","showQuickJumper","_handleChange","Number","parseInt","attributes","rest","labels","Array","total","fill","_","array","checked","ref","el","wrapper","offsetWidth","assign","data-changed","disabled","comment_id","idx","_props$comments$entit","_handleDelComment","_handleStartUp","stateless_component_Comment","StyledCommentEditor","CommentEditor_templateObject","CommentEditor","StyledPost","Post_templateObject","Post","currentUpdateEditor","handleUpdate","transmitValues","commentEditorLayer","setCommentEditorLayerRef","_handlePublishComment","handlePublishComment","_handleCloseCommentEditor","_handleShutDown","_handleUpdateComment","handleUpdateComment","_handleOpenCommentEditor","postEditorLayer","setPostEditorLayerRef","_handleClosePostEditor","_handleUpdatePost","handleUpdatePost","_handleOpenPostEditor","postsEntities","_this$props$postsEnti","handleOpenPostEditor","updateCommentEditorFields","commentEditor","UpdatePostEditorFields","commentEditorFields","container_component_PostContent","container_component_CommentEditor","stateless_component_CommentsList","Outerlayer","outerlayer","alive","handleShutDown","render","_getState7","_ref8","_ref9","_getState5","_blog$user2","_ref6","_getState6","push","_ref7","StyledComet","Comet_templateObject","Comet","_fetchPublishCount","timeout","xhr","XMLHttpRequest","open","send","onload","_onload","onerror","_fetchAbort","ontimeout","count","publishCount","status","parse","responseText","readyState","abort","_initPublishCount","_cometSwitch","turnon","_handleQueryNewPublish","handleQueryNewPublish","queryNewPublish","_this$state","Home","handleQueryHomePosts","_this$props$homeTimel","container_component_Comet","queryPosts","cometSwitch","finally","PrivateRoute","condition","objectWithoutProperties","from","StyledNotFound","NotFound_templateObject","NotFound","PixelPainter","Loadable","loader","Promise","all","__webpack_require__","e","Cube","Masonry","StyledHeader","Styled","header","routes_templateObject","StyledMain","main","routes_templateObject2","StyledAside","aside","_templateObject3","StyledSection","_templateObject4","StyledRoutes","_templateObject5","Routes","visibleBackTop","handleSaveState","handleSignout","asideLink","asideUsername","asideAvatar","role","routes_PrivateRoute","_handleBackTop","withRouter","_ref13","console","log","App","history","esm","routes","cache","masonryReducer","toConsumableArray","colors","FRONT","BEHIND","LEFT","RIGHT","UP","DOWN","create","face","side","outPos","FRONTX","FRONTY","FRONTZ","FRONTRotate3d","BEHINDX","BEHINDY","BEHINDZ","BEHINDRotate3d","LEFTX","LEFTY","LEFTZ","LEFTRotate3d","RIGHTX","RIGHTY","RIGHTZ","RIGHTRotate3d","UPX","UPY","UPZ","UPRotate3d","DOWNX","DOWNY","DOWNZ","DOWNRotate3d","bgPos","i","backgroundPos","x","y","z","translate3d","isArray","rotate3d","position","aspect","createCube","cubes","_arr","_i","globalDisplay","cube","defaultState","view","rotating","records","inputFieldValue","submitting","submitStatus","cubeReducer","produce","draft","unshift","cursor","atEnd","blogReducer","stateStorage","sessionStorage","getItem","_action$payload","_draft$homeTimeline$t","_action$payload2","post","_draft$entities$users","_action$payload3","_action$payload4","_draft$entities$posts","_action$payload5","comment","_action$payload6","_action$payload7","_action$payload8","_action$payload9","_action$payload10","_action$payload11","_action$payload12","_action$payload13","keys","_action$payload14","removeItem","setItem","rootReducer","combineReducers","masonry","connectRouter","createBrowserHistory","Boolean","hostname","store","preloadedState","composeEnhancer","compose","createStore","createRootReducer","applyMiddleware","routerMiddleware","thunkMiddleware","configureStore","ReactDOM","styled_components_browser_esm","es","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister","resolve","reject","_options$body","_options$timeout","D_my_site_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","setRequestHeader","statusText","StyledInput","react__WEBPACK_IMPORTED_MODULE_1___default","StyledOuterlayer","D_my_site_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","pointerEvents","opacity","zIndex","react__WEBPACK_IMPORTED_MODULE_7___default","StyledButton","span","preventDefault"],"mappings":"sUAGaA,EAAU,iCACVC,EAAc,8FCArBC,EAAUF,EAEVG,EAAoB,SAACC,GAAD,MAAgB,CAAEC,KAAM,sBAAuBC,QAAS,CAAEF,eAE9EG,EAAe,SAACC,GAAD,MAAgB,CAAEH,KAAM,gBAAiBC,QAAS,CAAEE,eAEnEC,EAAsB,SAACC,GAAD,MAAY,CAAEL,KAAM,wBAAyBC,QAAS,CAAEI,WAI9EC,EAAwB,SAACL,GAAD,MAAc,CAAED,KAAM,2BAA4BC,YAQ1EM,EAAsB,SAACC,EAAKC,EAAaC,EAAgBP,EAAWQ,GACxE,IAAMC,EAAOJ,EAAII,KAAKC,OAAO,SAAAC,GAAI,OAAML,EAAYM,eAAeD,EAAKE,MACjEC,EAAMT,EAAII,KAAKM,IAAI,SAAAJ,GAAI,OAAIA,EAAKE,KAChCG,EAAcT,EAAiBO,EAAIG,OACnCrB,EAA0B,WAAdI,EAAyBK,EAAII,KAAKK,EAAIG,OAAS,GAAGC,WAAab,EAAII,KAAK,GAAGS,WAI7F,MAAO,CAFSV,EAAiB,CAAEW,OADN,WAAdnB,EAAyB,OAAS,UACNc,MAAKL,SAhBH,CAAEZ,KAAM,8BAA+BC,QAiB3C,CAAEE,YAAWgB,cAAapB,gBAiB/DwB,EAAuB,SAACtB,GAAD,MAAc,CAAED,KAAM,yBAA0BC,YAEvEuB,EAAoB,SAACC,GAAD,OAAYC,OAAOC,OAAOF,GAAQG,MAAM,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,SAAZ,OAA2BD,GAAYC,KAEnGC,EAAkB,SAACP,GAAD,OAAYC,OAAOC,OAAOF,GAAQQ,OAAO,SAACzB,EAAD0B,GAA8B,IAAvBlC,EAAuBkC,EAAvBlC,KAAMmC,EAAiBD,EAAjBC,KAAMC,EAAWF,EAAXE,MAIlF,MAHa,UAATpC,IACFoC,EAAQA,EAAMC,SAChB7B,EAAI2B,GAAQC,EACL5B,GACN,KAOG8B,EAAwB,SAACrC,GAAD,MAAc,CAAED,KAAM,0BAA2BC,YAEzEsC,EAA6B,SAACtC,GAAD,MAAc,CAAED,KAAM,gCAAiCC,YAMpFuC,EAAc,SAACC,EAAUC,GAAX,OAAuBA,EAAQC,QAAQ,SAAAC,GAAM,OAAIH,EAASG,MAIxEC,EAAwB,SAAC5C,GAAD,MAAc,CAAED,KAAM,yBAA0BC,YAExE6C,EAAiB,SAACL,EAAUM,EAAKC,GAErC,OADAP,EAAS,CAAEzC,KAAM,mBACViD,YAAK,OAAQF,EAAKC,GACtBE,KAAK,SAAAC,GACJV,EARsC,CAAEzC,KAAM,yBAA0BC,QAQzCkD,EAASvC,OACxC6B,EAASW,EAAe,qBAEzBC,MAAM,SAAAC,GAAiB,IAAdC,EAAcD,EAAdC,QACRd,EAASI,EAAsB,CAACU,UAASC,WAAY,oBACrDf,EAASW,EAAe,sBAIjBA,EAAiB,SAACI,EAAYD,GAAb,MAA0B,CAAEvD,KAAM,kBAAmBC,QAAS,CAACuD,aAAaD,aAI7FE,EAAgB,SAACC,EAAKC,GAAN,MAAkB,CAAC3D,KAAM,kBAAmBC,QAAS,CAACyD,MAAKC,YAkC3EC,EAAuB,SAACC,EAAS1D,GAAV,IAAqB2D,EAArBC,UAAA3C,OAAA,QAAA4C,IAAAD,UAAA,IAAAA,UAAA,GAA2CE,EAA3CF,UAAA3C,OAAA,QAAA4C,IAAAD,UAAA,GAAAA,UAAA,GAAmD,GAAnD,OAA0D,SAACtB,EAAUyB,GAAa,IAEhHnE,EADIoE,EAASD,IAATC,KASR,GAPIhE,EACFJ,EAAYoE,EAAKC,aAAarE,UAAUI,IAExCA,EAAY,SACZJ,EAAYsE,KAAKC,MACjB7B,EAAS3C,EAAkBC,MAExBA,EAAW,OAAO,KACvB,IAAMgD,EAAMlD,EAAO,SAAA0E,OAAYV,EAAZ,OAAAU,OAAyBpE,EAAU,GAAnC,OAAAoE,OAA2CxE,EAA3C,OAAAwE,OAA0DT,EAAe,IAAM,IAA/E,OAAAS,OAAwFN,GACrG9C,EAAcgD,EAAKC,aAAajD,YAChCV,EAAc0D,EAAKK,SAASC,MAAMhE,YAExC,OADAgC,EAASvC,EAAaC,IACf8C,YAAK,MAAOF,GAChBG,KAAK,SAAA1C,GACAsD,EACFtB,EAAYC,EAAUlC,EAAoBC,EAAKC,EAAaU,EAAahB,EA/H7C,SAAC0D,EAASa,GAAV,OAAqB,SAACzE,GAAD,MAAc,CAAED,KAAM,kCAAmCC,QAAQyB,OAAAiD,EAAA,EAAAjD,CAAA,GAAMzB,EAAP,CAAgB4D,UAAUa,aA+HvDE,CAA4Bf,EAASrD,EAAIqE,YACpHrE,EAAII,KAAKQ,QAClBoB,EAAYC,EAAUlC,EAAoBC,EAAKC,EAAaU,EAAahB,EAnInD,SAAC0D,GAAD,OAAa,SAAC5D,GAAD,MAAc,CAAED,KAAM,2BAA4BC,QAAQyB,OAAAiD,EAAA,EAAAjD,CAAA,GAAMzB,EAAP,CAAgB4D,cAmIxBiB,CAAsBjB,OAE3GR,MAAM,SAAA0B,GACPtC,EAASrC,EAAoB2E,QAItBC,EAAsB,SAACC,GAAD,OAAa,SAACxC,EAAUyB,GAAa,IAC9DC,EAASD,IAATC,KACFpB,EAAMlD,EAAO,SAAA0E,OAAYU,GACzB9D,EAAcgD,EAAKC,aAAajD,YAChCV,EAAc0D,EAAKK,SAASU,SAASzE,YAE3C,OADAgC,EAASvC,EAAa,WACf+C,YAAK,MAAOF,GAChBG,KAAK,SAAA1C,GACAA,EAAII,KAAKQ,QACXoB,EAAYC,EAAUlC,EAAoBC,EAAKC,EAAaU,EAAa,SA/IpD,SAAC8D,GAAD,OAAa,SAAChF,GAAD,MAAc,CAAED,KAAM,yBAA0BC,QAAQyB,OAAAiD,EAAA,EAAAjD,CAAA,GAAMzB,EAAP,CAAgBgF,cA+ItBE,CAAqBF,OAEzG5B,MAAM,SAAA0B,GACPtC,EAASrC,EAAoB2E,QA+ItBK,EAAS,kBAAM,SAAC3C,EAAUyB,GAAa,IAAAmB,EACzBnB,IAAjBC,EAD0CkB,EAC1ClB,KAAMmB,EADoCD,EACpCC,OACRvC,EAAMlD,EAAUyF,EAAOC,SAASC,SACtC,IAAKhE,EAAkB2C,EAAKrB,eAAerB,QACzC,OAAOgB,EAASI,EAAsB,CAACU,QAAS,2BAAQC,WAAY,oBAEtE,IAlQkB/B,EAkQZgE,GAlQYhE,EAkQM0C,EAAKrB,eAAerB,OAlQfC,OAAOC,OAAOF,GAAQQ,OAAO,SAACyD,EAADC,GAAyB,IAAjBxD,EAAiBwD,EAAjBxD,KAAMC,EAAWuD,EAAXvD,MAExE,OADAsD,EAAKE,OAAOzD,EAAMC,GACXsD,GACN,IAAIG,WAgQL,OAAO/C,EAAeL,EAAUM,EAAK,CAAE0C,iiBCjTzC,IAAMK,EAAaC,IAAOL,KAAVM,IACM,SAACC,GAAD,OAAWA,EAAMC,MAAMC,MA0BvCC,mLACM,IAAAC,EAAAC,KAAAC,EAWJD,KAAKL,MATPO,EAFMD,EAENC,SACAC,EAHMF,EAGNE,WACAjD,EAJM+C,EAIN/C,WACAkD,EALMH,EAKNG,OACAC,EANMJ,EAMNI,aACAC,EAPML,EAONK,kBACAC,EARMN,EAQNM,iBACAC,EATMP,EASNO,kBACAC,EAVMR,EAUNQ,gBAEIhF,EAAWyB,GAAc9B,OAAOC,OAAO6B,EAAW/B,QAAQG,MAAM,SAAAC,GAAA,IAAEE,EAAFF,EAAEE,SAAF,OAAAF,EAAYC,UAA2BC,IACvGiF,EAAcjF,EAAW,SAAW,WACpCwB,GAAWxB,GAAYyB,GAAcA,EAAWD,QACtD,OACE0D,EAAAC,EAAAC,cAACrB,EAAD,KACIsB,IAAMC,SAASnG,IAAIsF,EAAU,SAACc,GAAU,IAChCnF,EADgCT,OAAAiD,EAAA,EAAAjD,CAAA,GACnB4F,EAAMrB,OAAnB9D,KACR,GAAmB,OAAfqB,EACF,OAAO4D,IAAMG,aAAaD,EAAO,CAACnF,SAHI,IAOpCqF,EACAC,EAFIC,EAAclE,EAAW/B,OAAOU,GAAhCuF,UAWR,MARqC,SAAjClE,EAAW/B,OAAOU,GAAMnC,KAC1BwH,EAAWX,EAAiBc,KAAKtB,EAAMI,EAAYtE,EAAMuF,GACf,UAAjClE,EAAW/B,OAAOU,GAAMnC,MACjCwH,EAAWV,EAAkBa,KAAKtB,EAAMI,EAAYtE,GACpDsF,EAASV,EAAgBY,KAAKtB,EAAMI,EAAYtE,EAAMuF,IAEtDF,EAAWZ,EAAkBe,KAAKtB,EAAMI,EAAYtE,EAAMuF,GAErDN,IAAMG,aAAaD,EAAnB5F,OAAAiD,EAAA,EAAAjD,CAAA,CACLS,OACAqF,WACAC,UACGjE,EAAW/B,OAAOU,OAGzB8E,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cACdX,EAAAC,EAAAC,cAAA,YAAO5D,GACP0D,EAAAC,EAAAC,cAACU,EAAA,EAAD,CACED,UAAWZ,EACXc,QAASnB,EACToB,KAAMrB,aA/CCsB,aA6DJC,eAAQ,KAPI,SAACxF,GAAD,MAAe,CACxCoE,iBAAkB,kBAAapE,EDkQD,SAACe,EAAY0E,EAAbC,EAA0CC,GAA1C,IAAsBC,EAAtBF,EAAsBE,QAAS9E,EAA/B4E,EAA+B5E,QAA/B,OAAoD,SAACd,EAAUyB,GAC7F,IAAMoE,EAAOF,EAAMG,OAAOC,MAAM,GAChC,GAAKF,EAAL,CAGA,IAAIG,GAAS,EACPC,EAASL,GAAW,IAAIM,OAAON,GAGjCK,GAAUA,EAAOE,KAAKN,EAAKtI,QAC7ByI,GAAS,EACTlF,EAAU,IAEZd,EAAS,CACPzC,KAAM,oBACNwD,aACA0E,QACAtH,KAAM,CACJwB,MAAOkG,EACPO,OAAQP,EAAKnG,KACbJ,SAAU0G,EACVpI,MAAOkD,QCvR6CuF,WAAhB,EAAA/E,aACxC6C,kBAAmB,kBAAanE,ED6OD,SAACe,EAAY0E,EAAba,EAAyCX,GAAzC,IAAsBC,EAAtBU,EAAsBV,QAAS9E,EAA/BwF,EAA+BxF,QAA/B,OAAmD,SAACd,EAAUyB,GAC7F,IAAM9B,EAAQgG,EAAMG,OAAOnG,MACvBqG,GAAS,EACPC,EAASL,GAAW,IAAIM,OAAON,GAChCK,GAAUA,EAAOE,KAAKxG,KACzBmB,EAAU,GACVkF,GAAS,GAEXhG,EAAS,CACPzC,KAAM,oBACNwD,aACA0E,QACAtH,KAAM,CACJwB,QACA/B,MAAOkD,EACPxB,SAAU0G,OC5P4CK,WAAjB,EAAA/E,aACzC+C,kBAAmB,kBAAarE,ED0RD,SAACe,EAAY0E,EAAOc,GAApB,OAAoC,SAACvG,EAAUwG,GAC9ExG,EAAS,CACPzC,KAAM,oBACNwD,aACA0E,QACAtH,KAAM,CACJwB,MAAO4G,OChS+CF,WAAjB,EAAA/E,aACzCgD,gBAAiB,kBAAatE,EDoSD,SAACe,EAAY0E,EAAbgB,KAAsBb,QAAtB,IAAAc,EAAAD,EAA+BE,iBAA/B,IAAAD,EAA2C,EAA3CA,EAAAE,EAAAH,EAA8CI,iBAA9C,IAAAD,EAA0DE,IAA1DF,EAAAG,EAAAN,EAAoEO,eAApE,IAAAD,EAA8ED,IAA9EC,EAAwFjG,EAAxF2F,EAAwF3F,QAAxF,OAAsG,SAACd,EAAUyB,GAAa,IAEnJwF,EADSxF,IAATC,KACgBX,GAAY/B,OAAOyG,GAAO9F,MAAMC,OAAM,GAAtDqH,OAMJjB,GAAS,EACTkB,EANUD,EAAOzH,OAAO,SAAC2H,EAAIC,GAG/B,MAFgB,aAAZA,EAAG7J,OACL4J,GAAMC,EAAG9B,MACJ6B,GACN,IAEsBxI,OACrB0I,EAAOJ,EAAOtI,OACduI,EAAaP,GAAaO,GAAcL,GAAaQ,GAAQL,IAC/DhB,GAAS,EACTlF,EAAU,IAEZd,EAAS,CACPzC,KAAM,oBACNwD,aACA0E,QACAtH,KAAM,CACJmB,SAAU0G,EACVpI,MAAOkD,OCzT2CuF,WAAf,EAAA/E,eAG1BkE,CAAkC7B,86BC9FjD,IAAM2D,GAAiBhE,IAAOiE,IAAVC,MAuFLC,GAjDG,SAACjE,GAAU,IAEzB9D,EAUE8D,EAVF9D,KACAL,EASEmE,EATFnE,SACAqI,EAQElE,EARFkE,OACAtB,EAOE5C,EAPF4C,OACAzG,EAME6D,EANF7D,MACAoF,EAKEvB,EALFuB,SACA4C,EAIEnE,EAJFmE,KACA/J,EAGE4F,EAHF5F,MACAL,EAEEiG,EAFFjG,KACAqK,EACEpE,EADFoE,gBAEF,OACEpD,EAAAC,EAAAC,cAAC4C,GAAD,KACE9C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YAAOkD,GAAmBvI,GAAY,KACrCK,EAFH,KAIA8E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WAAMgD,GACNlD,EAAAC,EAAAC,cAACmD,GAAA,EAAD,CACEnI,KAAMA,EACNnC,KAAMA,EACNoC,MAAOA,EACPoF,SAAUA,IACZP,EAAAC,EAAAC,cAAA,WAAM0B,IAER5B,EAAAC,EAAAC,cAAA,WAAMiD,GACNnD,EAAAC,EAAAC,cAAA,WAAM9G,w/BCpEd,IAAMkK,GAAoBxE,IAAOiE,IAAVQ,MA0FRC,GAjDK,SAACxE,GAAU,IAE3B9D,EAUE8D,EAVF9D,KACAL,EASEmE,EATFnE,SACAqI,EAQElE,EARFkE,OACAtB,EAOE5C,EAPF4C,OACArB,EAMEvB,EANFuB,SACA4C,EAKEnE,EALFmE,KACA/J,EAIE4F,EAJF5F,MACAL,EAGEiG,EAHFjG,KACAoC,EAEE6D,EAFF7D,MACAiI,EACEpE,EADFoE,gBAEF,OACEpD,EAAAC,EAAAC,cAACoD,GAAD,KACEtD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YAAOkD,GAAmBvI,GAAY,KACrCK,EAFH,KAIA8E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WAAMgD,GACNlD,EAAAC,EAAAC,cAACmD,GAAA,EAAD,CACEnI,KAAMA,EACNnC,KAAMA,EACNoC,MAAOA,EACPoF,SAAUA,IACZP,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,OAAKuD,IAAI,qBAAMC,IAAK9B,MAE3B5B,EAAAC,EAAAC,cAAA,WAAMiD,GACNnD,EAAAC,EAAAC,cAAA,WAAM9G,MC/BCuK,GAFY3C,YARH,SAAC4C,GAAD,MAAY,CAClCrH,WAAYqH,EAAM1G,KAAKrB,eACvBgI,QAASD,EAAM1G,KAAK4G,KAAK/J,KAEA,SAACyB,GAAD,MAAe,CACxCuI,MAAO,kBAAMvI,EJuRY,SAACA,EAAUyB,GAAa,IAAA+G,EACxB/G,IAAjBC,EADyC8G,EACzC9G,KAAMmB,EADmC2F,EACnC3F,OACRvC,EAAMlD,EAAUyF,EAAOC,SAASC,SACtC,IAAKhE,EAAkB2C,EAAKrB,eAAerB,QACzC,OAAOgB,EAASI,EAAsB,CAACU,QAAS,2BAAQC,WAAY,oBAJrB,IAAA0H,EAMTlJ,EAAgBmC,EAAKrB,eAAerB,QACtEgE,EAAO,CAAC0F,SAPmCD,EAMzCC,SACgBC,SAPyBF,EAM/BE,SACgBC,QAPeH,EAMrBG,SAG5B,OAAOvI,EAAeL,EAAUM,EAAK,CAAC0C,KAAM6F,KAAKC,UAAU9F,GAAO+F,QADlD,CAAEC,eAAgB,2BI5RTxD,CAjCb,SAAChC,GACb,OAAIA,EAAM6E,QACA7D,EAAAC,EAAAC,cAACuE,EAAA,EAAD,CAAUC,GAAE,SAAApH,OAAW0B,EAAM6E,WAGrC7D,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0E,SAAA,KACE3E,EAAAC,EAAAC,cAAC0E,GAAD,CACEnF,OAAQ,eACRD,WAAY,iBACZjD,WAAYyC,EAAMzC,WAClBmD,aAAcV,EAAM+E,OACpB/D,EAAAC,EAAAC,cAAC2E,GAAD,CACEzB,iBAAiB,EACjBlI,KAAM,aACR8E,EAAAC,EAAAC,cAAC2E,GAAD,CACEzB,iBAAiB,EACjBlI,KAAM,aACR8E,EAAAC,EAAAC,cAAC4E,GAAD,CACE1B,iBAAiB,EACjBlI,KAAM,0dCzBhB,IAAM6J,GAAajG,IAAOiE,IAAViC,KAYU,SAAChG,GAAD,OAAWA,EAAMC,MAAMgG,QA+BlCC,GArBF,SAAClG,GACZ,OACEgB,EAAAC,EAAAC,cAAC6E,GAAD,KACE/E,EAAAC,EAAAC,cAAA,SAAOiF,QAASnG,EAAM9D,MAAtB,eAA+B8D,EAAM9D,MACrC8E,EAAAC,EAAAC,cAAA,SACEnH,KAAMiG,EAAMjG,KACZgB,GAAIiF,EAAM9D,KACVA,KAAM8D,EAAM9D,KACZkK,OAAQpG,EAAMoG,OACd7E,SAAUvB,EAAMuB,m+BC9BxB,IAAM8E,GAAiBvG,IAAOiE,IAAVuC,MA0FLC,GAlDE,SAACvG,GAAU,IAExB9D,EAUE8D,EAVF9D,KACAL,EASEmE,EATFnE,SACAqI,EAQElE,EARFkE,OACAtB,EAOE5C,EAPF4C,OACArB,EAMEvB,EANFuB,SACA4C,EAKEnE,EALFmE,KACA/J,EAIE4F,EAJF5F,MACAL,EAGEiG,EAHFjG,KACAqM,EAEEpG,EAFFoG,OACAhC,EACEpE,EADFoE,gBAEF,OACEpD,EAAAC,EAAAC,cAACmF,GAAD,KACErF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YAAOkD,GAAmBvI,GAAY,KACrCK,EAFH,KAIA8E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WAAMgD,GACNlD,EAAAC,EAAAC,cAACsF,GAAD,CACEtK,KAAMA,EACNnC,KAAMA,EACNqM,OAAQA,EACR7E,SAAUA,IACZP,EAAAC,EAAAC,cAAA,WAAM0B,IAER5B,EAAAC,EAAAC,cAAA,WAAMiD,GACNnD,EAAAC,EAAAC,cAAA,WAAM9G,MC1BCuK,GAFY3C,YARH,SAAC4C,GAAD,MAAY,CAClCrH,WAAYqH,EAAM1G,KAAKrB,eACvBgI,QAASD,EAAM1G,KAAK4G,KAAK/J,KAEA,SAACyB,GAAD,MAAe,CACxC2C,OAAQ,SAACgD,GAAD,OAAW3F,EAAS2C,QAGH6C,CApCZ,SAAChC,GACd,OAAIA,EAAM6E,QACA7D,EAAAC,EAAAC,cAACuE,EAAA,EAAD,CAAUC,GAAE,SAAApH,OAAW0B,EAAM6E,WAGrC7D,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0E,SAAA,KACE3E,EAAAC,EAAAC,cAAC0E,GAAD,CACEnF,OAAQ,eACRD,WAAY,iBACZjD,WAAYyC,EAAMzC,WAClBmD,aAAcV,EAAMb,QACpB6B,EAAAC,EAAAC,cAAC2E,GAAD,CACEzB,iBAAiB,EACjBlI,KAAM,aACR8E,EAAAC,EAAAC,cAAC2E,GAAD,CACEzB,iBAAiB,EACjBlI,KAAM,aACR8E,EAAAC,EAAAC,cAACuF,GAAD,CACErC,iBAAiB,EACjBlI,KAAM,WACR8E,EAAAC,EAAAC,cAAC4E,GAAD,CACE1B,iBAAiB,EACjBlI,KAAM,g+BCvBhB,IAAMwK,GAAa5G,IAAOiE,IAAV4C,KAEM,SAAC3G,GAAD,OAAWA,EAAMC,MAAMC,KAgBnB,SAACF,GAAD,OAAWA,EAAMC,MAAMgG,QAiB3CW,GAAiB9G,IAAOiE,IAAV8C,MA2BLC,GAtBa,SAAAlL,GAAuB,IAArBmL,EAAqBnL,EAArBmL,MACtBpF,EAAkC,oBADS/F,EAAd0D,SACRC,SAAiC,QAAU,SACtE,OACEyB,EAAAC,EAAAC,cAACwF,GAAD,CAAY5J,IAAKiK,EAAMjK,KACrBkE,EAAAC,EAAAC,cAAA,OAAKS,UAAWA,GACdX,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,GAAApH,OAAKyI,EAAMjK,MAAnB,gBACAkE,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,GAAApH,OAAKyI,EAAMjK,IAAX,YAAR,iBAEFkE,EAAAC,EAAAC,cAAC0F,GAAD,KACE5F,EAAAC,EAAAC,cAAC+F,EAAA,EAAD,KACEjG,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CACEC,KAAI,GAAA7I,OAAKyI,EAAMjK,IAAX,WACJsK,UAAWC,KACbrG,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOI,OAAK,EACVH,KAAI,GAAA7I,OAAKyI,EAAMjK,KACfsK,UAAWG,8OC7DvB,IAAMC,GAAqBC,IAAM1D,IAAT2D,KAMX,SAAC1H,GAAD,OAAWA,EAAMC,MAAMgG,QAarB0B,GARM,SAAC3H,GAAD,OACnBgB,EAAAC,EAAAC,cAACsG,GAAD,KACExG,EAAAC,EAAAC,cAAA,wEACEF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,mBAAR,6BACF1E,EAAAC,EAAAC,cAAA,koCCVJ0G,KAAYC,IAAIC,QAChBF,KAAYC,IAAIE,QAEhB,IAAMC,GAAiBlI,IAAOiE,IAAVkE,MAqGLC,oLAzDH,IAAA5H,EAaJD,KAAKL,MAXP9D,EAFMoE,EAENpE,KACAL,EAHMyE,EAGNzE,SACAqI,EAJM5D,EAIN4D,OACAtB,EALMtC,EAKNsC,OACAzG,EANMmE,EAMNnE,MACAoF,EAPMjB,EAONiB,SACAC,EARMlB,EAQNkB,OACA2C,EATM7D,EASN6D,KACA/J,EAVMkG,EAUNlG,MACA+N,EAXM7H,EAWN6H,SACA/D,EAZM9D,EAYN8D,gBAIF,OACEpD,EAAAC,EAAAC,cAAC8G,GAAD,KACEhH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YAAOkD,GAAmBvI,GAAY,KACrCK,EAFH,KAIA8E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WAAMgD,GACNlD,EAAAC,EAAAC,cAAA,OAAKS,UAAW,gBACdX,EAAAC,EAAAC,cAACkH,GAAAnH,EAAD,CACE9E,MAAOA,EACPgM,SAAUA,EACV3G,OAAQA,EACRD,SAAUA,EACV8G,MAAO,CAACC,WAjBD,SAACjG,GAAD,OAAUA,EAAKkG,KAAO,OAiBTC,QAhBhB,qEAkBRxH,EAAAC,EAAAC,cAAA,WAAM0B,IAER5B,EAAAC,EAAAC,cAAA,WAAMiD,GACNnD,EAAAC,EAAAC,cAAA,WAAM9G,YAtCQ2H,wMC/CxB,IAAM0G,GAAmB3I,IAAOiE,IAAV2E,MAgCPC,GAxBI,SAAC3I,GAClB,OACEgB,EAAAC,EAAAC,cAACuH,GAAD,KACEzH,EAAAC,EAAAC,cAAC0E,GAAD,CACEnF,OAAQ,eACRD,WAAY,aACZjD,WAAYyC,EAAMzC,WAClBmD,aAAcV,EAAMU,cACpBM,EAAAC,EAAAC,cAAC2E,GAAD,CACEzB,iBAAiB,EACjBlI,KAAM,UACR8E,EAAAC,EAAAC,cAAC0H,GAAD,CACExE,iBAAiB,EACjBlI,KAAM,ohBCtBhB,IAAM2M,GAAa/I,IAAOiE,IAAV+E,KAaH,SAAC9I,GAAD,OAAWA,EAAMC,MAAMgG,QAuCrB8C,GApBF,SAAC/I,GAAD,OACXgB,EAAAC,EAAAC,cAAC2H,GAAD,KACE7H,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,SAAApH,OAAY0B,EAAMpC,UACxBoD,EAAAC,EAAAC,cAAA,KAAGS,UAAU,QACT3B,EAAMkF,UAEVlE,EAAAC,EAAAC,cAAA,KAAGS,UAAU,MAAb,IACI3B,EAAMpC,QAAQoL,OAAO,IAEzBhI,EAAAC,EAAAC,cAAA,OAAKuD,IAAI,GAAGC,IAAG,GAAApG,OAAK3E,EAAL,KAAA2E,OAAoB0B,EAAMiJ,aC/BhCC,GAhBc,SAACC,GAC5B,IAAIC,EAAeC,KAAKC,OAAQlL,KAAKC,MAAQ8K,GAAc,KACrDI,EAAMH,EAAe,GAE3B,IADAA,GAAgB,IACG,EAAG,SAAA9K,OAAU+K,KAAKC,MAAMC,GAArB,UACtB,IAAMC,EAAMJ,EAAe,GAE3B,IADAA,GAAgB,IACG,EAAG,SAAA9K,OAAU+K,KAAKC,MAAME,GAArB,gBACtB,IAAMC,EAAOL,EAAe,GAE5B,OADAA,GAAgB,IACG,EAAG,GAAA9K,OAAU+K,KAAKC,MAAMG,GAArB,gBAClBL,EAAe,GAAI,GAAA9K,OAAU+K,KAAKC,MAAMF,GAArB,UACnBA,EAAe,IAAK,SAAA9K,OAAW+K,KAAKC,MAAMF,EAAe,IAArC,gBACxB,SAAA9K,OAAW+K,KAAKC,MAAMF,EAAe,KAArC,kLCRF,IAAMM,GAAkB5J,IAAOiE,IAAV4F,MAqBNC,GAZG,SAAC5J,GAAD,OAChBgB,EAAAC,EAAAC,cAACwI,GAAD,KACE1I,EAAAC,EAAAC,cAAA,6CAAA5C,OAAgB,IAAIF,KAAK4B,EAAM5E,YAAYyO,iBAAiBb,MAAM,GAAI,KACtEhI,EAAAC,EAAAC,cAAA,YAAQlB,EAAM5E,aAAe4E,EAAM8J,YAA3B,2BAAAxL,OAAgD4K,GAAqBlJ,EAAM8J,YAA3E,q0BCTZ,IAAMC,GAAmBjK,IAAOiE,IAAViG,MA8EPC,GA1CI,SAACjK,GAAU,IAAAkK,EACEtC,KAAYuC,kBAAkBnK,EAAMoK,SAAShO,OAAM,GAAzEqH,EADoByG,EACpBzG,OAAQ4G,EADYH,EACZG,UACZD,EAAU3G,EAAOzH,OAAO,SAAC2H,EAAIC,GAG/B,MAFgB,aAAZA,EAAG7J,OACL4J,GAAMC,EAAG9B,MACJ6B,GACN,IACGjI,EAASD,OAAOC,OAAO2O,GACvB3F,EAAMhJ,EAAOP,OAAS,GAAKO,EAAO,GAAGf,KAAKmC,IAC1CwN,EAAM5F,GAAQ1D,EAAAC,EAAAC,cAAA,OAAKwD,IAAKA,EAAKD,IAAI,KACjC8F,EAAM7F,EAAM,IAAK,IAEvB,OADA0F,EAAUA,EAAQjP,OAASoP,EAAMH,EAAQpB,MAAM,EAAGuB,GAAO,MAAQH,EAE/DpJ,EAAAC,EAAAC,cAAC6I,GAAD,KACE/I,EAAAC,EAAAC,cAACsJ,GAAD,CACEvB,OAAQjJ,EAAMiJ,OACdrL,QAASoC,EAAMpC,QACfsH,SAAUlF,EAAMyK,SAClBzJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SAAIlB,EAAM0K,OACV1J,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,SAAApH,OAAY0B,EAAMhB,UACtBsL,EACFtJ,EAAAC,EAAAC,cAAA,SAAKkJ,KAGTpJ,EAAAC,EAAAC,cAACyJ,GAAD,CACEvP,WAAY4E,EAAM5E,WAClB0O,WAAY9J,EAAM8J,m1CCnE1B,IAAMc,GAASC,YAAHC,MASNC,GAAgBjL,IAAOiE,IAAViH,KAYAJ,IAkEJK,iMA3BUC,EAAWC,GAChC,OAAID,EAAUE,UAAY/K,KAAKL,MAAMoL,yCAOrC,OAAK/K,KAAKL,MAAMoL,QAEdpK,EAAAC,EAAAC,cAAC6J,GAAD,KACE/J,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,YAR0B,YAVda,aClBPsJ,GCxCW,SAACC,GACzB,gBAAAC,GACE,SAAAC,EAAaxL,GAAO,IAAAI,EAAA,OAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAAmL,IAClBpL,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAA+P,GAAAI,KAAAvL,KAAML,KACD4E,MAAQ,CACXiH,MAAO,EACPC,IAAKzC,KAAK0C,KAAKC,SAASC,gBAAgBC,aAAe9L,EAAKJ,MAAMmM,YAAc,EAChFC,aAAcJ,SAASC,gBAAgBC,cAEzC9L,EAAKiM,cAAgBC,IAASlM,EAAKiM,cAAc3K,KAAnBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,KAA+B,KAC7DA,EAAKoM,cAAgBpM,EAAKoM,cAAc9K,KAAnBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,KACrBA,EAAKqM,oBAAsBH,IAASlM,EAAKJ,MAAM0M,mBAAoB,IAAM,CAACC,SAAS,IATjEvM,EADtB,OAAA3E,OAAAmR,EAAA,EAAAnR,CAAA+P,EAAAD,GAAA9P,OAAAoR,EAAA,EAAApR,CAAA+P,EAAA,EAAAsB,IAAA,gBAAA3Q,MAAA,WAamB,IAAA4Q,EAAA1M,KACT2M,EAAYhB,SAASC,gBAAgBe,UAC3C3M,KAAK4M,SAAS,SAACrI,GACb,IAAIiH,EAAQxC,KAAKC,MAAM0D,EAAYD,EAAK/M,MAAMmM,YAAc,EACxDL,EAAMD,EAAQxC,KAAK0C,KAAKnH,EAAMwH,aAAeW,EAAK/M,MAAMmM,YAAc,GAQ1E,OAPIN,EAAQ,IACVA,EAAQ,GAENC,EAAMiB,EAAK/M,MAAMkN,SAAS/R,UAC3B4R,EAAK/M,MAAMmN,SAAWJ,EAAKN,oBAAoB,UAChDX,EAAMiB,EAAK/M,MAAMkN,SAAS/R,QAErB,CACL0Q,QACAC,WA3BR,CAAAgB,IAAA,gBAAA3Q,MAAA,WAiCIkE,KAAK4M,SAAS,CACZb,aAAcJ,SAASC,gBAAgBC,eAEzC7L,KAAKgM,kBApCT,CAAAS,IAAA,oBAAA3Q,MAAA,WAwCI6P,SAASoB,iBAAiB,SAAU/M,KAAKgM,eACzCgB,OAAOD,iBAAiB,SAAU/M,KAAKmM,iBAzC3C,CAAAM,IAAA,uBAAA3Q,MAAA,WA6CI6P,SAASsB,oBAAoB,SAAUjN,KAAKgM,eAC5CgB,OAAOC,oBAAoB,SAAUjN,KAAKmM,iBA9C9C,CAAAM,IAAA,SAAA3Q,MAAA,WAiDY,IAAAmE,EAOJD,KAAKL,MALPkN,EAFM5M,EAEN4M,SACAf,EAHM7L,EAGN6L,WACAoB,EAJMjN,EAINiN,mBACAJ,EALM7M,EAKN6M,QACA3O,EANM8B,EAMN9B,MAEIgP,EAAoC,QAAvBD,GAAgCJ,EAC7CM,EAAuC,WAAvBF,GAAmCJ,EACnDO,EAAmBD,EAAgB,MAAQ,IAC3CE,EAAsBH,EAAa,MAAQ,IAC3CI,EAAkBV,EAASlE,MAAM3I,KAAKuE,MAAMiH,MAAOxL,KAAKuE,MAAMkH,KAC9D+B,EAAaxN,KAAKuE,MAAMiH,MAAQM,EAChC2B,GAAiBZ,EAAS/R,OAASkF,KAAKuE,MAAMkH,KAAOK,EAE3D,OACEnL,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0E,SAAA,KACE3E,EAAAC,EAAAC,cAAC6M,GAAD,CAAS3C,QAASoC,IAClBxM,EAAAC,EAAAC,cAAA,OAAKuG,MAAO,CAACuG,OAAM,QAAA1P,OAAUuP,EAAV,SAAAvP,OAA4BoP,EAA5B,WAEnB1M,EAAAC,EAAAC,cAACoK,EAAD,CACE4B,SAAUU,EACVpP,MAAOA,IACTwC,EAAAC,EAAAC,cAAA,OAAKuG,MAAO,CAACuG,OAAM,QAAA1P,OAAUwP,EAAV,SAAAxP,OAA+BqP,EAA/B,WAEnB3M,EAAAC,EAAAC,cAAC6M,GAAD,CAAS3C,QAASqC,SA3E1BjC,EAAA,CAAqBzJ,aDuCRsJ,CAxCG,SAACrL,GACf,IAAMiO,EAAOjO,EAAMkN,SAASjS,IAAI,SAAC+D,EAASkP,GACxC,IAAKlO,EAAMxB,MAAMD,SAASS,GAAU,OAAO,KADO,IAAAmP,EAU9CnO,EAAMxB,MAAMD,SAASS,GAPvByL,EAHgD0D,EAGhD1D,OACA7M,EAJgDuQ,EAIhDvQ,QACAqL,EALgDkF,EAKhDlF,OACAyB,EANgDyD,EAMhDzD,MACAN,EAPgD+D,EAOhD/D,QACAhP,EARgD+S,EAQhD/S,WACA0O,EATgDqE,EAShDrE,WAEF,OACE9I,EAAAC,EAAAC,cAAA,MACE4L,IAAK9N,EACL2C,UAAS,QAAArD,OAAUU,IACnBgC,EAAAC,EAAAC,cAACkN,GAAD,CACEnF,OAAQA,EACRjK,QAASA,EACTyL,OAAQA,EACR7M,QAASA,EACT8M,MAAOA,EACPN,QAASA,EACThP,WAAYA,EACZ0O,WAAYA,OAItB,OACE9I,EAAAC,EAAAC,cAAA,UACI+M,KEvBFI,eACJ,SAAAA,EAAarO,GAAO,IAAAI,EAAA,OAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAAgO,IAClBjO,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAA4S,GAAAzC,KAAAvL,KAAML,KACDpC,QAAUwC,EAAKJ,MAAM+G,MAAMuH,OAAO1Q,QACvCwC,EAAKyE,QAAUzE,EAAKJ,MAAM6E,QAC1BzE,EAAKqM,oBAAsBrM,EAAKJ,MAAMrC,qBAAqB+D,KAAhCjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAA2CA,EAAKxC,SAJzDwC,mFAQlB,GAAIC,KAAKzC,UAAYyC,KAAKwE,SAAsE,IAA3DxE,KAAKL,MAAMuO,cAAclO,KAAKzC,SAASsP,SAAS/R,OACnFkF,KAAKoM,2BACA,GAAKpM,KAAKL,MAAMuO,cAAczT,eAAeuF,KAAKzC,SAElD,CACL,IAAMsP,EAAW7M,KAAKL,MAAMuO,cAAclO,KAAKzC,SAASsP,SAClDzP,EAAMyP,EAAS,GACfxP,EAASwP,EAASA,EAAS/R,OAAS,GACpCqD,EAAQ6B,KAAKL,MAAMxB,MACzB6B,KAAKL,MAAMxC,cAAcgB,EAAMD,SAASd,GAAKrC,WAAYoD,EAAMD,SAASb,GAAQtC,iBANhFiF,KAAKoM,oBAAoB,MAAM,iDAUZ+B,EAAWrD,GAChC,QAAKqD,EAAUD,cAAczT,eAAeuF,KAAKzC,0CAMzC,IAAA0C,EAOJD,KAAKL,MALP7B,EAFMmC,EAENnC,aACAZ,EAHM+C,EAGN/C,WACAkR,EAJMnO,EAINmO,kBACAF,EALMjO,EAKNiO,cACA/P,EANM8B,EAMN9B,MAGA2O,EAEEhP,EAFFgP,QACAI,EACEpP,EADFoP,mBAEIL,EAAWqB,EAAclO,KAAKzC,UAAY2Q,EAAclO,KAAKzC,SAASsP,SAE5E,OAAKA,EAEHlM,EAAAC,EAAAC,cAAA,OAAKS,UAAU,QACXtB,KAAKzC,UAAYyC,KAAKwE,SACnB7D,EAAAC,EAAAC,cAACwN,GAAD,CACCnR,WAAYA,EACZmD,aAAc+N,IACpBzN,EAAAC,EAAAC,cAACyN,GAAD,CACEpB,mBAAoBA,EACpBJ,QAASA,EACThB,WAXc,IAYdO,mBAAoBrM,KAAKoM,oBACzBS,SAAUA,EACV1O,MAAOA,KAbUwC,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0E,SAAA,KAAE3E,EAAAC,EAAAC,cAAC6M,GAAD,cA3CVhM,aA4EJ4C,GAFY3C,YAZH,SAAC4C,GAAD,MAAY,CAClCC,QAASD,EAAM1G,KAAK4G,KAAK/J,GACzBwT,cAAe3J,EAAM1G,KAAKK,SAASqQ,MAAMrQ,SACzCC,MAAOoG,EAAM1G,KAAKK,SAASC,MAC3BjB,WAAYqH,EAAM1G,KAAK2Q,WACvB1Q,aAAcyG,EAAM1G,KAAKC,eAEA,SAAC3B,GAAD,MAAe,CACxCmB,qBAAsB,kBAAanB,EAASmB,EAAoBkF,WAApB,EAAA/E,aAC5C2Q,kBAAmB,kBAAMjS,EnBwFY,SAACA,EAAUyB,GAAa,IAAA6Q,EACpC7Q,IAAjBC,EADqD4Q,EACrD5Q,KAAMmB,EAD+CyP,EAC/CzP,OACRvC,EAAMlD,EAAUyF,EAAOC,SAASC,SAFuBwP,EAGX7Q,EAAK4G,KAA3ClH,EAHiDmR,EAGrDhU,GAAuB0P,EAH8BsE,EAGxC7J,SAAkB+D,EAHsB8F,EAGtB9F,OACvC,IAAK1N,EAAkB2C,EAAK2Q,WAAWrT,QACrC,OAAOgB,EAASH,EAAsB,CAACiB,QAAS,2BAAQC,WAAY,gBAEtE,IAAMc,EAAMD,KAAKC,MACXmB,EAAI/D,OAAAiD,EAAA,EAAAjD,CAAA,CACRmC,UACA6M,SACAxB,SACA7N,WAAYiD,EACZyL,WAAYzL,GACTtC,EAAgBmC,EAAK2Q,WAAWrT,SAIrC,OADAgB,EA3J4B,CAAEzC,KAAM,oBA4J7BiD,YAAK,OAAQF,EAAK,CAAC0C,KAAM6F,KAAKC,UAAU9F,GAAO+F,QAFtC,CAAEC,eAAgB,sBAG/BvI,KAAK,SAAA1C,GAAO,IACHQ,EAAOR,EAAII,KAAXI,GACF0D,EAAMhD,OAAAiD,EAAA,EAAAjD,CAAA,GAAQ+D,EAAR,CAAczE,OAC1ByB,EA9HoC,CAACzC,KAAM,uBAAwBC,QA8HvC,CAAC4D,UAAS7C,KAAI0D,YAC1CjC,EAASF,EAA2B,CAACxC,UAAWuE,EAAKnE,UAAW,SAChEsC,EAASW,EAAe,cAAc,MAEvCC,MAAM,SAAA4R,GAAiB,IAAd1R,EAAc0R,EAAd1R,QACRd,EAASH,EAAsB,CAACiB,UAASC,WAAY,gBACrDf,EAASW,EAAe,oBmBnH5BK,cAAe,kBAAahB,EAASgB,EAAaqF,WAAb,EAAA/E,eAEZkE,CAA6CqM,IC9ExEzG,KAAYC,IAAIC,QAEhB,IAYemH,GAZK,SAACjP,GAAD,OAClBgB,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0E,SAAA,KACE3E,EAAAC,EAAAC,cAACkH,GAAAnH,EAAD,CACEiO,UAAU,EACV/S,MAAOyL,KAAYuC,kBAAkBnK,EAAMoK,sqCCTjD,IAAM+E,GAAiBrP,IAAOsP,MAAVC,KAEE,SAAArP,GAAK,OAAIA,EAAMsP,KAGxB,SAAAtP,GAAK,OAAIA,EAAMuP,SAUf,SAAAvP,GAAK,OAAIA,EAAMC,MAAMgG,QA0DnBuJ,GAhBE,SAACxP,GAChB,OACEgB,EAAAC,EAAAC,cAACiO,GAAD,CACEG,IAAKtP,EAAMsP,IACXC,QAASvP,EAAMuP,SACfvO,EAAAC,EAAAC,cAAA,UACIlB,EAAMO,8eC3DhB,IAAMkP,GAAgB3P,IAAOiE,IAAV2L,MA6DJC,GAtCC,SAAC3P,GACf,IAAMuP,EAAUvP,EAAMpC,UAAYoC,EAAM6E,QAAU,YAAc,OAChE,OACE7D,EAAAC,EAAAC,cAACuO,GAAD,KACEzO,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsJ,GAAD,CACEvB,OAAQjJ,EAAMiJ,OACdrL,QAASoC,EAAMpC,QACfsH,SAAUlF,EAAMyK,SAClBzJ,EAAAC,EAAAC,cAAC0O,GAAD,CAAUL,QAASA,GACjBvO,EAAAC,EAAAC,cAAA,MAAIW,QAAS7B,EAAM6P,eAAnB,gBACA7O,EAAAC,EAAAC,cAAA,MAAIW,QAAS7B,EAAM8P,kBAAnB,kBAGJ9O,EAAAC,EAAAC,cAAA,KACES,UAAU,UACVoO,wBAAyB,CAACC,OAAQpI,KAAYuC,kBAAkBnK,EAAMoK,SAAS6F,YACjFjP,EAAAC,EAAAC,cAACyJ,GAAD,CACEvP,WAAY4E,EAAM5E,WAClB0O,WAAY9J,EAAM8J,wBC7CXoG,GALC,SAACC,EAAYC,GAAb,OAAyB3U,OAAO4U,QAAQF,GAAYnU,OAAO,SAACwG,EAAD5G,GAAwB,IAAAK,EAAAR,OAAA6U,GAAA,EAAA7U,CAAAG,EAAA,GAAdkR,EAAc7Q,EAAA,GAATsU,EAAStU,EAAA,GAE/F,OADKmU,EAAQtV,eAAegS,KAAMtK,EAAOsK,GAAOyD,GACzC/N,GACN,k6CCCL,ICoDegO,GDpDkB,SAACC,GAChC,IAAMC,EAAgB5Q,IAAOiE,IAAV4M,KAkCC,SAAA/U,GAAA,MAAe,QAAfA,EAAEgV,SACM,SAAC5Q,GAAD,OAAWA,EAAMC,MAAMgG,OAEvB,SAACjG,GAAD,OAAWA,EAAMC,MAAMgG,OAqBnC,SAAAhK,GAAA,IAAE4U,EAAF5U,EAAE4U,MAAF,OAAaxH,KAAKC,MAAMuH,IAOtB,SAAAnR,GAAA,IAAEmR,EAAFnR,EAAEmR,MAAF,OAAaxH,KAAKC,MAAMuH,KAG1C,gBAAAtF,GACE,SAAAC,EAAaxL,GAAO,IAAAI,EAAA,OAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAAmL,IAClBpL,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAA+P,GAAAI,KAAAvL,KAAML,KACD8Q,WAAa,SAAW1S,KAAKC,MAAM0S,SAAS,IAAIC,OAAO,GAAI,KAAKC,MAAM,IACxEhW,IAAI,SAAAiW,GAAG,MAAY,MAARA,EAAcA,GAAO7H,KAAKC,MAAsB,IAAhBD,KAAK8H,UAAkB,IAAIJ,SAAS,MAAKK,KAAK,IAC5FhR,EAAKwE,MAAQ,CACXgM,QAASxQ,EAAKJ,MAAMqR,gBAAkB,EACtCC,iBAAkBlR,EAAKJ,MAAMsR,mBAAoB,EACjDC,SAAUnR,EAAKJ,MAAMwR,iBAAmB,GACxCC,gBAAiBrR,EAAKJ,MAAMyR,iBAAmB,CAAC,KAAM,KAAM,KAAM,MAClEC,gBAAiBtR,EAAKJ,MAAM0R,kBAAmB,GAEjDtR,EAAKuR,cAAgBvR,EAAKuR,cAAcjQ,KAAnBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,KAXHA,EADtB,OAAA3E,OAAAmR,EAAA,EAAAnR,CAAA+P,EAAAD,GAAA9P,OAAAoR,EAAA,EAAApR,CAAA+P,EAAA,EAAAsB,IAAA,gBAAA3Q,MAAA,SAeiBgG,GACb,IAAMG,EAASH,EAAMG,OACfnG,EAAwB,UAAhBmG,EAAOvI,KACnB6X,OAAOC,SAASvP,EAAOnG,OACvBkE,KAAKuE,MAAMgM,QAAUgB,OAAOC,SAASvP,EAAOwP,WAAW,gBAAgB3V,OACzEkE,KAAK4M,SAAS,CACZ2D,QAASzU,MArBf,CAAA2Q,IAAA,SAAA3Q,MAAA,WAyBY,IAAA4Q,EAAA1M,KACF0R,EAAO7B,GAAQ7P,KAAKL,MAAOK,KAAKuE,OAChCoN,EAAS,IAAIC,MAAM5I,KAAK0C,KAAK1L,KAAKL,MAAMkS,MAAM7R,KAAKuE,MAAM2M,WAC5DY,KAAK,GACLlX,IAAI,SAACmX,EAAGlE,EAAOmE,GACd,IAAMlX,EAASkX,EAAMlX,OACrB,OAAIA,GAAU,GACC,IAAV+S,GACAA,IAAU/S,EAAO,GAChB+S,GAASnB,EAAKnI,MAAMgM,QAAU,GAAK1C,GAASnB,EAAKnI,MAAMgM,QAAU,EAEnE5P,EAAAC,EAAAC,cAAA,SACE4L,IAAKoB,EACLvM,UAAS,QAAArD,OAAU4P,EAAM,IACzBlN,EAAAC,EAAAC,cAAA,SACEnH,KAAK,QACLoC,MAAO+R,EAAM,EACboE,QAASpE,IAAUnB,EAAKnI,MAAMgM,QAAQ,EACtC1U,KAAI,GAAAoC,OAAKyO,EAAK+D,YACdvP,SAAUwL,EAAK4E,gBACdzD,EAAM,GAGJA,IAAUnB,EAAKnI,MAAMgM,QAAU,GAAK1C,IAAUnB,EAAKnI,MAAMgM,QAAU,EACpE5P,EAAAC,EAAAC,cAAA,QAAM4L,IAAKoB,GAAX,OAED,OAGb,OACElN,EAAAC,EAAAC,cAACwP,EAAD,CACE6B,IAAK,SAACC,GAAD,OAAQzF,EAAK0F,QAAUD,GAC5B7Q,UAAU,uBACViP,QAASvQ,KAAKuE,MAAMgM,QACpBW,SAAUlR,KAAKuE,MAAM2M,SACrBV,MAAOxQ,KAAKoS,SAAWpS,KAAKoS,QAAQC,aACpC1R,EAAAC,EAAAC,cAACuP,EAADhV,OAAAkX,OAAA,CACE/B,QAASvQ,KAAKuE,MAAMgM,QACpBW,SAAUlR,KAAKuE,MAAM2M,UACjBQ,IACN/Q,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACE0R,eAAc,KACdC,SAAiC,IAAvBxS,KAAKuE,MAAMgM,QACrB/O,QAASxB,KAAKsR,eAHhB,sBAME3Q,EAAAC,EAAAC,cAAA,WAAM8Q,GACRhR,EAAAC,EAAAC,cAAA,UACE0R,eAAc,IACdC,SAAUxS,KAAKuE,MAAMgM,UAAYvH,KAAK0C,KAAK1L,KAAKL,MAAMkS,MAAM7R,KAAKuE,MAAM2M,UACvE1P,QAASxB,KAAKsR,eAHhB,4BAzEVnG,EAAA,CAAqBzJ,aCjBRyO,CAnDM,SAACxQ,GAAD,OACnBgB,EAAAC,EAAAC,cAAA,UACIlB,EAAMkN,SAASjS,IAAI,SAAC6X,EAAYC,GAChC,IAAK/S,EAAMf,SAASV,SAASuU,IACxBzJ,KAAKC,MAAMyJ,EAAM/S,EAAMuR,YAAcvR,EAAM4Q,QAAU,EACtD,OAAO,KAH6B,IAAAoC,EAYpChT,EAAMf,SAASV,SAASuU,GAN1BlV,EANsCoV,EAMtCpV,QACA6M,EAPsCuI,EAOtCvI,OACAxB,EARsC+J,EAQtC/J,OACAmB,EATsC4I,EAStC5I,QACAhP,EAVsC4X,EAUtC5X,WACA0O,EAXsCkJ,EAWtClJ,WAEImJ,EAAoBjT,EAAM8P,iBAAiBpO,KAAK,KAAMoR,GACtDI,EAAiBlT,EAAM6P,cAAcnO,KAAK,KAC9C,CAAE0I,WACF0I,EACA,CAAElV,UAAS6M,SAAQxB,SAAQ7N,eAC7B,OACE4F,EAAAC,EAAAC,cAAA,MACE4L,IAAKgG,EACLnR,UAAS,WAAArD,OAAayU,IACtB/R,EAAAC,EAAAC,cAACiS,GAAD,CACEpY,GAAI+X,EACJ7J,OAAQA,EACRrL,QAASA,EACTiH,QAAS7E,EAAM6E,QACf4F,OAAQA,EACRL,QAASA,EACThP,WAAYA,EACZ0O,WAAYA,EACZgG,iBAAkBmD,EAClBpD,cAAeqD,gNCjC3B,IAAME,GAAsBtT,IAAOiE,IAAVsP,MA8BVC,GArBO,SAACtT,GACrB,OACEgB,EAAAC,EAAAC,cAACkS,GAAD,KACEpS,EAAAC,EAAAC,cAAC0E,GAAD,CACEnF,OAAQ,eACRD,WAAY,gBACZjD,WAAYyC,EAAMzC,WAClBmD,aAAcV,EAAMU,cACpBM,EAAAC,EAAAC,cAAC0H,GAAD,CACExE,iBAAiB,EACjBlI,KAAM,srBCJhB,IAAMqX,GAAazT,IAAOiE,IAAVyP,MA6BVC,eACJ,SAAAA,EAAazT,GAAO,IAAAI,EAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAAoT,IAClBrT,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAAgY,GAAA7H,KAAAvL,KAAML,KACD4E,MAAQ,CACX8O,oBAAqB,GACrBC,aAAc,MAGhB,IAAMxW,EAAiBiD,EAAKJ,MAAM7C,eAC5ByW,EAAiBxT,EAAKJ,MAAM4T,eAClCxT,EAAKyT,mBAAqB,KAC1BzT,EAAK0T,yBAA2B,SAAAtB,GAAE,OAAIpS,EAAKyT,mBAAqBrB,GAChEpS,EAAKpB,QAAUoB,EAAKJ,MAAM+G,MAAMuH,OAAOtP,QACvCoB,EAAK2T,sBAAwB3T,EAAKJ,MAAMgU,qBAAqBtS,KAAK,KAAMtB,EAAKpB,SAC7EoB,EAAK6S,kBAAoB7S,EAAKJ,MAAM8P,iBAAiBpO,KAAK,KAAMtB,EAAKpB,SACrEoB,EAAK6T,0BAA4B7T,EAAK8T,gBAAgBxS,KAArBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAAgCjD,EAAgB,iBACjF,IAAMgX,EAAuB/T,EAAKJ,MAAMoU,oBAAoB1S,KAA/BjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAA0CA,EAAK6T,0BAA2B7T,EAAKpB,SAC5GoB,EAAKiU,yBAA2BjU,EAAK8S,eAAexR,KAApBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAA+BwT,EAAgB,gBAAiBO,GAEhG/T,EAAKkU,gBAAkB,KACvBlU,EAAKmU,sBAAwB,SAAA/B,GAAE,OAAIpS,EAAKkU,gBAAkB9B,GAC1DpS,EAAKoU,uBAAyBpU,EAAK8T,gBAAgBxS,KAArBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAAgCjD,EAAgB,cAC9E,IAAMsX,EAAoBrU,EAAKJ,MAAM0U,iBAAiBhT,KAA5BjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAAuCA,EAAKoU,uBAAwBpU,EAAKJ,MAAM6E,SArBvF,OAsBlBzE,EAAKuU,sBAAwBvU,EAAK8S,eAAexR,KAApBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAA+BwT,EAAgB,aAAca,GAtBxErU,+EAyBHjD,EAAgBI,EAAY4E,GACtCA,GACAA,EAAMG,SAAWjC,KAAKwT,oBACtB1R,EAAMG,SAAWjC,KAAKiU,kBACzBnX,EAAeI,GAAY,GAC3B8C,KAAK4M,SAAS,CACZyG,oBAAqB,GACrBC,aAAc,+CAKJC,EAAgBrW,EAAYoW,EAActD,EAAStV,EAAIK,GACrEwY,EAAerW,EAAY8S,GAC3BhQ,KAAK4M,SAAS,CACZyG,oBAAqBnW,EACrBoW,aAAcA,EAAajS,KAAKrB,KAAMtF,EAAIK,iDAKvCiF,KAAKL,MAAM4U,cAAcvU,KAAKrB,UAC6B,IAA3DqB,KAAKL,MAAM4U,cAAcvU,KAAKrB,SAASkO,SAAS/R,QACnDkF,KAAKL,MAAM0M,mBAAmBrM,KAAKrB,0CAI7B,IAAA6V,EAUJxU,KAAKL,MAAM4U,cAAcvU,KAAKrB,SARhC0L,EAFMmK,EAENnK,MACAN,EAHMyK,EAGNzK,QACAnB,EAJM4L,EAIN5L,OACAwB,EALMoK,EAKNpK,OACA7M,EANMiX,EAMNjX,QACAxC,EAPMyZ,EAONzZ,WACA0O,EARM+K,EAQN/K,WACAoD,EATM2H,EASN3H,SAEI4H,EAAuBzU,KAAKsU,sBAAsBjT,KAAK,KAC3D,CAAEgJ,QAAON,WACT/J,KAAKrB,QACL,CAACpB,UAAS6M,SAAQxB,SAAQ7N,eACtBmU,EAAU3R,IAAYyC,KAAKL,MAAM6E,QAAU,YAAc,OACzDkQ,EAA+D,kBAAnC1U,KAAKuE,MAAM8O,oBAA0CrT,KAAKL,MAAMgV,cAAgB,KAC5GC,EAA4D,eAAnC5U,KAAKuE,MAAM8O,oBAAuCrT,KAAKL,MAAM6O,WAAa,KACnGqG,EAAyD,KAAnC7U,KAAKuE,MAAM8O,oBAA6BrT,KAAKL,MAAMgV,cAAgB,KAC/F,OACEhU,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0E,SAAA,KACE3E,EAAAC,EAAAC,cAACqS,GAAD,KACEvS,EAAAC,EAAAC,cAAA,OAAKS,UAAU,kBACbX,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAKwJ,GACL1J,EAAAC,EAAAC,cAAC0O,GAAD,CAAUL,QAASA,GACjBvO,EAAAC,EAAAC,cAAA,MAAIW,QAASiT,GAAb,kBAGJ9T,EAAAC,EAAAC,cAAA,OAAKS,UAAU,QACbX,EAAAC,EAAAC,cAACsJ,GAAD,CAAMvB,OAAQA,EAAQrL,QAASA,EAASsH,SAAUuF,KAEpDzJ,EAAAC,EAAAC,cAACiU,GAAD,CAAa/K,QAASA,IACtBpJ,EAAAC,EAAAC,cAAA,OAAKS,UAAU,aACbX,EAAAC,EAAAC,cAACyJ,GAAD,CAAWvP,WAAYA,EAAY0O,WAAYA,MAGnD9I,EAAAC,EAAAC,cAACkU,GAAD,CACE7X,WAAY2X,EACZxU,aAAcL,KAAK0T,wBACrB/S,EAAAC,EAAAC,cAACmU,GAAD,CACEnD,MAAOhF,EAAS/R,OAChB0J,QAASxE,KAAKL,MAAM6E,QACpBqI,SAAUA,EACVjO,SAAUoB,KAAKL,MAAMf,SACrB4Q,cAAexP,KAAKgU,yBACpBvE,iBAAkBzP,KAAK4S,qBAE3BjS,EAAAC,EAAAC,cAACoU,GAAA,EAAD,CACEC,WAAYlV,KAAKyT,yBACjB0B,MAAwC,kBAAjCnV,KAAKuE,MAAM8O,oBAClB+B,eAAgBpV,KAAK4T,0BACrB1W,WAAYwX,EACZrU,aAAcL,KAAKuE,MAAM+O,aACzB+B,OAAQ,SAAA3D,GAAI,OAAK/Q,EAAAC,EAAAC,cAACkU,GAAkBrD,MACtC/Q,EAAAC,EAAAC,cAACoU,GAAA,EAAD,CACEC,WAAYlV,KAAKkU,sBACjBiB,MAAwC,eAAjCnV,KAAKuE,MAAM8O,oBAClB+B,eAAgBpV,KAAKmU,uBACrBjX,WAAc0X,EACdvU,aAAcL,KAAKuE,MAAM+O,aACzB+B,OAAQ,SAAA3D,GAAI,OAAK/Q,EAAAC,EAAAC,cAACwN,GAAeqD,cAlHxBhQ,aA0IJ4C,GAFY3C,YAhBH,SAAC4C,GAAD,MAAY,CAClCgQ,cAAehQ,EAAM1G,KAAKK,SAASC,MAAMD,SACzCU,SAAU2F,EAAM1G,KAAKK,SAASU,SAC9B+V,cAAepQ,EAAM1G,KAAK8W,cAC1BnG,WAAYjK,EAAM1G,KAAK2Q,WACvBhK,QAASD,EAAM1G,KAAK4G,KAAK/J,KAEA,SAACyB,GAAD,MAAe,CACxCkQ,mBAAoB,kBAAalQ,EAASuC,EAAmB8D,WAAnB,EAAA/E,aAC1CsW,oBAAqB,kBAAa5X,E3B6ED,SAACiZ,EAAgBzW,EAASjE,EAAIgX,GAA9B,OAAuC,SAACvV,EAAUyB,GAAa,IAAA0X,EACvE1X,IAAjBC,EADwFyX,EACxFzX,KAAMmB,EADkFsW,EAClFtW,OACRvC,EAAMlD,EAAUyF,EAAOC,SAASC,SAChClB,EAAMD,KAAKC,MACjB,IAAK9C,EAAkB2C,EAAK8W,cAAcxZ,QACxC,OAAOgB,EAASH,EAAsB,CAACiB,QAAS,2BAAQC,WAAY,mBAEtE,IAAMiC,EAAI/D,OAAAiD,EAAA,EAAAjD,CAAA,CACRV,KACAiE,UACA8K,WAAYzL,GACT0T,EACAhW,EAAgBmC,EAAK8W,cAAcxZ,SAIxC,OADAgB,EA3O2B,CAAEzC,KAAM,mBA4O5BiD,YAAK,MAAOF,EAAK,CAAC0C,KAAM6F,KAAKC,UAAU9F,GAAO+F,QAFrC,CAAEC,eAAgB,sBAG/BvI,KAAK,SAAA1C,GACJiC,EAxO4C,CAAEzC,KAAM,iCAAkCC,QAwOjD,CAACe,KAAI0D,OAAQe,KAClDiW,MAEDrY,MAAM,SAAAwY,GAAiB,IAAdtY,EAAcsY,EAAdtY,QACRd,EAASlB,EAAqB,CAACgC,UAASC,WAAY,mBACpDf,EAASW,EAAe,sB2BpGkC0F,WAAnB,EAAA/E,aAC3C4W,iBAAkB,kBAAalY,E3BuGD,SAACiZ,EAAgB5Q,EAAS9J,EAAIgX,GAA9B,OAAuC,SAACvV,EAAUyB,GAAa,IACrFC,EAASD,IAATC,KACFpB,EAAMlD,EAAO,SAAA0E,OAAYuG,GACzBxG,EAAMD,KAAKC,MACjB,IAAK9C,EAAkB2C,EAAK2Q,WAAWrT,QACrC,OAAOgB,EAASH,EAAsB,CAACiB,QAAS,2BAAQC,WAAY,gBAEtE,IAAMiC,EAAI/D,OAAAiD,EAAA,EAAAjD,CAAA,CACRV,KACA+O,WAAYzL,GACT0T,EACAhW,EAAgBmC,EAAK2Q,WAAWrT,SAIrC,OADAgB,EArQ2B,CAAEzC,KAAM,mBAsQ5BiD,YAAK,MAAOF,EAAK,CAAC0C,KAAM6F,KAAKC,UAAU9F,GAAO+F,QAFrC,CAAEC,eAAgB,sBAG/BvI,KAAK,SAAA1C,GACJiC,EAhQyC,CAAEzC,KAAM,8BAA+BC,QAgQ9C,CAACe,KAAI0D,OAAQe,KAC/CiW,MAEDrY,MAAM,SAAAyY,GAAiB,IAAdvY,EAAcuY,EAAdvY,QACRd,EAASlB,EAAqB,CAACgC,UAASC,WAAY,gBACpDf,EAASW,EAAe,mB2B7H4B0F,WAAhB,EAAA/E,aACxCkW,qBAAsB,kBAAaxX,E3BqBD,SAACwC,GAAD,OAAa,SAACxC,EAAUyB,GAAa,IAAA6X,EAC9C7X,IAAjBC,EAD+D4X,EAC/D5X,KAAMmB,EADyDyW,EACzDzW,OACRvC,EAAMlD,EAAUyF,EAAOC,SAASC,SAFiCwW,EAGrB7X,EAAK4G,KAA3ClH,EAH2DmY,EAG/Dhb,GAAuB0P,EAHwCsL,EAGlD7Q,SAAkB+D,EAHgC8M,EAGhC9M,OACvC,IAAK1N,EAAkB2C,EAAK8W,cAAcxZ,QACxC,OAAOgB,EAASH,EAAsB,CAACiB,QAAS,2BAAQC,WAAY,mBAEtE,IAAMc,EAAMD,KAAKC,MACXmB,EAAI/D,OAAAiD,EAAA,EAAAjD,CAAA,CACRmC,UACAoB,UACAyL,SACAxB,SACA7N,WAAYiD,EACZyL,WAAYzL,GACTtC,EAAgBmC,EAAK8W,cAAcxZ,SAIxC,OADAgB,EA5L4B,CAAEzC,KAAM,oBA6L7BiD,YAAK,OAAQF,EAAK,CAAC0C,KAAM6F,KAAKC,UAAU9F,GAAO+F,QAFtC,CAAEC,eAAgB,sBAG/BvI,KAAK,SAAA1C,GAAO,IACHQ,EAAOR,EAAII,KAAXI,GACF0D,EAAMhD,OAAAiD,EAAA,EAAAjD,CAAA,GAAQ+D,EAAR,CAAczE,OACxByB,EA7JqC,CAACzC,KAAM,0BAA2BC,QA6JxC,CAACgF,UAASjE,KAAI0D,YAC7CjC,EAASF,EAA2B,CAACxC,UAAWuE,EAAKnE,UAAW,YAChEsC,EAASW,EAAe,iBAAiB,MAE5CC,MAAM,SAAA4Y,GAAiB,IAAd1Y,EAAc0Y,EAAd1Y,QACRd,EAASH,EAAsB,CAACiB,UAASC,WAAY,mBACrDf,EAASW,EAAe,sB2BlDoC0F,WAApB,EAAA/E,aAC5CgS,iBAAkB,kBAAatT,E3BqDD,SAACwC,EAASjE,GAAV,OAAiB,SAACyB,EAAUyB,GAAa,IAAAgY,EAC9ChY,IAAjBC,EAD+D+X,EAC/D/X,KAAMmB,EADyD4W,EACzD5W,OACRzB,EAAUM,EAAK4G,KAAK/J,GACpB+B,EAAMlD,EAAUyF,EAAOC,SAASC,SAChCC,EAAO,CACX5B,UACA7C,MAIF,OADAyB,EAlNwB,CAAEzC,KAAM,mBAmNzBiD,YAAK,SAAUF,EAAK,CAAC0C,KAAM6F,KAAKC,UAAU9F,GAAO+F,QAFxC,CAAEC,eAAgB,sBAG/BvI,KAAK,SAAA1C,GACJiC,EAjNkC,CAAEzC,KAAM,yBAA0BC,QAiNzC,CAAEgF,UAASjE,QACtCyB,EAAS0Z,YAAK7W,EAAOC,SAASC,aAE/BnC,MAAM,SAAA+Y,GAAiB,IAAd7Y,EAAc6Y,EAAd7Y,QACRd,EAnNkC,CAAEzC,KAAM,yBAA0BC,QAmNzC,CAAEsD,aAC7Bd,EAAS0Z,YAAK,c2BtEsCrT,WAAhB,EAAA/E,aACxCX,eAAgB,kBAAaX,EAASW,EAAc0F,WAAd,EAAA/E,aACtC8V,eAAgB,kBAAapX,E3B7FD,SAACe,EAAY8S,GAAb,MAA0B,CAAEtW,KAAM,kBAAmBC,QAAS,CAACuD,aAAY8S,a2B6FnDxN,WAAd,EAAA/E,eAEbkE,CAA6CyR,0TCrLxE,IAAM2C,GAActW,IAAOiE,IAAVsS,KAKK,SAAArW,GAAK,OAAIA,EAAMC,MAAMC,KAG9B,SAAAF,GAAK,OAAIA,EAAMC,MAAMgG,QAQ5BqQ,eACJ,SAAAA,EAAatW,GAAO,IAAAI,EAAA,OAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAAiW,IAClBlW,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAA6a,GAAA1K,KAAAvL,KAAML,KAURuW,mBAAqB,WAA0B,IAAzBC,EAAyB1Y,UAAA3C,OAAA,QAAA4C,IAAAD,UAAA,GAAAA,UAAA,GAAf,WACxB2Y,EAAM,IAAIC,eACV5c,EAAYsG,EAAKJ,MAAM7B,aAAarE,UAAU2D,KAAOW,KAAKC,MAC1DvB,EAAMsD,EAAKxG,QAAL,YAAA0E,OAA2BxE,EAA3B,SAA8C0c,EAC1DC,EAAIE,KAAK,MAAO7Z,GAChB2Z,EAAID,QAAU,IACdC,EAAIG,KAAK,MAETH,EAAII,OAASzW,EAAK0W,QAClBL,EAAIM,QAAU3W,EAAK4W,YACnBP,EAAIQ,UAAY7W,EAAK4W,YACrB5W,EAAK6M,SAAS,CACZwJ,SAvBgBrW,EA2BpB0W,QAAU,WACR1W,EAAK6M,SAAS,SAACrI,GACb,IAAIsS,EAAQtS,EAAMuS,aAIlB,OAHI/W,EAAKwE,MAAM6R,IAAIW,OAAS,MAC1BF,EAAQ7R,KAAKgS,MAAMzS,EAAM6R,IAAIa,cAAc3c,KAAKwc,cAE3C,CACLV,IAAK,KACLU,aAAcD,MAnCA9W,EAwCpB4W,YAAc,WACZ5W,EAAK6M,SAAS,SAACrI,GAGb,OAFIA,EAAM6R,KAA+B,IAAxB7R,EAAM6R,IAAIc,YACzB3S,EAAM6R,IAAIe,QACL,CACLf,IAAK,SA7CSrW,EAkDpBqX,kBAAoB,WAClBrX,EAAK6M,SAAS,CACZkK,aAAc,KApDE/W,EAwDpBsX,aAAe,SAACC,GACdvX,EAAK6M,SAAS,CACZ0K,YAxDFvX,EAAKwE,MAAQ,CACXuS,aAAc,EACdV,IAAK,KACLkB,QAAQ,GAEVvX,EAAKxG,QAAUF,EACf0G,EAAKwX,uBAAyBxX,EAAKwX,uBAAuBlW,KAA5BjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,IAAuCA,EAAKJ,MAAM6X,uBAR9DzX,sFA8DI0X,GACtBzX,KAAK2W,cACL3W,KAAKoX,oBACLpX,KAAKqX,cAAa,GAClBI,EAAgBzX,KAAKuE,MAAMuS,aAAc9W,KAAKqX,0DAI9CrX,KAAKkW,mBAAmB,wDAGJ,IAAAwB,EACiB1X,KAAKuE,MAAlC6R,EADYsB,EACZtB,IAAKkB,EADOI,EACPJ,OAAQR,EADDY,EACCZ,aACT,OAARV,IAA2B,IAAXkB,GAAmBR,EAAe,IACpD9W,KAAKkW,oEAKPlW,KAAK2W,+CAIL,OACEhW,EAAAC,EAAAC,cAACkV,GAAD,KACgC,IAA5B/V,KAAKuE,MAAMuS,aACRnW,EAAAC,EAAAC,cAAA,mDACAF,EAAAC,EAAAC,cAAA,OAAKW,QAASxB,KAAKuX,wBAAnB,YAAAtZ,OAAgD+B,KAAKuE,MAAMuS,cAA3D,0CA1FOpV,aAoGLC,eAJS,SAAC4C,GAAD,MAAY,CAClCzG,aAAcyG,EAAM1G,KAAKC,eAGZ6D,CAAyBsU,IC/GlC0B,eACJ,SAAAA,EAAahY,GAAO,IAAAI,EAAA,OAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAA2X,IAClB5X,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAAuc,GAAApM,KAAAvL,KAAML,KACD4X,uBAAyBxX,EAAKJ,MAAM6X,sBAAsBnW,KAAK,KAAMtB,EAAKJ,MAAMiY,sBAFnE7X,mFAMlB,IAAM8M,EAAW7M,KAAKL,MAAM7B,aAAa+O,SACzC,GAAwB,IAApBA,EAAS/R,OACXkF,KAAKL,MAAMiY,2BACN,CACL,IAAMzZ,EAAQ6B,KAAKL,MAAMxB,MACnBf,EAAMyP,EAAS,GACfxP,EAASwP,EAASA,EAAS/R,OAAO,GACxCkF,KAAKL,MAAMxC,cAAcgB,EAAMD,SAASd,GAAKrC,WAAYoD,EAAMD,SAASb,GAAQtC,8CAI1E,IAAA8c,EAKJ7X,KAAKL,MAAM7B,aAHb+O,EAFMgL,EAENhL,SACAC,EAHM+K,EAGN/K,QACAI,EAJM2K,EAIN3K,mBAEF,OACEvM,EAAAC,EAAAC,cAAA,OAAKS,UAAU,QACbX,EAAAC,EAAAC,cAACiX,GAAD,CACEN,sBAAuBxX,KAAKuX,yBAC9B5W,EAAAC,EAAAC,cAACyN,GAAD,CACEpB,mBAAoBA,EACpBJ,QAASA,EACTT,mBAAoBrM,KAAKL,MAAMiY,qBAC/B9L,WAAY,IACZe,SAAUA,EACV1O,MAAO6B,KAAKL,MAAMxB,gBAlCTuD,aAqDJ4C,GAFY3C,YAVH,SAAC4C,GAAD,MAAY,CAClCzG,aAAcyG,EAAM1G,KAAKC,aACzBK,MAAOoG,EAAM1G,KAAKK,SAASC,QAEF,SAAChC,GAAD,MAAe,CACxCyb,qBAAsB,kBAAazb,E7B6CD,SAACtC,GAAD,IAAY8D,EAAZF,UAAA3C,OAAA,QAAA4C,IAAAD,UAAA,GAAAA,UAAA,GAAoB,GAApB,OAA4B,SAACtB,EAAUyB,GAAa,IAElFnE,EADIoE,EAASD,IAATC,KASR,GAPIhE,EACFJ,EAAYoE,EAAKC,aAAarE,UAAUI,IAExCA,EAAY,SACZJ,EAAYsE,KAAKC,MACjB7B,EAAS3C,EAAkBC,MAExBA,EAAW,OAAO,KACvB,IAAMgD,EAAMlD,EAAO,WAAA0E,OAAcpE,EAAU,GAAxB,OAAAoE,OAAgCxE,EAAhC,OAAAwE,OAA+CN,GAC5D9C,EAAcgD,EAAKC,aAAajD,YAChCV,EAAc0D,EAAKK,SAASC,MAAMhE,YAExC,OADAgC,EAASvC,EAAaC,IACf8C,YAAK,MAAOF,GAChBG,KAAK,SAAA1C,GACoB,IAApBA,EAAII,KAAKQ,QACXoB,EAAYC,EAAUlC,EAAoBC,EAAKC,EAAaU,EAAahB,EAAWG,MAGvF+C,MAAM,SAAA0B,GACLtC,EAASrC,EAAoB2E,Q6BnE+B+D,WAApB,EAAA/E,aAC5C+Z,sBAAuB,kBAAarb,E7BsCD,SAAC4b,EAAYjB,EAAckB,GAA3B,OAA2C,WAC9E,OAAOD,EAAW,MAAOjB,GAAcmB,QAAQ,WAC7CD,GAAY,O6BxCoDxV,WAArB,EAAA/E,aAC7CN,cAAe,kBAAahB,EAASgB,EAAaqF,WAAb,EAAA/E,eAGZkE,CAA6CgW,aCxCzDO,GAlBM,SAAA3c,GAAA,IAAcmG,EAAdnG,EAAGwL,UAAsBoR,EAAzB5c,EAAyB4c,UAAczG,EAAvCtW,OAAAgd,GAAA,EAAAhd,CAAAG,EAAA,kCACnBoF,EAAAC,EAAAC,cAACgG,EAAA,EAADzL,OAAAkX,OAAA,GACMZ,EADN,CAEE2D,OAAQ,SAAC1V,GAAD,OACNwY,EACExX,EAAAC,EAAAC,cAACa,EAAc/B,GAEfgB,EAAAC,EAAAC,cAACuE,EAAA,EAAD,CACEC,GAAI,CACFnG,SAAU,gBACVqF,MAAO,CAAE8T,KAAM1Y,EAAMV,uPCTjC,IAAMqZ,GAAiBlR,IAAM1D,IAAT6U,KAMP,SAAC5Y,GAAD,OAAWA,EAAMC,MAAMgG,QAYrB4S,GAPE,SAAC7Y,GAAD,OACfgB,EAAAC,EAAAC,cAACyX,GAAD,KACE3X,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,SAAR,mxHCQJ,IAAMoT,GAAeC,IAAS,CAC5BC,OAAQ,kBAAMC,QAAAC,IAAA,CAAAC,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAnc,KAAAkc,EAAAzX,KAAA,YACdyL,QAAS,kBAAOnM,EAAAC,EAAAC,cAAC6M,GAAD,CAAS3C,SAAS,OAG9BiO,GAAQN,IAAS,CACrBC,OAAQ,kBAAMG,EAAAC,EAAA,GAAAnc,KAAAkc,EAAAzX,KAAA,YACdyL,QAAS,kBAAOnM,EAAAC,EAAAC,cAAC6M,GAAD,CAAS3C,SAAS,OAG9BkO,GAAUP,IAAS,CACvBC,OAAQ,kBAAMG,EAAAC,EAAA,GAAAnc,KAAAkc,EAAAzX,KAAA,YACdyL,QAAS,kBAAOnM,EAAAC,EAAAC,cAAC6M,GAAD,CAAS3C,SAAS,OAG9BmO,GAAeC,IAAOC,OAAVC,MAoCZC,GAAaH,IAAOI,KAAVC,MAmBVC,GAAcN,IAAOO,MAAVC,MA2DXC,GAAgBT,IAAOpJ,QAAV8J,MAabC,GAAeX,IAAOzV,IAAVqW,MA4CZC,eACJ,SAAAA,EAAara,GAAO,IAAAI,EAAA,OAAA3E,OAAAgQ,EAAA,EAAAhQ,CAAA4E,KAAAga,IAClBja,EAAA3E,OAAAiQ,EAAA,EAAAjQ,CAAA4E,KAAA5E,OAAAkQ,EAAA,EAAAlQ,CAAA4e,GAAAzO,KAAAvL,KAAML,KACD4E,MAAQ,CACX0V,gBAAgB,GAElBla,EAAKiM,cAAgBC,IAASlM,EAAKiM,cAAc3K,KAAnBjG,OAAA8Q,EAAA,EAAA9Q,QAAA8Q,EAAA,EAAA9Q,CAAA2E,KAA+B,KAL3CA,gFASlB4L,SAASC,gBAAgBe,UAAY,0CAIrC,IAAI5B,EAAU/K,KAAKuE,MAAM0V,eACrBtO,SAASC,gBAAgBC,cAAgBF,SAASC,gBAAgBe,WAAa5B,EACjFA,GAAU,EACDY,SAASC,gBAAgBC,aAAeF,SAASC,gBAAgBe,YAAc5B,IACxFA,GAAU,GAEZ/K,KAAK4M,SAAS,CACZqN,eAAgBlP,gDAKlBY,SAASoB,iBAAiB,SAAU/M,KAAKgM,eACzCgB,OAAOD,iBAAiB,eAAgB/M,KAAKL,MAAMua,gEAInDvO,SAASsB,oBAAoB,SAAUjN,KAAKgM,eAC5CgB,OAAOC,oBAAoB,eAAgBjN,KAAKL,MAAMua,kDAG9C,IAAAja,EAMJD,KAAKL,MAJPjF,EAFMuF,EAENvF,GACAmK,EAHM5E,EAGN4E,SACA+D,EAJM3I,EAIN2I,OACAuR,EALMla,EAKNka,cAEIC,EAAY1f,EAAE,SAAAuD,OAAYvD,GAAO,IACjC2f,EAAgBxV,GAAY,UAC5ByV,EAAc1R,GAAU,UAC9B,OACEjI,EAAAC,EAAAC,cAACiZ,GAAD,KACEnZ,EAAAC,EAAAC,cAACqY,GAAD,CAAcqB,KAAK,UACjB5Z,EAAAC,EAAAC,cAAA,OAAKS,UAAU,gBACbX,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAG,SAAQ1E,EAAAC,EAAAC,cAAA,sCACjBF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAG,SAAT,iBAEK,KAAP3K,EACGiG,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAG,mBAAT,iBACJ1E,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAG,QAAQ7D,QAAS2Y,GAA1B,iBAETxZ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CACEtB,GAAI+U,EACJ9Y,UAAW,iBACXX,EAAAC,EAAAC,cAAA,OAAKuD,IAAI,GACPC,IAAG,GAAApG,OAAK3E,EAAL,KAAA2E,OAAoBqc,WAQrC3Z,EAAAC,EAAAC,cAACyY,GAAD,CAAYiB,KAAK,QACf5Z,EAAAC,EAAAC,cAAA,OAAKS,UAAU,aACbX,EAAAC,EAAAC,cAAC4Y,GAAD,KACE9Y,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAI+U,GACRzZ,EAAAC,EAAAC,cAAA,WAAMwZ,GACN1Z,EAAAC,EAAAC,cAAA,OAAKuD,IAAI,GACPC,IAAG,GAAApG,OAAK3E,EAAL,KAAA2E,OAAoBqc,OAG7B3Z,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,iBAAR,6BACJ1E,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,YAAR,iBACJ1E,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8F,EAAA,EAAD,CAAMtB,GAAE,SAAR,qBAKZ1E,EAAAC,EAAAC,cAAC+Y,GAAD,KACEjZ,EAAAC,EAAAC,cAAC+F,EAAA,EAAD,KACEjG,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOI,OAAK,EAACH,KAAK,IAAIuO,OAAQ,kBAAO1U,EAAAC,EAAAC,cAACuE,EAAA,EAAD,CAAUC,GAAE,aACjD1E,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOC,KAAK,gBAAeC,UAAW0R,KACtC9X,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOC,KAAK,WAAWC,UAAWkS,KAClCtY,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOC,KAAK,QAAQC,UAAWiS,KAC/BrY,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOC,KAAK,kBAAkBC,UAAWN,KACzC9F,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOC,KAAK,gBAAgBC,UAAWO,KACvC3G,EAAAC,EAAAC,cAAC2Z,GAAD,CAAc1T,KAAK,iBAAiBqR,UAAWzd,EAAIqM,UAAWiH,KAC9DrN,EAAAC,EAAAC,cAAC2Z,GAAD,CAAc1T,KAAK,iBAAiBqR,UAAWzd,EAAIqM,UAAWqM,KAC9DzS,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOC,KAAK,QAAQC,UAAW4Q,KAC/BhX,EAAAC,EAAAC,cAACgG,EAAA,EAAD,CAAOwO,OAAQmD,SAKvB7X,EAAAC,EAAAC,cAAA,OACEuG,MAAO,CAAC8H,QAAO,GAAAjR,OAAK+B,KAAKuE,MAAM0V,eAAiB,QAAU,SAC1DzY,QAASxB,KAAKya,yBA7GH/Y,aA0HNgZ,eAAW/Y,YANF,SAAC4C,GAAD,OAAAnJ,OAAAiD,EAAA,EAAAjD,CAAA,GAAgBmJ,EAAM1G,KAAK4G,OACxB,SAACtI,GAAD,MAAe,CACxCge,cAAe,kBAAMhe,EhCwFY,SAACA,EAAUyB,GAE5C,OADAzB,EAAS,CAAEzC,KAAM,YACViD,YAAK,MAAOpD,EAAU,YAAYqD,KAAK,SAAA+d,GAAA,IAAErgB,EAAFqgB,EAAErgB,KAAF,OAAYsgB,QAAQC,IAAIvgB,EAAK2C,UAAU,SAAAwB,GAAG,OAAImc,QAAQC,IAAIpc,QgCzFxGyb,gBAAiB,kBAAM/d,EhC4Fa,CAAEzC,KAAM,kBgCzFpBiI,CAA6CqY,KC/TxDc,GAVH,SAAAvf,GAAA,IAAEwf,EAAFxf,EAAEwf,QAAF,OACVpa,EAAAC,EAAAC,cAACma,EAAA,EAAD,CAAiBD,QAASA,GACxBpa,EAAAC,EAAAC,cAACoa,GAAD,6CCPEC,GAAQ,CAAC,CACbze,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,mDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,kDACP+T,MAAS,IACT7C,OAAU,KACT,CACDlR,IAAO,k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","file":"static/js/main.415359ce.chunk.js","sourcesContent":["export const dev_api = 'http://localhost:3000/api'\r\nexport const dev_avatars = 'http://localhost:3000/avatars'\r\n\r\nexport const pro_api = 'https://www.chengcici.info/api'\r\nexport const pro_avatars = 'https://www.chengcici.info/avatars'","import ajax from '../util/ajax'\r\nimport { pro_api } from '../url'\r\nimport { push } from 'connected-react-router'\r\n\r\nconst baseUrl = pro_api\r\n\r\nconst firstQueryRequest = (lastFetch) => ({ type: 'FIRST_QUERY_REQUEST', payload: { lastFetch } })\r\n\r\nconst queryRequest = (direction) => ({ type: 'QUERY_REQUEST', payload: { direction } })\r\n\r\nconst queryRequestFailure = (error) => ({ type: 'QUERY_REQUEST_FAILURE', payload: { error } })\r\n\r\nconst timelineStateQueryUpdate = (payload) => ({ type: 'TIMELINESTATE_QUERY_UPDATED', payload })\r\n\r\nconst queryHomePostsSuccess = (payload) => ({ type: 'QUERY_HOME_POSTS_SUCCESS', payload })\r\n\r\nconst queryUserPostsSuccess = (user_id) => (payload) => ({ type: 'QUERY_USER_POSTS_SUCCESS', payload: { ...payload, user_id } })\r\n\r\nconst queryPostsWithEntitySuccess = (user_id, entity) => (payload) => ({ type: 'QUERY_POSTS_WITH_ENTITY_SUCCESS', payload: { ...payload, user_id , entity} })\r\n\r\nconst queryCommentsSuccess = (post_id) => (payload) => ({ type: 'QUERY_COMMENTS_SUCCESS', payload: { ...payload, post_id } })\r\n\r\nconst queryRequestSuccess = (res, fetchStatus, oldUnreadCount, direction, querySuccessFunc) => {\r\n  const data = res.data.filter(item => (!fetchStatus.hasOwnProperty(item.id)))\r\n  const ids = res.data.map(item => item.id)\r\n  const unreadCount = oldUnreadCount + ids.length\r\n  const lastFetch = direction === 'bottom' ? res.data[ids.length - 1].created_at : res.data[0].created_at\r\n  const method = direction === 'bottom' ? 'push' : 'unshift'\r\n  const action1 = querySuccessFunc({ method, ids, data })\r\n  const action2 = timelineStateQueryUpdate({ direction, unreadCount, lastFetch })\r\n  return [action1, action2]\r\n}\r\nconst publishRequest = () => ({ type: 'PUBLISH_REQUEST' })\r\n\r\nconst delRequest = () => ({ type: 'DELETE_REQUEST' })\r\n\r\nconst updateRequest = () => ({ type: 'UPDATE_REQUEST'})\r\n\r\nconst delRequestSuccess = (payload) => ({ type: 'DELETE_REQUEST_SUCCESS', payload})\r\n\r\nconst delRequestFailure = (payload) => ({ type: 'DELETE_REQUEST_FAILURE', payload})\r\n\r\nconst updateCommentRequestSuccess = (payload) => ({ type: 'UPDATE_COMMENT_REQUEST_SUCCESS', payload})\r\n\r\nconst updatePostRequestSuccess = (payload) => ({ type: 'UPDATE_POST_REQUEST_SUCCESS', payload})\r\n\r\nconst updateRequestFailure = (payload) => ({ type: 'UPDATE_REQUEST_FAILURE', payload})\r\n\r\nconst getFieldsValidate = (fields) => Object.values(fields).every(({required, validate}) => !required || validate)\r\n\r\nconst getFieldsValues = (fields) => Object.values(fields).reduce((res, {type, name, value}) => {\r\n  if (type === 'draft')\r\n    value = value.toRAW()\r\n  res[name] = value\r\n  return res\r\n}, {})\r\n\r\nconst appendForm = (fields) => Object.values(fields).reduce((form, {name, value}) => {\r\n  form.append(name, value)\r\n  return form\r\n}, new FormData())\r\n\r\nconst publishRequestFailure = (payload) => ({ type: 'PUBLISH_REQUEST_FAILURE', payload})\r\n\r\nconst timelineStatePublishUpdate = (payload) => ({ type: 'TIMELINE_STATE_PUBLISH_UPDATE', payload})\r\n\r\nconst publishPostSuccess = (payload) => ( {type: 'PUBLISH_POST_SUCCESS', payload})\r\n\r\nconst publishCommentSuccess = (payload) => ( {type: 'PUBLISH_COMMENT_SUCCESS', payload})\r\n\r\nconst dispatchAll = (dispatch, actions) => actions.forEach(action => dispatch(action))\r\n\r\nconst authenticationSuccess = (payload) => ({ type: 'AUTHENTICATION_SUCCESS', payload})\r\n\r\nconst authenticationFailure = (payload) => ({ type: 'AUTHENTICATION_FAILURE', payload})\r\n\r\nconst authentication = (dispatch, url, options) => {\r\n  dispatch({ type: 'AUTHENTICATION' })\r\n  return ajax('POST', url, options)\r\n    .then(response => {\r\n      dispatch(authenticationSuccess(response.data))\r\n      dispatch(initInputField('authentication'))\r\n    })\r\n    .catch(({ message }) => {\r\n      dispatch(authenticationFailure({message, inputField: 'authentication'}))\r\n      dispatch(initInputField('authentication'))\r\n    })\r\n}\r\n\r\nexport const initInputField = (inputField, message) => ({ type: 'INPUTFIELD_INIT', payload: {inputField , message} })\r\n\r\nexport const transmitValues = (inputField, entries) => ({ type: 'TRANSMIT_VALUES', payload: {inputField, entries}})\r\n\r\nexport const initLastFetch = (top, bottom) => ({type: 'INIT_LAST_FETCH', payload: {top, bottom}})\r\n\r\nexport const handleQueryNewPublish = (queryPosts, publishCount, cometSwitch) => () => {\r\n  return queryPosts('top', publishCount).finally(() => {\r\n    cometSwitch(true)\r\n  })\r\n}\r\n\r\nexport const handleQueryHomePosts = (direction, limit = 15 ) => (dispatch, getState) => {\r\n  const { blog } = getState()\r\n  let lastFetch\r\n  if (direction) {\r\n    lastFetch = blog.homeTimeline.lastFetch[direction]\r\n  } else {\r\n    direction = 'bottom'\r\n    lastFetch = Date.now()\r\n    dispatch(firstQueryRequest(lastFetch))\r\n  }\r\n  if (!lastFetch) return null\r\n  const url = baseUrl + `/home?d=${direction[0]}&l=${lastFetch}&n=${limit}` \r\n  const unreadCount = blog.homeTimeline.unreadCount\r\n  const fetchStatus = blog.entities.posts.fetchStatus\r\n  dispatch(queryRequest(direction))\r\n  return ajax('GET', url)\r\n    .then(res => {\r\n      if (res.data.length !== 0) {\r\n        dispatchAll(dispatch, queryRequestSuccess(res, fetchStatus, unreadCount, direction, queryHomePostsSuccess))\r\n      }\r\n    })\r\n    .catch(err => {\r\n      dispatch(queryRequestFailure(err))\r\n    })\r\n}\r\n\r\nexport const handleQueryUserPosts = (user_id, direction, withUserinfo = false, limit = 15) => (dispatch, getState) => {\r\n  const { blog } = getState()\r\n  let lastFetch\r\n  if (direction) {\r\n    lastFetch = blog.homeTimeline.lastFetch[direction]\r\n  } else {\r\n    direction = 'bottom'\r\n    lastFetch = Date.now()\r\n    dispatch(firstQueryRequest(lastFetch))\r\n  }\r\n  if (!lastFetch) return null\r\n  const url = baseUrl + `/user/${user_id}?d=${direction[0]}&l=${lastFetch}&w=${withUserinfo ? 't' : 'f'}&n=${limit}`\r\n  const unreadCount = blog.homeTimeline.unreadCount\r\n  const fetchStatus = blog.entities.posts.fetchStatus\r\n  dispatch(queryRequest(direction))\r\n  return ajax('GET', url)\r\n    .then(res => {\r\n      if (withUserinfo) {\r\n        dispatchAll(dispatch, queryRequestSuccess(res, fetchStatus, unreadCount, direction, queryPostsWithEntitySuccess(user_id, res.userinfo)))\r\n      } else if (res.data.length) {\r\n        dispatchAll(dispatch, queryRequestSuccess(res, fetchStatus, unreadCount, direction, queryUserPostsSuccess(user_id)))\r\n      }\r\n    }).catch(err => {\r\n      dispatch(queryRequestFailure(err))\r\n    })\r\n}\r\n\r\nexport const handleQueryComments = (post_id) => (dispatch, getState) => {\r\n  const { blog } = getState()\r\n  const url = baseUrl + `/post/${post_id}`\r\n  const unreadCount = blog.homeTimeline.unreadCount\r\n  const fetchStatus = blog.entities.comments.fetchStatus\r\n  dispatch(queryRequest('bottom'))\r\n  return ajax('GET', url)\r\n    .then(res => {\r\n      if (res.data.length) {\r\n        dispatchAll(dispatch, queryRequestSuccess(res, fetchStatus, unreadCount, 'bottom', queryCommentsSuccess(post_id))) \r\n      }\r\n    }).catch(err => {\r\n      dispatch(queryRequestFailure(err))\r\n    })\r\n}\r\n\r\nexport const handlePublishPost = () => (dispatch, getState) => {\r\n  const { blog, router } = getState()\r\n  const url = baseUrl + router.location.pathname\r\n  const { id: user_id, username: author, avatar } = blog.user\r\n  if (!getFieldsValidate(blog.postEditor.fields)) {\r\n    return dispatch(publishRequestFailure({message: '填写有误', inputField: 'postEditor'}))\r\n  }\r\n  const now = Date.now()\r\n  const body = {\r\n    user_id,\r\n    author,\r\n    avatar,\r\n    created_at: now,\r\n    updated_at: now,\r\n    ...getFieldsValues(blog.postEditor.fields)\r\n  }\r\n  const headers = { \"Content-Type\": \"application/json\" }\r\n  dispatch(publishRequest())\r\n  return ajax('POST', url, {body: JSON.stringify(body), headers})\r\n    .then(res => {\r\n      const { id } = res.data\r\n      const entity = { ...body, id }\r\n      dispatch(publishPostSuccess({user_id, id, entity}))\r\n      dispatch(timelineStatePublishUpdate({lastFetch: now, direction: 'top'}))\r\n      dispatch(initInputField('postEditor', true))\r\n    })\r\n    .catch(({ message }) => {\r\n      dispatch(publishRequestFailure({message, inputField: 'postEditor'}))\r\n      dispatch(initInputField('postEditor'))\r\n    })\r\n}\r\n\r\nexport const handlePublishComment = (post_id) => (dispatch, getState) => {\r\n  const { blog, router } = getState()\r\n  const url = baseUrl + router.location.pathname\r\n  const { id: user_id, username: author, avatar } = blog.user\r\n  if (!getFieldsValidate(blog.commentEditor.fields)) {\r\n    return dispatch(publishRequestFailure({message: '填写有误', inputField: 'commentEditor'}))\r\n  }\r\n  const now = Date.now()\r\n  const body = {\r\n    user_id,\r\n    post_id,\r\n    author,\r\n    avatar,\r\n    created_at: now,\r\n    updated_at: now,\r\n    ...getFieldsValues(blog.commentEditor.fields)\r\n  }\r\n  const headers = { \"Content-Type\": \"application/json\" }\r\n  dispatch(publishRequest())\r\n  return ajax('POST', url, {body: JSON.stringify(body), headers})\r\n    .then(res => {\r\n      const { id } = res.data\r\n      const entity = { ...body, id}\r\n        dispatch(publishCommentSuccess({post_id, id, entity})) \r\n        dispatch(timelineStatePublishUpdate({lastFetch: now, direction: 'bottom'}))\r\n        dispatch(initInputField('commentEditor', true))\r\n    })\r\n    .catch(({ message }) => {\r\n      dispatch(publishRequestFailure({message, inputField: 'commentEditor'}))\r\n      dispatch(initInputField('commentEditor'))\r\n    })\r\n}\r\n\r\nexport const handleDelComment = (post_id, id) => (dispatch, getState) => {\r\n  const { blog, router } = getState()\r\n  const user_id = blog.user.id\r\n  const url = baseUrl + router.location.pathname\r\n  const body = {\r\n    user_id,\r\n    id\r\n  } \r\n  const headers = { \"Content-Type\": \"application/json\" }\r\n  dispatch(delRequest()) \r\n  return ajax('DELETE', url, {body: JSON.stringify(body), headers})\r\n    .then(res => {\r\n      dispatch(delRequestSuccess({ post_id, id }))\r\n      dispatch(push(router.location.pathname))\r\n    })\r\n    .catch(({ message }) => {\r\n      dispatch(delRequestFailure({ message }))\r\n      dispatch(push('/home'))\r\n    })\r\n}\r\n\r\nexport const handleUpdateComment = (handleShutDown, post_id, id, rest) => (dispatch, getState) => {\r\n  const { blog, router } = getState()\r\n  const url = baseUrl + router.location.pathname\r\n  const now = Date.now()\r\n  if (!getFieldsValidate(blog.commentEditor.fields)) {\r\n    return dispatch(publishRequestFailure({message: '填写有误', inputField: 'commentEditor'}))\r\n  }\r\n  const body = {\r\n    id,\r\n    post_id,\r\n    updated_at: now,\r\n    ...rest,\r\n    ...getFieldsValues(blog.commentEditor.fields)\r\n  }  \r\n  const headers = { \"Content-Type\": \"application/json\" }\r\n  dispatch(updateRequest())\r\n  return ajax('PUT', url, {body: JSON.stringify(body), headers})\r\n    .then(res => {\r\n      dispatch(updateCommentRequestSuccess({id, entity: body}))\r\n      handleShutDown()\r\n    })\r\n    .catch(({ message }) => {\r\n      dispatch(updateRequestFailure({message, inputField: 'commentEditor'}))\r\n      dispatch(initInputField('commentEditor'))\r\n    })\r\n}\r\n\r\nexport const handleUpdatePost = (handleShutDown, self_id, id, rest) => (dispatch, getState) => {\r\n  const { blog } = getState()\r\n  const url = baseUrl + `/user/${self_id}`\r\n  const now = Date.now()\r\n  if (!getFieldsValidate(blog.postEditor.fields)) {\r\n    return dispatch(publishRequestFailure({message: '填写有误', inputField: 'postEditor'}))\r\n  }\r\n  const body = {\r\n    id,\r\n    updated_at: now,\r\n    ...rest,\r\n    ...getFieldsValues(blog.postEditor.fields)\r\n  }  \r\n  const headers = { \"Content-Type\": \"application/json\" }\r\n  dispatch(updateRequest())\r\n  return ajax('PUT', url, {body: JSON.stringify(body), headers})\r\n    .then(res => {\r\n      dispatch(updatePostRequestSuccess({id, entity: body}))\r\n      handleShutDown()\r\n    })\r\n    .catch(({ message }) => {\r\n      dispatch(updateRequestFailure({message, inputField: 'postEditor'}))\r\n      dispatch(initInputField('postEditor'))\r\n    })\r\n}\r\n\r\nexport const signup = () => (dispatch, getState) => {\r\n  const { blog, router } = getState()\r\n  const url = baseUrl + router.location.pathname\r\n  if (!getFieldsValidate(blog.authentication.fields)) {\r\n    return dispatch(authenticationFailure({message: '填写有误', inputField: 'authentication'}))\r\n  }\r\n  const body = appendForm(blog.authentication.fields)\r\n  return authentication(dispatch, url, { body })\r\n}\r\n\r\nexport const login = () => (dispatch, getState) => {\r\n  const { blog, router } = getState()\r\n  const url = baseUrl + router.location.pathname\r\n  if (!getFieldsValidate(blog.authentication.fields)) {\r\n    return dispatch(authenticationFailure({message: '填写有误', inputField: 'authentication'}))\r\n  }\r\n  const { username, password, captcha } = getFieldsValues(blog.authentication.fields)\r\n  const body = {username, password, captcha}\r\n  const headers = { \"Content-Type\": \"application/json\" }\r\n  return authentication(dispatch, url, {body: JSON.stringify(body), headers})\r\n}\r\n\r\nexport const handleInputChange = (inputField, field, { pattern, message}, event) => (dispatch, getState) => {\r\n  const value = event.target.value\r\n  let result = false\r\n  const regExp = pattern && new RegExp(pattern)\r\n  if ( regExp && regExp.test(value) ) {\r\n    message = ''\r\n    result = true\r\n  }\r\n  dispatch({\r\n    type: 'INPUTFIELD_CHANGE',\r\n    inputField,\r\n    field,\r\n    data: {\r\n      value,\r\n      error: message,\r\n      validate: result\r\n    }\r\n  })\r\n}\r\n\r\nexport const handleFileChange = (inputField, field, { pattern, message }, event) => (dispatch, getState) => {\r\n  const file = event.target.files[0]  \r\n  if (!file) {\r\n     return \r\n  }\r\n  let result = false\r\n  const regExp = pattern && new RegExp(pattern)\r\n\r\n  // 匹配类型为image/开头的字符串\r\n  if (regExp && regExp.test(file.type)) {\r\n    result = true\r\n    message = ''\r\n  }\r\n  dispatch({\r\n    type: 'INPUTFIELD_CHANGE',\r\n    inputField,\r\n    field,\r\n    data: {\r\n      value: file,\r\n      suffix: file.name,\r\n      validate: result,\r\n      error: message\r\n    }\r\n  })\r\n}\r\n\r\nexport const handleDraftChange = (inputField, field, editorValue) => (dispatch, getSate) => {\r\n  dispatch({\r\n    type: 'INPUTFIELD_CHANGE',\r\n    inputField,\r\n    field,\r\n    data: {\r\n      value: editorValue\r\n    }\r\n  })\r\n}\r\n\r\nexport const handleDraftBlur = (inputField, field, { pattern, minLength = 0, maxLength = Infinity, maxLine = Infinity, message }) => (dispatch, getState) => {\r\n  const { blog } = getState()\r\n  const { blocks } = blog[inputField].fields[field].value.toRAW(true)\r\n  let content = blocks.reduce((re, it) => {\r\n    if (it.type === 'unstyled')\r\n      re += it.text\r\n    return re\r\n  }, '')\r\n  let result = false\r\n  let textLength = content.length\r\n  let line = blocks.length\r\n  if (textLength > minLength && textLength <= maxLength && line <= maxLine) {\r\n    result = true\r\n    message = ''\r\n  }\r\n  dispatch({\r\n    type: 'INPUTFIELD_CHANGE',\r\n    inputField,\r\n    field,\r\n    data: {\r\n      validate: result,\r\n      error: message\r\n    }\r\n  })\r\n}\r\n\r\nexport const handleInitTimeline = () => ({ type: 'TIMELINESTATE_INIT'})\r\n\r\nexport const handleXHRAbort = () => ({ type: 'XHR_ABORT' })\r\n\r\nexport const handleSignout = () => (dispatch, getState) => {\r\n  dispatch({ type: 'SIGNOUT' })\r\n  return ajax('GET', baseUrl + '/signout').then(({data}) => console.log(data.message), err => console.log(err))\r\n} \r\n\r\nexport const handleSaveState = () => ({ type: 'SAVE_STATE'})","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport { connect } from 'react-redux'\r\nimport Button from '../stateless_component/Button'\r\nimport {\r\n  handleInputChange,\r\n  handleFileChange,\r\n  handleDraftChange,\r\n  handleDraftBlur\r\n} from '../../actions/blog'\r\n\r\nconst StyledForm = styled.form`\r\n  background-color: ${(props) => props.theme.bgc};\r\n  display: flow-root;\r\n  padding: .75rem .5rem;\r\n  border-radius: 1rem;\r\n\r\n    &::after {\r\n      content: '',\r\n      display: block;\r\n      height: 0;\r\n      visibility: hidden;\r\n      clear: both;\r\n    }\r\n\r\n    &>.submission {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: flex-end;\r\n      align-items: baseline;\r\n    }\r\n\r\n    &>.submission>span {\r\n      margin: 0 10px;\r\n      color: red;\r\n    }\r\n\r\n`\r\nclass Form extends Component {\r\n  render () {\r\n    const {\r\n      children,\r\n      fieldsName,\r\n      inputField,\r\n      btnTxt,\r\n      handleSubmit,\r\n      handleInputChange,\r\n      handleFileChange,\r\n      handleDraftChange,\r\n      handleDraftBlur\r\n    } = this.props\r\n    const validate = inputField && Object.values(inputField.fields).every(({validate, required}) => !required || validate)\r\n    const btnClassName= validate ? 'active' : 'disabled'\r\n    const message = !validate && inputField && inputField.message\r\n    return (\r\n      <StyledForm>\r\n        { React.Children.map(children, (child) => {\r\n          const { name } = {...child.props}\r\n          if (inputField === null) {\r\n            return React.cloneElement(child, {name})\r\n          }\r\n\r\n          const { validator } = inputField.fields[name]\r\n          let onChange\r\n          let onBlur\r\n          if (inputField.fields[name].type === 'file') {\r\n            onChange = handleFileChange.bind(this, fieldsName, name, validator)\r\n          } else if (inputField.fields[name].type === 'draft') {\r\n            onChange = handleDraftChange.bind(this, fieldsName, name)\r\n            onBlur = handleDraftBlur.bind(this, fieldsName, name, validator)\r\n          } else {\r\n            onChange = handleInputChange.bind(this, fieldsName, name, validator)\r\n          }\r\n          return React.cloneElement(child, {\r\n            name,\r\n            onChange,\r\n            onBlur,\r\n            ...inputField.fields[name]\r\n          })\r\n        })}\r\n        <div className={'submission'}>\r\n          <span>{message}</span>\r\n          <Button \r\n            className={btnClassName}\r\n            onClick={handleSubmit}\r\n            text={btnTxt}/>\r\n        </div>\r\n      </StyledForm>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  handleFileChange: (...args) => dispatch(handleFileChange(...args)),\r\n  handleInputChange: (...args) => dispatch(handleInputChange(...args)),\r\n  handleDraftChange: (...args) => dispatch(handleDraftChange(...args)),\r\n  handleDraftBlur: (...args) => dispatch(handleDraftBlur(...args)),\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(Form)\r\n\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport Input from '../stateless_component/Input'\r\n\r\nconst StyleFormInput = styled.div`\r\n  width: 100%;\r\n  background-color: transparent;\r\n  display: grid;\r\n  grid-template-columns: 1fr 5fr;\r\n\r\n    &>div:nth-of-type(1) {\r\n      text-align: right;\r\n      padding: 0 .5rem;\r\n    }\r\n    &>div:nth-of-type(1)>span {\r\n      color: red;\r\n    }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(1) {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: baseline;\r\n      max-height: 1.25rem;\r\n    }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>div {\r\n        text-align: center;\r\n        max-width: 15%;\r\n        padding: 0 .1rem;\r\n      }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>:nth-child(2) {\r\n        max-width: 75%;\r\n      }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(2),\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      min-height: 1.25rem;\r\n    }\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      color: red;\r\n    }\r\n`\r\n\r\nconst FormInput = (props) => {\r\n  const {\r\n    name,\r\n    required,\r\n    prefix,\r\n    suffix,\r\n    value,\r\n    onChange,\r\n    help,\r\n    error,\r\n    type,\r\n    requiredVisible\r\n  } = props\r\n  return (\r\n    <StyleFormInput>\r\n      <div>\r\n        <span>{requiredVisible && required && '*'}</span>\r\n        {name}:\r\n      </div>\r\n      <div>\r\n        <div>\r\n          <div>{prefix}</div>\r\n          <Input\r\n            name={name}\r\n            type={type}\r\n            value={value}\r\n            onChange={onChange}/>\r\n          <div>{suffix}</div>\r\n        </div>\r\n        <div>{help}</div>\r\n        <div>{error}</div>\r\n      </div>\r\n    </StyleFormInput>\r\n  )\r\n}\r\n\r\nFormInput.propTypes = {\r\n  requiredVisible: PropTypes.bool,\r\n  required: PropTypes.bool,\r\n  prefix: PropTypes.string,\r\n  suffix: PropTypes.string,\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  help: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n  error: PropTypes.string,\r\n  type: PropTypes.string,\r\n}\r\n\r\nexport default FormInput","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport Input from '../stateless_component/Input'\r\n\r\nconst StyledFormCaptcha = styled.div`\r\n  width: 100%;\r\n  background-color: transparent;\r\n  display: grid;\r\n  grid-template-columns: 1fr 5fr;\r\n\r\n    &>div:nth-of-type(1) {\r\n      text-align: right;\r\n      padding: 0 .5rem;\r\n      min-width: 20%;\r\n    }\r\n    &>div:nth-of-type(1)>span {\r\n      color: red;\r\n    }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(1) {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: flex-start;\r\n      max-height: 2.5rem;\r\n    }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>div {\r\n        text-align: center;\r\n        max-width: 25%;\r\n        min-height: 2.5rem;\r\n        max-height: 2.5rem;\r\n        padding: 0 2px;\r\n      }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>:nth-child(2) {\r\n        max-width: 50%;\r\n      }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(2),\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      min-height: 1.25rem;\r\n    }\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      color: red;\r\n    }\r\n`\r\n\r\nconst FormCaptcha = (props) => {\r\n  const {\r\n    name,\r\n    required,\r\n    prefix,\r\n    suffix,\r\n    onChange,\r\n    help,\r\n    error,\r\n    type,\r\n    value,\r\n    requiredVisible\r\n  } = props\r\n  return (\r\n    <StyledFormCaptcha>\r\n      <div>\r\n        <span>{requiredVisible && required && '*'}</span>\r\n        {name}:\r\n      </div>\r\n      <div>\r\n        <div>\r\n          <div>{prefix}</div>\r\n          <Input\r\n            name={name}\r\n            type={type}\r\n            value={value}\r\n            onChange={onChange}/>\r\n          <div><img alt='请刷新' src={suffix}/></div>\r\n        </div>\r\n        <div>{help}</div>\r\n        <div>{error}</div>\r\n      </div>\r\n    </StyledFormCaptcha>\r\n  )\r\n}\r\n\r\nFormCaptcha.propTypes = {\r\n  requiredVisible: PropTypes.bool,\r\n  required: PropTypes.bool,\r\n  prefix: PropTypes.string,\r\n  suffix: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  help: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n  error: PropTypes.string,\r\n  type: PropTypes.string,\r\n  validator: PropTypes.object\r\n}\r\n\r\nexport default FormCaptcha","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { \r\n  login\r\n} from '../../actions/blog'\r\nimport Form from '../form/Form'\r\nimport FormInput from '../form/FormInput'\r\nimport FormCaptcha from '../form/FormCaptcha'\r\n\r\nconst Login = (props) => {\r\n  if (props.self_id) {\r\n    return (<Redirect to={`/user/${props.self_id}`} />)\r\n  }\r\n  return (\r\n    <>\r\n      <Form\r\n        btnTxt={'登录'}\r\n        fieldsName={'authentication'}\r\n        inputField={props.inputField}\r\n        handleSubmit={props.login}>\r\n        <FormInput \r\n          requiredVisible={true}\r\n          name={'username'} />\r\n        <FormInput \r\n          requiredVisible={true}\r\n          name={'password'} />\r\n        <FormCaptcha\r\n          requiredVisible={true}\r\n          name={'captcha'} />\r\n      </Form>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  inputField: state.blog.authentication,\r\n  self_id: state.blog.user.id\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  login: () => dispatch(login())\r\n})\r\n\r\nconst ConnectedComponent = connect(mapStateToProps, mapDispatchToProps)(Login)\r\n\r\nexport default ConnectedComponent","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledFile = styled.div`\r\n    width: 100%;\r\n\r\n    &>label {\r\n      display: block;\r\n      box-sizing: border-box;\r\n      font-size: 1rem;\r\n      line-height: 1.25rem;\r\n      width: 100%;\r\n      max-height: 1.25rem;\r\n      border-radius: .5rem;\r\n      outline: none;\r\n      border: 1px solid ${(props) => props.theme.color};\r\n    }\r\n\r\n    &>input {\r\n      position: absolute;\r\n      clip: rect(0 0 0 0);\r\n      transform: scale(0);\r\n    }\r\n`\r\n\r\nconst File = (props) => {\r\n  return (\r\n    <StyledFile>\r\n      <label htmlFor={props.name}>上传{props.name}</label>\r\n      <input \r\n        type={props.type}\r\n        id={props.name}\r\n        name={props.name}\r\n        accept={props.accept}\r\n        onChange={props.onChange}/>\r\n    </StyledFile>\r\n  )\r\n}\r\n\r\nFile.propTypes = {\r\n  type: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  name: PropTypes.string.isRequired,\r\n  accept: PropTypes.string\r\n}\r\n\r\nexport default File","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport File from '../stateless_component/File'\r\n\r\nconst StyledFormFile = styled.div`\r\n  width: 100%;\r\n  background-color: transparent;\r\n  display: grid;\r\n  grid-template-columns: 1fr 5fr;\r\n\r\n    &>div:nth-of-type(1) {\r\n      text-align: right;\r\n      padding: 0 .5rem;\r\n      min-width: 20%;\r\n    }\r\n    &>div:nth-of-type(1)>span {\r\n      color: red;\r\n    }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(1) {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: baseline;\r\n      max-height: 1.25rem;\r\n    }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>div {\r\n        text-align: center;\r\n        max-width: 25%;\r\n        padding: 0 2px;\r\n        line-height: 1.25rem;\r\n      }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>:nth-child(2) {\r\n        max-width: 50%;\r\n      }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(2),\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      min-height: 1.25rem;\r\n    }\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      color: red;\r\n    }\r\n`\r\n\r\nconst FormFile = (props) => {\r\n  const {\r\n    name,\r\n    required,\r\n    prefix,\r\n    suffix,\r\n    onChange,\r\n    help,\r\n    error,\r\n    type,\r\n    accept,\r\n    requiredVisible\r\n  } = props\r\n  return (\r\n    <StyledFormFile>\r\n      <div>\r\n        <span>{requiredVisible && required && '*'}</span>\r\n        {name}:\r\n      </div>\r\n      <div>\r\n        <div>\r\n          <div>{prefix}</div>\r\n          <File\r\n            name={name}\r\n            type={type}\r\n            accept={accept}\r\n            onChange={onChange}/>\r\n          <div>{suffix}</div>\r\n        </div>\r\n        <div>{help}</div>\r\n        <div>{error}</div>\r\n      </div>\r\n    </StyledFormFile>\r\n  )\r\n}\r\n\r\nFormFile.propTypes = {\r\n  requiredVisible: PropTypes.bool,\r\n  required: PropTypes.bool,\r\n  prefix: PropTypes.string,\r\n  suffix: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  help: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n  error: PropTypes.string,\r\n  type: PropTypes.string,\r\n  validator: PropTypes.object,\r\n  accept: PropTypes.string\r\n}\r\n\r\nexport default FormFile","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { \r\n  signup\r\n} from '../../actions/blog'\r\nimport Form from '../form/Form'\r\nimport FormInput from '../form/FormInput'\r\nimport FormFile from '../form/FormFile'\r\nimport FormCaptcha from '../form/FormCaptcha'\r\n\r\nconst Signup = (props) => {\r\n  if (props.self_id) {\r\n    return (<Redirect to={`/user/${props.self_id}`}/>)\r\n  }\r\n  return (\r\n    <>\r\n      <Form\r\n        btnTxt={'注册'}\r\n        fieldsName={'authentication'}\r\n        inputField={props.inputField}\r\n        handleSubmit={props.signup}>\r\n        <FormInput\r\n          requiredVisible={true} \r\n          name={'username'}/>\r\n        <FormInput\r\n          requiredVisible={true} \r\n          name={'password'}/>\r\n        <FormFile\r\n          requiredVisible={true} \r\n          name={'avatar'}/>\r\n        <FormCaptcha\r\n          requiredVisible={true}\r\n          name={'captcha'} />\r\n      </Form>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  inputField: state.blog.authentication,\r\n  self_id: state.blog.user.id\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  signup: (event) => dispatch(signup())\r\n})\r\n\r\nconst ConnectedComponent = connect(mapStateToProps, mapDispatchToProps)(Signup)\r\n\r\nexport default ConnectedComponent","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Route,\r\n  Link,\r\n  Switch\r\n} from 'react-router-dom'\r\nimport Login from '../components/container_component/Login'\r\nimport Signup from '../components/container_component/Signup'\r\n\r\nconst StyledAuth = styled.div`\r\n  margin-top: 5rem;\r\n  background-color: ${(props) => props.theme.bgc};\r\n  border-radius: 1rem;\r\n\r\n    &>div:nth-of-type(1) {\r\n      padding: 0 10%;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: center;\r\n    }\r\n\r\n    &>div:nth-of-type(1)>a {\r\n      flex-grow: 1;\r\n      text-align: center;\r\n      box-sizing: border-box;\r\n      border-radius: 1rem;\r\n      color: white;\r\n      background-color: ${(props) => props.theme.color};\r\n    }\r\n\r\n    &>div:nth-of-type(1)>a:hover {\r\n      text-decoration: underline;\r\n    }\r\n    &>div:nth-of-type(1).signup>a:nth-of-type(1),\r\n    &>div:nth-of-type(1).login>a:nth-of-type(2) {\r\n      background-color: #eee;\r\n      color: black;\r\n    }\r\n    &>div:nth-of-type(1).signup>a:nth-of-type(2),\r\n    &>div:nth-of-type(1).login>a:nth-of-type(1) {\r\n      pointer-events: none;\r\n    }\r\n`\r\n\r\nconst StyledAuthForm = styled.div`\r\n  padding: 0 10%;\r\n  min-height: 20rem;\r\n`\r\n\r\nconst AuthenticationRoute = ({match, location}) => {\r\n  const className = location.pathname === '/authentication' ? 'login' : 'signup'\r\n  return (\r\n    <StyledAuth url={match.url}>\r\n      <div className={className}>\r\n        <Link to={`${match.url}`}>登录</Link>\r\n        <Link to={`${match.url}/signup`}>注册</Link>\r\n      </div>\r\n      <StyledAuthForm>\r\n        <Switch>\r\n          <Route \r\n            path={`${match.url}/signup`} \r\n            component={Signup}/>\r\n          <Route exact \r\n            path={`${match.url}`} \r\n            component={Login}/>\r\n        </Switch>\r\n      </StyledAuthForm>\r\n    </StyledAuth>\r\n  )\r\n}\r\n\r\nexport default AuthenticationRoute\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport style from 'styled-components'\r\n\r\nconst StyledAccessDenied = style.div`\r\n  text-align: center;\r\n  margin-top: 200px;\r\n  font-size: 1.5rem;\r\n  &>a {\r\n    font-weight: bold;\r\n    color: ${(props) => props.theme.color};\r\n    text-decoration: underline; \r\n  }\r\n`\r\n\r\nconst AccessDenied = (props) => (\r\n  <StyledAccessDenied>\r\n    <span>该页面无法访问，请  </span>\r\n      <Link to={`/authentication`}>登录/注册</Link>\r\n    <span>  ... ...</span>\r\n  </StyledAccessDenied>\r\n)\r\n\r\nexport default AccessDenied","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport 'braft-editor/dist/index.css'\r\nimport 'braft-extensions/dist/code-highlighter.css'\r\nimport BraftEditor from 'braft-editor'\r\nimport CodeHighlighter from 'braft-extensions/dist/code-highlighter'\r\nimport Markdown from 'braft-extensions/dist/markdown'\r\n\r\nBraftEditor.use(CodeHighlighter())\r\nBraftEditor.use(Markdown())\r\n\r\nconst StyleFormDraft = styled.div`\r\n  width: 100%;\r\n  background-color: transparent;\r\n  display: grid;\r\n  grid-template-columns: 1fr 5fr;\r\n\r\n    &>div:nth-of-type(1) {\r\n      text-align: right;\r\n      padding: 0 .5rem;\r\n    }\r\n    &>div:nth-of-type(1)>span {\r\n      color: red;\r\n    }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(1) {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: baseline;\r\n    }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>div {\r\n        text-align: center;\r\n        padding: 0 .1rem;\r\n      }\r\n      &>div:nth-of-type(2)>div:nth-of-type(1)>:nth-child(2) {\r\n        width: 90%;\r\n        background-color: #fff;\r\n        border: 1px solid;\r\n        border-radius: .5rem;\r\n      }\r\n\r\n    &>div:nth-of-type(2)>div:nth-of-type(2),\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      min-height: 1.25rem;\r\n    }\r\n    &>div:nth-of-type(2)>div:nth-of-type(3) {\r\n      color: red;\r\n    }\r\n    &>div:nth-of-type(2)>div:nth-of-type(3):focus {\r\n      visibility: hidden;\r\n    }\r\n`\r\n\r\nclass FormDraft extends Component {\r\n\r\n  render () {\r\n    const {\r\n      name,\r\n      required,\r\n      prefix,\r\n      suffix,\r\n      value,\r\n      onChange,\r\n      onBlur,\r\n      help,\r\n      error,\r\n      controls,\r\n      requiredVisible \r\n    } = this.props\r\n    const validateFn = (file) => file.size < 1024 * 50\r\n    const accepts = 'image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg'\r\n    return (\r\n      <StyleFormDraft>\r\n        <div>\r\n          <span>{requiredVisible && required && '*'}</span>\r\n          {name}:\r\n        </div>\r\n        <div>\r\n          <div>\r\n            <div>{prefix}</div>\r\n            <div className={'draft-editor'}>\r\n              <BraftEditor\r\n                value={value}\r\n                controls={controls}\r\n                onBlur={onBlur}\r\n                onChange={onChange}\r\n                media={{validateFn, accepts}}/>\r\n            </div>\r\n            <div>{suffix}</div>\r\n          </div>\r\n          <div>{help}</div>\r\n          <div>{error}</div>\r\n        </div>\r\n      </StyleFormDraft>\r\n    )\r\n  }\r\n}\r\n\r\nFormDraft.propTypes = {\r\n  requiredVisible: PropTypes.bool,\r\n  controls: PropTypes.array,\r\n  required: PropTypes.bool,\r\n  prefix: PropTypes.string,\r\n  suffix: PropTypes.string,\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  onBlur: PropTypes.func,\r\n  help: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n  error: PropTypes.string,\r\n}\r\n\r\nexport default FormDraft","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport Form from '../form/Form'\r\nimport FormDraft from '../form/FormDraft'\r\nimport FormInput from '../form/FormInput'\r\n\r\nconst StyledPostEditor = styled.div`\r\n  & div.draft-editor .bf-content {\r\n    min-height: 6rem;\r\n    height: fit-content;\r\n    overflow: visible;\r\n  }\r\n`\r\n\r\nconst PostEditor = (props) => {\r\n  return (\r\n    <StyledPostEditor>\r\n      <Form\r\n        btnTxt={'发布'}\r\n        fieldsName={'postEditor'}\r\n        inputField={props.inputField}\r\n        handleSubmit={props.handleSubmit}>\r\n        <FormInput \r\n          requiredVisible={false}\r\n          name={'title'}/>\r\n        <FormDraft\r\n          requiredVisible={false}\r\n          name={'content'}/>\r\n      </Form>\r\n    </StyledPostEditor>\r\n  )\r\n}\r\n\r\nPostEditor.propTypes = {\r\n  handleSubmit: PropTypes.func,\r\n  inputField: PropTypes.object\r\n}\r\n\r\nexport default PostEditor\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { pro_avatars } from '../../url'\r\n\r\nconst StyledUser = styled.div`\r\n  position: relative;\r\n  &>a {\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n\r\n  &>a>.name {\r\n    font-weight: bold;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  &>a:hover>.name {\r\n    color: ${(props) => props.theme.color};\r\n    text-decoration: underline;\r\n  }\r\n\r\n  &>a>.id {\r\n    color: #666;\r\n  }\r\n\r\n  &>a>img {\r\n    width: 80px;\r\n    height: 80px;\r\n    position: absolute;\r\n    top: 0;\r\n    left: -90px;\r\n    background-color: transparent;\r\n    border-radius: 50%;\r\n  }\r\n`\r\n\r\nconst User = (props) => (\r\n  <StyledUser>\r\n    <Link to={ `/user/${props.user_id}` }>\r\n      <p className='name'>\r\n        { props.username }\r\n      </p>\r\n      <p className='id'>\r\n        @{props.user_id.slice(-6)}\r\n      </p>\r\n      <img alt='' src={`${pro_avatars}/${props.avatar}`} />\r\n    </Link>\r\n  </StyledUser>\r\n)\r\n\r\nUser.propTypes = {\r\n  avatar: PropTypes.string.isRequired,\r\n  user_id: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default User","const getRelativeTimestamp = (timestamp) => {\r\n  let relativeTime = Math.floor(( Date.now() - timestamp ) / 1000)\r\n  const sec = relativeTime % 60\r\n  relativeTime /= 60\r\n  if (relativeTime < 1) return `${Math.floor(sec)}秒`\r\n  const min = relativeTime % 60\r\n  relativeTime /= 60\r\n  if (relativeTime < 1) return `${Math.floor(min)}分钟`\r\n  const hour = relativeTime % 24\r\n  relativeTime /= 24\r\n  if (relativeTime < 1) return `${Math.floor(hour)}小时`\r\n  if (relativeTime < 30) return `${Math.floor(relativeTime)}天`\r\n  if (relativeTime < 365) return `约${Math.floor(relativeTime / 30)}个月`\r\n  return `约${Math.floor(relativeTime / 365)}年`\r\n}\r\n\r\nexport default getRelativeTimestamp","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport getRelativeTimestamp from '../../util/getRelativeTimestamp'\r\n\r\nconst StyledTimestamp = styled.div`\r\n  display: flex;\r\n  flex-direction: row-reverse;\r\n\r\n    &>* {\r\n      margin: 0 .5rem;\r\n    }\r\n`\r\n\r\nconst Timestamp = (props) => (\r\n  <StyledTimestamp>\r\n    <span>{ `发布日期：${new Date(props.created_at).toLocaleString().slice(0, -3)}` }</span>\r\n    <span>{ props.created_at !== props.updated_at && `更新于：${getRelativeTimestamp(props.updated_at)}前` }</span>\r\n  </StyledTimestamp>\r\n)\r\n\r\nTimestamp.propTypes = {\r\n  created_at: PropTypes.number.isRequired,\r\n  updated_at: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default Timestamp","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport BraftEditor from 'braft-editor'\r\nimport { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport User from '../stateless_component/User'\r\nimport Timestamp from '../stateless_component/Timestamp'\r\n\r\nconst StyledPostDigest = styled.div`\r\n  position: relative;\r\n  padding: .75rem .75rem 14px 0;\r\n  padding-left: 5rem;\r\n  border-bottom: 1px solid #ccc;\r\n  &:hover {\r\n    background-color: #eee;\r\n  }\r\n\r\n    &>div:nth-of-type(2)>P{\r\n      font-size: 1.5rem;\r\n      line-height: 2.5rem;\r\n      font-weight: bold;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n    }\r\n    &>div:nth-of-type(2)>a {\r\n      min-height: 6rem;\r\n      max-height: 6rem;\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n    }\r\n    &>div:nth-of-type(2)>a>img {\r\n      width: 9.5rem;\r\n      height: 6rem;\r\n      object-fit: cover;\r\n      margin-right: 1rem;\r\n    }\r\n    &>div:nth-of-type(2)>a>p {\r\n      flex-grow: 1;\r\n      word-break: break-all;\r\n      overflow: hidden;\r\n    }\r\n`\r\n\r\nconst PostDigest = (props) => {\r\n  const { blocks, entityMap } = BraftEditor.createEditorState(props.content).toRAW(true)\r\n  let content = blocks.reduce((re, it) => {\r\n    if (it.type === 'unstyled')\r\n      re += it.text\r\n    return re\r\n  }, '')\r\n  const values = Object.values(entityMap)\r\n  const src = values.length > 0 && values[0].data.url\r\n  const img = src && (<img src={src} alt=''/>)\r\n  const len = src ? 100: 150\r\n  content = content.length > len ? content.slice(0, len) + '...' : content\r\n  return (\r\n    <StyledPostDigest>\r\n      <User\r\n        avatar={props.avatar}\r\n        user_id={props.user_id}\r\n        username={props.author}/>\r\n      <div>\r\n        <p>{props.title}</p>\r\n        <Link to={ `/post/${props.post_id}` }>\r\n          { img }\r\n          <p>{ content }</p>\r\n        </Link>\r\n      </div>\r\n      <Timestamp\r\n        created_at={props.created_at}\r\n        updated_at={props.updated_at}/>\r\n    </StyledPostDigest>\r\n  )\r\n}\r\n\r\nPostDigest.propTypes = { \r\n  post_id: PropTypes.string.isRequired,\r\n  author: PropTypes.string.isRequired,\r\n  user_id: PropTypes.string.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  content: PropTypes.string.isRequired,\r\n  created_at: PropTypes.number.isRequired,\r\n  updated_at: PropTypes.number.isRequired\r\n}\r\n\r\nexport default PostDigest ","import React, { Component } from 'react'\r\nimport styled, { keyframes } from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst rotate = keyframes`\r\n  from {\r\n    transform: rotate(0)\r\n  }\r\n  to {\r\n    transform: rotate(360deg)\r\n  }\r\n`\r\n\r\nconst StyledLoading = styled.div`\r\n  height: 2.5rem;\r\n  position: relative;\r\n  background-color: transparent;\r\n  border-bottom: 1px solid #ccc;\r\n    &>div{\r\n      background-color: transparent;\r\n      width: 1px;\r\n      height: 1px;\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      animation: ${rotate} 5s steps(10) infinite;\r\n    }\r\n      &>div>i {\r\n        border-radius: 50%;\r\n        display: block;\r\n        width: .5rem;\r\n        height: 1rem;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        transform-origin: 0 0;\r\n      }\r\n      &>div>i:nth-of-type(1) {\r\n        background-color: #4169e144;\r\n      }\r\n      &>div>i:nth-of-type(2) {\r\n        background-color: #4169e177;\r\n        transform: \r\n          rotate(72deg)\r\n      }\r\n      &>div>i:nth-of-type(3) {\r\n        background-color: #4169e1aa;\r\n        transform: \r\n          rotate(144deg)\r\n      }\r\n      &>div>i:nth-of-type(4) {\r\n        background-color: #4169e1cc;\r\n        transform: \r\n          rotate(216deg)\r\n      }\r\n      &>div>i:nth-of-type(5) {\r\n        background-color: #4169e1ff;\r\n        transform: \r\n          rotate(288deg)\r\n      }\r\n`\r\n\r\nclass Loading extends Component {\r\n\r\n  shouldComponentUpdate (nextprops, nextState) {\r\n    if (nextprops.visible !== this.props.visible) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  render () {\r\n    if (!this.props.visible) return null\r\n    return (\r\n      <StyledLoading>\r\n        <div>\r\n          <i></i>\r\n          <i></i>\r\n          <i></i>\r\n          <i></i>\r\n          <i></i>\r\n        </div>\r\n      </StyledLoading>\r\n    )\r\n  }\r\n}\r\n\r\nLoading.propTypes = {\r\n  visible: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default Loading","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PostDigest from '../stateless_component/PostDigest'\r\nimport withVirtualScroll from '../container_component/withVirtualScroll'\r\nconst PostsList = (props) => {\r\n    const list = props.timeline.map((post_id, index) => {\r\n      if (!props.posts.entities[post_id]) return null\r\n      const {\r\n        author,\r\n        user_id,\r\n        avatar,\r\n        title,\r\n        content,\r\n        created_at,\r\n        updated_at\r\n      } = props.posts.entities[post_id]\r\n      return (\r\n        <li\r\n          key={post_id}\r\n          className={`post-${post_id}`}>\r\n          <PostDigest\r\n            avatar={avatar}\r\n            post_id={post_id}\r\n            author={author}\r\n            user_id={user_id} \r\n            title={title} \r\n            content={content} \r\n            created_at={created_at}\r\n            updated_at={updated_at}/>\r\n        </li>\r\n      )\r\n    })\r\n  return (\r\n    <ul>\r\n      { list }\r\n    </ul>\r\n  ) \r\n}\r\n\r\nPostsList.propTypes = {\r\n  timeline: PropTypes.array.isRequired,\r\n  posts: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default withVirtualScroll(PostsList)","import React, { Component } from 'react'\r\nimport throttle from 'lodash.throttle'\r\nimport Loading from '../stateless_component/Loading'\r\n\r\nconst withVirtualScroll = (WrappedList) => {\r\n  return class extends Component {\r\n    constructor (props) {\r\n      super(props)\r\n      this.state = {\r\n        start: 0,\r\n        end: Math.ceil(document.documentElement.clientHeight / this.props.itemHeight) + 5,\r\n        screenHeight: document.documentElement.clientHeight,\r\n      }\r\n      this._handleScroll = throttle(this._handleScroll.bind(this), 167)\r\n      this._handleResize = this._handleResize.bind(this)\r\n      this._handleQueryRequest = throttle(this.props.handleQueryRequest, 5000, {leading: true})\r\n    }\r\n\r\n    _handleScroll () {\r\n      const scrollTop = document.documentElement.scrollTop\r\n      this.setState((state) => {\r\n        let start = Math.floor(scrollTop / this.props.itemHeight) - 5\r\n        let end = start + Math.ceil(state.screenHeight / this.props.itemHeight) + 10        \r\n        if (start < 0) {\r\n          start = 0\r\n        } \r\n        if (end > this.props.timeline.length) {\r\n          !this.props.loading && this._handleQueryRequest('bottom')\r\n          end = this.props.timeline.length\r\n        }\r\n        return {\r\n          start,\r\n          end\r\n        }\r\n     })\r\n    }\r\n\r\n    _handleResize () {\r\n      this.setState({\r\n        screenHeight: document.documentElement.clientHeight\r\n      })\r\n      this._handleScroll()\r\n    }\r\n\r\n    componentDidMount () {\r\n      document.addEventListener('scroll', this._handleScroll)\r\n      window.addEventListener('resize', this._handleResize)\r\n    }\r\n\r\n    componentWillUnmount () {\r\n      document.removeEventListener('scroll', this._handleScroll)\r\n      window.removeEventListener('resize', this._handleResize)\r\n    }\r\n\r\n    render () {\r\n      const {\r\n        timeline,\r\n        itemHeight,\r\n        isLoadingDirection,\r\n        loading,\r\n        posts\r\n      } = this.props\r\n      const loadingTop = isLoadingDirection === 'top' && loading\r\n      const loadingBottom = isLoadingDirection === 'bottom' && loading\r\n      const paddingTopOffset = loadingBottom ? '2.5' : '0'\r\n      const paddingBottomOffset = loadingTop ? '2.5' : '0'\r\n      const currentTimeline = timeline.slice(this.state.start, this.state.end)\r\n      const paddingTop = this.state.start * itemHeight\r\n      const paddingBottom = (timeline.length - this.state.end) * itemHeight\r\n      \r\n      return (\r\n        <>\r\n          <Loading visible={loadingTop}/>\r\n          <div style={{height: `calc(${paddingTop}px - ${paddingTopOffset}rem)`}}>\r\n          </div>\r\n          <WrappedList\r\n            timeline={currentTimeline}\r\n            posts={posts}/>\r\n          <div style={{height: `calc(${paddingBottom}px - ${paddingBottomOffset}rem)`}}>\r\n          </div>\r\n          <Loading visible={loadingBottom}/>\r\n        </>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default withVirtualScroll","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PostEditor from './PostEditor'\r\nimport PostsList from '../stateless_component/PostsList'\r\nimport Loading from '../stateless_component/Loading'\r\nimport { \r\n  handleQueryUserPosts,\r\n  handlePublishPost,\r\n  initLastFetch\r\n } from '../../actions/blog'\r\n\r\nclass Blog extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.user_id = this.props.match.params.user_id\r\n    this.self_id = this.props.self_id\r\n    this._handleQueryRequest = this.props.handleQueryUserPosts.bind(this, this.user_id)\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (this.user_id === this.self_id && this.props.usersEntities[this.user_id].timeline.length === 0) {\r\n      this._handleQueryRequest()\r\n    } else if (!this.props.usersEntities.hasOwnProperty(this.user_id)) {\r\n      this._handleQueryRequest(null, true)\r\n    } else {\r\n      const timeline = this.props.usersEntities[this.user_id].timeline\r\n      const top = timeline[0]\r\n      const bottom = timeline[timeline.length - 1]\r\n      const posts = this.props.posts\r\n      this.props.initLastFetch(posts.entities[top].created_at, posts.entities[bottom].created_at)\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate (nextProps, nextState) {\r\n    if (!nextProps.usersEntities.hasOwnProperty(this.user_id)) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      homeTimeline,\r\n      inputField,\r\n      handlePublishPost,\r\n      usersEntities,\r\n      posts\r\n    } = this.props\r\n    const {\r\n      loading,\r\n      isLoadingDirection\r\n    } = homeTimeline\r\n    const timeline = usersEntities[this.user_id] && usersEntities[this.user_id].timeline\r\n    const ITEM_HEIGHT = 250\r\n    if (!timeline) return (<><Loading/></>)\r\n    return (\r\n      <div className='blog'>\r\n        { this.user_id === this.self_id \r\n          && <PostEditor\r\n              inputField={inputField}\r\n              handleSubmit={handlePublishPost}/> }\r\n        <PostsList\r\n          isLoadingDirection={isLoadingDirection}\r\n          loading={loading}\r\n          itemHeight={ITEM_HEIGHT}\r\n          handleQueryRequest={this._handleQueryRequest}\r\n          timeline={timeline}\r\n          posts={posts}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({ \r\n  self_id: state.blog.user.id,\r\n  usersEntities: state.blog.entities.users.entities,\r\n  posts: state.blog.entities.posts,\r\n  inputField: state.blog.postEditor,\r\n  homeTimeline: state.blog.homeTimeline,\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  handleQueryUserPosts: (...args) => dispatch(handleQueryUserPosts(...args)),\r\n  handlePublishPost: () => dispatch(handlePublishPost()),\r\n  initLastFetch: (...args) => dispatch(initLastFetch(...args))\r\n})\r\nconst ConnectedComponent = connect(mapStateToProps, mapDispatchToProps)(Blog)\r\n\r\nexport default ConnectedComponent","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport BraftEditor from 'braft-editor'\r\nimport 'braft-editor/dist/index.css'\r\nimport 'braft-extensions/dist/code-highlighter.css'\r\nimport CodeHighlighter from 'braft-extensions/dist/code-highlighter'\r\n\r\nBraftEditor.use(CodeHighlighter())\r\n\r\nconst PostContent = (props) => (\r\n  <>\r\n    <BraftEditor\r\n      readOnly={true} \r\n      value={BraftEditor.createEditorState(props.content)}/>\r\n  </>\r\n)\r\n\r\nPostContent.propTypes = {\r\n  content: PropTypes.object.isRequired\r\n}\r\n\r\nexport default PostContent","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledDropdown = styled.label`\r\n  position: relative;\r\n  background-image: ${props => props.bgi };\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  display: ${props => props.display};\r\n  &::before {\r\n    content: '>';\r\n    display: block;\r\n    transform: rotate(90deg);\r\n    color: #999;\r\n    text-align: center;\r\n    line-height: 1.25rem;\r\n  }\r\n  &:hover::before {\r\n    color: ${props => props.theme.color};\r\n  }\r\n  &>ul {\r\n    visibility: hidden;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n    cursor: grab;\r\n    position: absolute; \r\n    top: 100%;\r\n    right: 0;\r\n    background-color: #fff;\r\n    border-radius: 4px;\r\n    padding: 10px 0;\r\n    z-index: 0;\r\n    box-shadow: 0 1px 4px rgba(0,0,0,0.25);\r\n    transition: \r\n      visibility .5s ease-in-out 1s,\r\n      opacity .5s ease-in-out 1s;\r\n  }\r\n  &:hover>ul,\r\n  &>ul:hover {\r\n    visibility: visible;\r\n    opacity: 1;\r\n    z-index: 900;\r\n    pointer-events: all;\r\n    transition: \r\n      visibility .5s ease-in-out,\r\n      opacity .5s ease-in-out;\r\n  }\r\n  &>ul>li {\r\n    white-space: nowrap;\r\n    padding: .2rem;\r\n  }\r\n  &>ul>li:hover {\r\n    background-color: #ccc;\r\n  }\r\n  &>ul>li:disabled {\r\n    text-decoration: overline;\r\n    color: orange;\r\n  }\r\n`\r\n\r\nconst Dropdown = (props) => {\r\n  return (\r\n    <StyledDropdown\r\n      bgi={props.bgi}\r\n      display={props.display}>       \r\n      <ul>\r\n        { props.children }\r\n      </ul>\r\n    </StyledDropdown>\r\n  )\r\n}\r\n\r\nDropdown.propTypes = {\r\n  bgi: PropTypes.string,\r\n}\r\n\r\nexport default Dropdown","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport User from '../stateless_component/User'\r\nimport BraftEditor from 'braft-editor'\r\nimport Timestamp from '../stateless_component/Timestamp'\r\nimport Dropdown from '../stateless_component/Dropdown'\r\n\r\nconst StyledComment = styled.div`\r\n  padding: 0.6rem .75rem;\r\n  position: relative;\r\n  padding-left: 5rem;\r\n  border-bottom: 1px solid #ccc;\r\n  &:hover {\r\n    background-color: #eee;\r\n  }\r\n\r\n    &>div:nth-of-type(1) {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      margin-bottom: .25rem;\r\n    }\r\n\r\n    &>p {\r\n      min-height: 6rem;\r\n      max-height: 6rem;\r\n      word-wrap: break-word;\r\n      overflow: hidden;\r\n    }  \r\n`\r\n\r\nconst Comment = (props) => {\r\n  const display = props.user_id === props.self_id ? 'flow-root' : 'none'\r\n  return (\r\n    <StyledComment>\r\n      <div>\r\n        <User \r\n          avatar={props.avatar}\r\n          user_id={props.user_id} \r\n          username={props.author}/>\r\n        <Dropdown display={display}>\r\n          <li onClick={props.handleStartUp}>编辑</li>\r\n          <li onClick={props.handleDelComment}>删除</li>\r\n        </Dropdown>\r\n      </div>\r\n      <p \r\n        className=\"content\"\r\n        dangerouslySetInnerHTML={{__html: BraftEditor.createEditorState(props.content).toHTML()}}></p>\r\n      <Timestamp \r\n        created_at={props.created_at}\r\n        updated_at={props.updated_at}\r\n        />\r\n    </StyledComment>\r\n  )\r\n}\r\n\r\nComment.propTypes = {\r\n  avatar: PropTypes.string.isRequired,\r\n  id: PropTypes.string.isRequired,\r\n  user_id: PropTypes.string.isRequired,\r\n  self_id: PropTypes.string.isRequired,\r\n  author: PropTypes.string.isRequired,\r\n  content: PropTypes.string.isRequired,\r\n  created_at: PropTypes.number.isRequired,\r\n  updated_at: PropTypes.number.isRequired,\r\n  handleDelComment: PropTypes.func.isRequired,\r\n  handleStartUp: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Comment ","const getRest = (collection, section) => Object.entries(collection).reduce((result, [key, val]) => {\r\n    if (!section.hasOwnProperty(key)) result[key] = val\r\n    return result\r\n  }, {})\r\n\r\nexport default getRest \r\n","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport getRest from '../../util/getRest'\r\n\r\nconst withPaginationController = (ListComponent) => {\r\n  const StyledWrapper = styled.div`\r\n    width: 100%;\r\n    margin: 0 auto; \r\n    position: relative;  \r\n\r\n      &>div {\r\n        position: relative;\r\n        margin: 5px auto;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n      }\r\n\r\n        &>div>div {\r\n          min-width: 282px;\r\n        }\r\n\r\n        &>div button {\r\n          border: none;\r\n        }\r\n\r\n        &>div label {\r\n          border: 1px solid;\r\n          border-radius: 5px;\r\n        }\r\n\r\n        &>div button,\r\n        &>div>div>* {\r\n          background-color: transparent;\r\n          cursor: grab;\r\n          height: 25px;\r\n          text-align: center;\r\n        }\r\n\r\n        &>div label.${({current}) => 'page-' + current} {\r\n          background-color: ${(props) => props.theme.color};\r\n          font-weight: bolder;\r\n          border: 1px solid ${(props) => props.theme.color};\r\n          color: #fff;\r\n        }\r\n\r\n        &>div>div>*{\r\n          width: 25px;\r\n          display: inline-block;\r\n          margin: 0 10px;\r\n        }\r\n        \r\n          &>div input {\r\n            position: absolute;\r\n            left: -200px;\r\n            visibility: hidden;\r\n            height: 0;\r\n            width: 0;\r\n            pointer-events: none;\r\n          }\r\n\r\n      &>ul {\r\n        display: flex;\r\n        width: ${ ({width}) => Math.floor(width) }px;\r\n        margin: 0 auto;\r\n        flex-direction: column;\r\n        overflow: hidden;\r\n      }\r\n\r\n        &>ul>li {\r\n          width: ${ ({width}) => Math.floor(width) }px;\r\n        }\r\n  `\r\n  return class extends Component {\r\n    constructor (props) {\r\n      super(props)\r\n      this.randomName = 'radio-' + Date.now().toString(16).padEnd(20, '#').split('')\r\n        .map(hex => hex !== '#' ? hex : (Math.floor(Math.random() * 100) % 16).toString(16)).join('')\r\n      this.state = {\r\n        current: this.props.defaultCurrent || 1,\r\n        hideOnSinglePage: this.props.hideOnSinglePage || false,\r\n        pageSize: this.props.defaultPageSize || 10,\r\n        pageSizeOptions: this.props.pageSizeOptions || ['10', '20', '30', '40'],\r\n        showQuickJumper: this.props.showQuickJumper || false,\r\n      }\r\n      this._handleChange = this._handleChange.bind(this)\r\n    }\r\n\r\n    _handleChange (event) {\r\n      const target = event.target\r\n      const value = target.type === 'radio' ? \r\n        Number.parseInt(target.value) :\r\n        this.state.current + Number.parseInt(target.attributes['data-changed'].value)\r\n      this.setState({\r\n        current: value\r\n      })\r\n    }\r\n\r\n    render () {\r\n      const rest = getRest(this.props, this.state)\r\n      const labels = new Array(Math.ceil(this.props.total/this.state.pageSize))\r\n        .fill(0)\r\n        .map((_, index, array) => {\r\n          const length = array.length\r\n          if (length <= 5 \r\n            || index === 0 \r\n            || index === length-1  \r\n            || (index >= this.state.current - 3 && index <= this.state.current + 1)) {\r\n            return (\r\n              <label \r\n                key={index}\r\n                className={`page-${index+1}`}>\r\n                <input\r\n                  type='radio'\r\n                  value={index+1}\r\n                  checked={index === this.state.current-1}\r\n                  name={`${this.randomName}`}\r\n                  onChange={this._handleChange}/>\r\n                  {index+1}\r\n              </label>\r\n            )\r\n          } else if (index === this.state.current - 4 || index === this.state.current + 2) {\r\n            return (<span key={index}>...</span>)\r\n          } else {\r\n            return null\r\n          }\r\n        })\r\n      return ( \r\n        <StyledWrapper\r\n          ref={(el) => this.wrapper = el} \r\n          className='paginationController'\r\n          current={this.state.current}\r\n          pageSize={this.state.pageSize}\r\n          width={this.wrapper && this.wrapper.offsetWidth}>\r\n          <ListComponent  \r\n            current={this.state.current}\r\n            pageSize={this.state.pageSize}\r\n            {...rest}/>\r\n          <div>\r\n            <button\r\n              data-changed={'-1'}\r\n              disabled={this.state.current === 1} \r\n              onClick={this._handleChange}>\r\n              上一页\r\n            </button>\r\n              <div>{labels}</div>\r\n            <button\r\n              data-changed={'1'}\r\n              disabled={this.state.current === Math.ceil(this.props.total/this.state.pageSize)} \r\n              onClick={this._handleChange}>\r\n              下一页\r\n            </button>\r\n          </div>\r\n        </StyledWrapper>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default withPaginationController","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Comment from '../stateless_component/Comment'\r\nimport withPaginationController from '../container_component/withPaginationController'\r\n\r\nconst CommentsList = (props) => (\r\n  <ul>\r\n    { props.timeline.map((comment_id, idx) => {\r\n      if (!props.comments.entities[comment_id]\r\n        || Math.floor(idx / props.pageSize) !== props.current - 1) {\r\n          return null\r\n      }\r\n      const {\r\n        user_id,\r\n        author,\r\n        avatar,\r\n        content,\r\n        created_at,\r\n        updated_at\r\n      } = props.comments.entities[comment_id]\r\n      const _handleDelComment = props.handleDelComment.bind(null, comment_id)\r\n      const _handleStartUp = props.handleStartUp.bind(null, \r\n        { content }, \r\n        comment_id, \r\n        { user_id, author, avatar, created_at})\r\n      return  (\r\n        <li\r\n          key={comment_id}\r\n          className={`comment-${idx}`}>\r\n          <Comment \r\n            id={comment_id}\r\n            avatar={avatar}\r\n            user_id={user_id}\r\n            self_id={props.self_id}\r\n            author={author}\r\n            content={content}\r\n            created_at={created_at}\r\n            updated_at={updated_at}\r\n            handleDelComment={_handleDelComment}\r\n            handleStartUp={_handleStartUp}/>\r\n        </li>\r\n      )\r\n    })}\r\n  </ul>\r\n)\r\n\r\nCommentsList.propTypes = {\r\n  timeline: PropTypes.array.isRequired,\r\n  comments: PropTypes.object.isRequired,\r\n  self_id: PropTypes.string.isRequired,\r\n  current: PropTypes.number.isRequired,\r\n  pageSize: PropTypes.number.isRequired,\r\n  handleDelComment: PropTypes.func.isRequired,\r\n  handleStartUp: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default withPaginationController(CommentsList)","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport Form from '../form/Form'\r\nimport FormDraft from '../form/FormDraft'\r\n\r\nconst StyledCommentEditor = styled.div`\r\n\r\n  & div.draft-editor .bf-content {\r\n    min-height: 4rem;\r\n    height: fit-content;\r\n    overflow: visible;\r\n  }\r\n`\r\n\r\nconst CommentEditor = (props) => {\r\n  return (\r\n    <StyledCommentEditor>\r\n      <Form\r\n        btnTxt={'发布'}\r\n        fieldsName={'commentEditor'}\r\n        inputField={props.inputField}\r\n        handleSubmit={props.handleSubmit}>\r\n        <FormDraft\r\n          requiredVisible={false}\r\n          name={'content'}/>\r\n      </Form>\r\n    </StyledCommentEditor>\r\n  )\r\n}\r\n\r\nCommentEditor.propTypes = {\r\n  handleSubmit: PropTypes.func,\r\n  inputField: PropTypes.object\r\n}\r\n\r\nexport default CommentEditor","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n  handleQueryComments,\r\n  handlePublishComment,\r\n  handleDelComment,\r\n  handleUpdateComment,\r\n  handleUpdatePost,\r\n  initInputField,\r\n  transmitValues\r\n} from '../../actions/blog'\r\nimport PostContent from './PostContent'\r\nimport CommentsList from '../stateless_component/CommentsList'\r\nimport User from '../stateless_component/User'\r\nimport Dropdown from '../stateless_component/Dropdown'\r\nimport Timestamp from '../stateless_component/Timestamp'\r\nimport Outerlayer from './Outerlayer'\r\nimport CommentEditor from './CommentEditor'\r\nimport PostEditor from './PostEditor'\r\n\r\nconst StyledPost = styled.div`\r\n    &>.post-container {\r\n      padding: 1rem .75rem;\r\n    }\r\n      &>.post-container>div:nth-of-type(1) {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-direction: row;\r\n      }\r\n\r\n      &>.post-container>div:nth-of-type(1)>h2 {\r\n        word-wrap: break-word;\r\n        font-weight: bold;\r\n      }\r\n\r\n      &>.post-container>.user {\r\n        margin: 1rem 5rem;\r\n        min-height: 5rem;\r\n        max-height: 5rem;\r\n      }\r\n\r\n      &>.post-container .bf-controlbar {\r\n        display: none;\r\n        pointer-events: none;\r\n        height: 0;\r\n        opacity: 0;\r\n      }\r\n`\r\n\r\nclass Post extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      currentUpdateEditor: '',\r\n      handleUpdate: null\r\n    }\r\n\r\n    const initInputField = this.props.initInputField\r\n    const transmitValues = this.props.transmitValues\r\n    this.commentEditorLayer = null\r\n    this.setCommentEditorLayerRef = el => this.commentEditorLayer = el\r\n    this.post_id = this.props.match.params.post_id\r\n    this._handlePublishComment = this.props.handlePublishComment.bind(null, this.post_id)\r\n    this._handleDelComment = this.props.handleDelComment.bind(null, this.post_id)\r\n    this._handleCloseCommentEditor = this._handleShutDown.bind(this, initInputField, 'commentEditor')\r\n    const _handleUpdateComment = this.props.handleUpdateComment.bind(this, this._handleCloseCommentEditor, this.post_id)\r\n    this._handleOpenCommentEditor = this._handleStartUp.bind(this, transmitValues, 'commentEditor', _handleUpdateComment)\r\n\r\n    this.postEditorLayer = null\r\n    this.setPostEditorLayerRef = el => this.postEditorLayer = el\r\n    this._handleClosePostEditor = this._handleShutDown.bind(this, initInputField, 'postEditor')\r\n    const _handleUpdatePost = this.props.handleUpdatePost.bind(this, this._handleClosePostEditor, this.props.self_id)\r\n    this._handleOpenPostEditor = this._handleStartUp.bind(this, transmitValues, 'postEditor', _handleUpdatePost)\r\n  }\r\n\r\n  _handleShutDown (initInputField, inputField, event) {\r\n    if (!event \r\n      || event.target === this.commentEditorLayer \r\n      || event.target === this.postEditorLayer) { \r\n      initInputField(inputField, true)\r\n      this.setState({\r\n        currentUpdateEditor: '',\r\n        handleUpdate: null,\r\n      })\r\n    }\r\n  }\r\n\r\n  _handleStartUp (transmitValues, inputField, handleUpdate, entries, id, created_at) {\r\n    transmitValues(inputField, entries)\r\n    this.setState({\r\n      currentUpdateEditor: inputField,\r\n      handleUpdate: handleUpdate.bind(this, id, created_at)\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (!this.props.postsEntities[this.post_id] \r\n      || this.props.postsEntities[this.post_id].timeline.length === 0) {\r\n      this.props.handleQueryRequest(this.post_id)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      title,\r\n      content,\r\n      avatar,\r\n      author,\r\n      user_id,\r\n      created_at,\r\n      updated_at,\r\n      timeline\r\n    } = this.props.postsEntities[this.post_id]\r\n    const handleOpenPostEditor = this._handleOpenPostEditor.bind(null, \r\n      { title, content }, \r\n      this.post_id, \r\n      {user_id, author, avatar, created_at})\r\n    const display = user_id === this.props.self_id ? 'flow-root' : 'none'\r\n    const updateCommentEditorFields = this.state.currentUpdateEditor === 'commentEditor' ? this.props.commentEditor : null\r\n    const UpdatePostEditorFields = this.state.currentUpdateEditor === 'postEditor' ? this.props.postEditor : null\r\n    const commentEditorFields = this.state.currentUpdateEditor === '' ? this.props.commentEditor : null\r\n    return (\r\n      <>\r\n        <StyledPost>\r\n          <div className=\"post-container\">\r\n            <div>\r\n              <h2>{title}</h2>              \r\n              <Dropdown display={display}>\r\n                <li onClick={handleOpenPostEditor}>编辑</li>\r\n              </Dropdown>\r\n            </div>\r\n            <div className=\"user\">\r\n              <User avatar={avatar} user_id={user_id} username={author}/>\r\n            </div>\r\n            <PostContent content={content}/>\r\n            <div className=\"timeStamp\">\r\n              <Timestamp created_at={created_at} updated_at={updated_at}/>\r\n            </div>\r\n          </div>\r\n          <CommentEditor\r\n            inputField={commentEditorFields}\r\n            handleSubmit={this._handlePublishComment}/>\r\n          <CommentsList\r\n            total={timeline.length}\r\n            self_id={this.props.self_id}\r\n            timeline={timeline}\r\n            comments={this.props.comments}\r\n            handleStartUp={this._handleOpenCommentEditor}\r\n            handleDelComment={this._handleDelComment}/>\r\n        </StyledPost>\r\n        <Outerlayer\r\n          outerlayer={this.setCommentEditorLayerRef}\r\n          alive={this.state.currentUpdateEditor==='commentEditor'}\r\n          handleShutDown={this._handleCloseCommentEditor}\r\n          inputField={updateCommentEditorFields}\r\n          handleSubmit={this.state.handleUpdate}\r\n          render={rest => (<CommentEditor {...rest}/>)}/>\r\n        <Outerlayer\r\n          outerlayer={this.setPostEditorLayerRef}\r\n          alive={this.state.currentUpdateEditor==='postEditor'}\r\n          handleShutDown={this._handleClosePostEditor}\r\n          inputField = {UpdatePostEditorFields}\r\n          handleSubmit={this.state.handleUpdate}\r\n          render={rest => (<PostEditor {...rest}/>)}/>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  postsEntities: state.blog.entities.posts.entities,\r\n  comments: state.blog.entities.comments,\r\n  commentEditor: state.blog.commentEditor,\r\n  postEditor: state.blog.postEditor,\r\n  self_id: state.blog.user.id\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  handleQueryRequest: (...args) => dispatch(handleQueryComments(...args)),\r\n  handleUpdateComment: (...args) => dispatch(handleUpdateComment(...args)),\r\n  handleUpdatePost: (...args) => dispatch(handleUpdatePost(...args)),\r\n  handlePublishComment: (...args) => dispatch(handlePublishComment(...args)),\r\n  handleDelComment: (...args) => dispatch(handleDelComment(...args)),\r\n  initInputField: (...args) => dispatch(initInputField(...args)),\r\n  transmitValues: (...args) => dispatch(transmitValues(...args)),\r\n})\r\nconst ConnectedComponent = connect(mapStateToProps, mapDispatchToProps)(Post)\r\n\r\nexport default ConnectedComponent","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport { connect } from 'react-redux'\r\nimport { pro_api } from '../../url'\r\n\r\nconst StyledComet = styled.div`\r\n  width: 100%;\r\n  height: 1.25rem;\r\n  line-height: 1.25rem\r\n  text-align: center;\r\n  background-color: ${props => props.theme.bgc};\r\n  &>div {\r\n    margin: 0 auto;\r\n    color: ${props => props.theme.color};\r\n  }\r\n  &>div:hover {\r\n    text-decoration: underline;\r\n    cursor: grab;\r\n  }\r\n`\r\n\r\nclass Comet extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      publishCount: 0,\r\n      xhr: null,\r\n      turnon: true,\r\n    }\r\n    this.baseUrl = pro_api\r\n    this._handleQueryNewPublish = this._handleQueryNewPublish.bind(this, this.props.handleQueryNewPublish)\r\n  }\r\n\r\n  _fetchPublishCount = (timeout = '&t=45000') => {\r\n    const xhr = new XMLHttpRequest()\r\n    const lastFetch = this.props.homeTimeline.lastFetch.top || Date.now()\r\n    const url = this.baseUrl + `/comet?l=${lastFetch}&n=20` + timeout\r\n    xhr.open('GET', url)\r\n    xhr.timeout = 60e3\r\n    xhr.send(null)\r\n\r\n    xhr.onload = this._onload\r\n    xhr.onerror = this._fetchAbort\r\n    xhr.ontimeout = this._fetchAbort\r\n    this.setState({\r\n      xhr\r\n    })\r\n  }\r\n\r\n  _onload = () => {    \r\n    this.setState((state) => {\r\n      let count = state.publishCount\r\n      if (this.state.xhr.status < 400) {\r\n        count = JSON.parse(state.xhr.responseText).data.publishCount\r\n      }\r\n      return {\r\n        xhr: null,\r\n        publishCount: count\r\n      }\r\n    })\r\n  }\r\n\r\n  _fetchAbort = () => {\r\n    this.setState((state) => {\r\n      if (state.xhr && state.xhr.readyState !==0)\r\n        state.xhr.abort()\r\n      return {\r\n        xhr: null\r\n      }\r\n    })\r\n  }\r\n\r\n  _initPublishCount = () => {\r\n    this.setState({\r\n      publishCount: 0\r\n    })\r\n  }\r\n\r\n  _cometSwitch = (turnon) => {\r\n    this.setState({\r\n      turnon\r\n    })\r\n  }\r\n\r\n  _handleQueryNewPublish (queryNewPublish) {\r\n    this._fetchAbort()\r\n    this._initPublishCount()\r\n    this._cometSwitch(false)\r\n    queryNewPublish(this.state.publishCount, this._cometSwitch)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this._fetchPublishCount('&t=5000')\r\n  }\r\n\r\n  componentDidUpdate () {\r\n    const { xhr, turnon, publishCount} = this.state\r\n    if (xhr === null && turnon === true && publishCount < 20) {\r\n      this._fetchPublishCount()\r\n    }\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    this._fetchAbort()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <StyledComet>\r\n        { this.state.publishCount === 0 \r\n          ? (<div>没有新的推送</div>)\r\n          : (<div onClick={this._handleQueryNewPublish}>有{`${this.state.publishCount}`}条新的推送</div>)}\r\n      </StyledComet>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  homeTimeline: state.blog.homeTimeline\r\n})\r\n\r\nexport default connect(mapStateToProps)(Comet)","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport PostsList from '../stateless_component/PostsList'\r\nimport Comet from './Comet'\r\nimport { \r\n  handleQueryHomePosts,\r\n  handleQueryNewPublish,\r\n  initLastFetch\r\n} from '../../actions/blog'\r\n\r\nclass Home extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this._handleQueryNewPublish = this.props.handleQueryNewPublish.bind(null, this.props.handleQueryHomePosts)\r\n  }\r\n\r\n  componentDidMount () {\r\n    const timeline = this.props.homeTimeline.timeline\r\n    if (timeline.length === 0) {\r\n      this.props.handleQueryHomePosts()\r\n    } else {\r\n      const posts = this.props.posts\r\n      const top = timeline[0]\r\n      const bottom = timeline[timeline.length-1]\r\n      this.props.initLastFetch(posts.entities[top].created_at, posts.entities[bottom].created_at)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      timeline,\r\n      loading,\r\n      isLoadingDirection\r\n    } = this.props.homeTimeline\r\n    return (\r\n      <div className='Home'>\r\n        <Comet\r\n          handleQueryNewPublish={this._handleQueryNewPublish}/>\r\n        <PostsList\r\n          isLoadingDirection={isLoadingDirection}\r\n          loading={loading}\r\n          handleQueryRequest={this.props.handleQueryHomePosts}\r\n          itemHeight={250}\r\n          timeline={timeline}\r\n          posts={this.props.posts}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n} \r\n\r\nconst mapStateToProps = (state) => ({ \r\n  homeTimeline: state.blog.homeTimeline,\r\n  posts: state.blog.entities.posts,\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  handleQueryHomePosts: (...args) => dispatch(handleQueryHomePosts(...args)),\r\n  handleQueryNewPublish: (...args) => dispatch(handleQueryNewPublish(...args)),\r\n  initLastFetch: (...args) => dispatch(initLastFetch(...args))\r\n})\r\n\r\nconst ConnectedComponent = connect(mapStateToProps, mapDispatchToProps)(Home)\r\n\r\nexport default ConnectedComponent","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\n\r\nconst PrivateRoute = ({ component: Component, condition, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      condition ? (\r\n        <Component {...props} />\r\n      ): (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/accessdenied\",\r\n            state: { from: props.location }\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n)\r\n\r\nexport default PrivateRoute","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport style from 'styled-components'\r\n\r\nconst StyledNotFound = style.div`\r\n  text-align: center;\r\n  margin-top: 200px;\r\n  font-size: 1.5rem;\r\n  &>a {\r\n    font-weight: bold;\r\n    color: ${(props) => props.theme.color};\r\n    text-decoration: underline; \r\n  }\r\n`\r\n\r\nconst NotFound = (props) => (\r\n  <StyledNotFound>\r\n    <span>404, not found... ... </span>\r\n    <Link to={`/home`}>返回首页</Link>\r\n  </StyledNotFound>\r\n)\r\n\r\nexport default NotFound","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n  Route,\r\n  Link,\r\n  Switch,\r\n  withRouter,\r\n  Redirect\r\n} from 'react-router-dom'\r\nimport { pro_avatars} from '../url'\r\nimport Loadable from 'react-loadable'\r\nimport throttle from 'lodash.throttle'\r\nimport AuthenticationRoute from './AuthenticationRoute'\r\nimport AccessDenied from './AccessDenied'\r\nimport Blog from '../components/container_component/Blog'\r\nimport Post from '../components/container_component/Post'\r\nimport Home from '../components/container_component/Home'\r\nimport PrivateRoute from './PrivateRoute'\r\nimport Loading from '../components/stateless_component/Loading'\r\nimport { \r\n  handleSignout,\r\n  handleSaveState\r\n } from '../actions/blog'\r\nimport Styled from 'styled-components'\r\nimport NotFound from './NotFound'\r\n\r\nconst PixelPainter = Loadable({\r\n  loader: () => import('../components/container_component/PixelPainter'),\r\n  loading: () => (<Loading visible={true}/>),\r\n})\r\n\r\nconst Cube  = Loadable({\r\n  loader: () => import('../components/container_component/Cube'),\r\n  loading: () => (<Loading visible={true}/>),\r\n})\r\n\r\nconst Masonry = Loadable({\r\n  loader: () => import('../components/container_component/Masonry'),\r\n  loading: () => (<Loading visible={true}/>),\r\n})\r\n\r\nconst StyledHeader = Styled.header`\r\n  border-bottom: .1rem solid #ccc;\r\n  margin-bottom: .4rem;\r\n  background-color: #fff;\r\n  &>.header-inner {\r\n    min-height: 2.5rem;\r\n    max-height: 2.5rem;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    padding: .5rem 1.5rem;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    align-items: baseline;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  &>.header-inner>a>h1 {\r\n    font-size: 1.5rem;\r\n    line-height: 1.75rem;\r\n  }\r\n\r\n  &>.header-inner>nav>ul {\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n  }\r\n  &>.header-inner>nav>ul>li {\r\n    margin: 0 .5rem;\r\n  }\r\n\r\n  &>.header-inner>nav>ul>li:nth-of-type(3)>a>img {\r\n    width: 1.25rem;\r\n    height: 1.25rem;\r\n    border-radius: 50%;\r\n  }\r\n`\r\n\r\nconst StyledMain = Styled.main`\r\n  display: relative;\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n    &>.container {\r\n      display: flex;\r\n      align-items: flex-start;\r\n      padding: 0 .8rem;\r\n    }\r\n\r\n  @media (max-width: 1000px) {\r\n    width: 920px;\r\n      &>.container {\r\n        flex-direction: column;\r\n      }\r\n  }\r\n\r\n`\r\n\r\nconst StyledAside = Styled.aside`\r\n  background-color: #fff;\r\n  min-width: 7.5rem;\r\n  max-width: 7.5rem;\r\n\r\n  &>div:nth-of-type(1) {\r\n    min-height: 6.25rem;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    border-bottom: 1px solid #ccc;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-end;\r\n  }\r\n\r\n  &>div:nth-of-type(1)>a {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  &>div:nth-of-type(1)>a>img {\r\n    width: 4rem;\r\n    height: 4rem;\r\n    background-color: transparent;\r\n    margin: .25rem auto;\r\n    border-radius: 50%;\r\n  }\r\n\r\n  &>div:nth-of-type(2) {\r\n    text-align: right;\r\n    padding: .5rem .25rem;\r\n  }\r\n\r\n  &>div:nth-of-type(2) li {\r\n    margin: .5rem 0 ;\r\n  }\r\n\r\n  @media (max-width: 1000px) {\r\n    border-bottom: 1px solid #ccc;\r\n    max-width: 100%;\r\n    min-width: 100%;\r\n    &>div:nth-of-type(1) {\r\n      display: none;\r\n    }\r\n    &>div:nth-of-type(2) {\r\n      flex-direction: row;\r\n      text-align: right;\r\n    }\r\n    &>div:nth-of-type(2) ul {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: center;\r\n    }\r\n    &>div:nth-of-type(2) ul>li {\r\n      margin: 0 2rem;\r\n    }\r\n  }\r\n`\r\n\r\nconst StyledSection = Styled.section`\r\n  flex: 1 1;\r\n  background-color: #fff;\r\n  position: relative;\r\n  flex-shrink: 0;\r\n  margin-left: .5rem;\r\n  margin-bottom: 0;\r\n  width: 100%;\r\n  min-height: calc(100vh - 3rem);\r\n  @media (max-width: 1000px) {\r\n    margin-left: 0;\r\n  }\r\n`\r\nconst StyledRoutes = Styled.div`\r\n  position: relative;\r\n  &>div {\r\n      display: block;\r\n      border: 3px solid rgba(66,66,66,0.5);\r\n      background-color: transparent;\r\n      width: 2.5rem;\r\n      height: 2.5rem;\r\n      box-sizing: border-box;\r\n      border-radius: 50%;\r\n      position: fixed;\r\n      top: 4rem;\r\n      right: 1rem;\r\n      outline: none;\r\n      user-select: none;\r\n    }\r\n      &>div::before {\r\n        content: '';\r\n        display: block;\r\n        height: 1rem;\r\n        width: 0;\r\n        background-color: transparent;\r\n        border-top: 1rem solid  transparent;\r\n        border-left: .6rem solid transparent;\r\n        border-right: .6rem solid transparent;\r\n        border-bottom: 1rem solid  rgba(66,66,66,0.5);\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -100%);\r\n      }\r\n      &>div::after {\r\n        content: '';\r\n        display: block;\r\n        width: .4rem;\r\n        height: 1rem;\r\n        background-color: rgba(66,66,66,0.5);\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n      }\r\n`\r\n\r\nclass Routes extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      visibleBackTop: false\r\n    }\r\n    this._handleScroll = throttle(this._handleScroll.bind(this), 167)\r\n  }\r\n\r\n  _handleBackTop () {\r\n    document.documentElement.scrollTop = 0\r\n  }\r\n\r\n  _handleScroll () {\r\n    let visible = this.state.visibleBackTop\r\n    if (document.documentElement.clientHeight >= document.documentElement.scrollTop && visible) {\r\n      visible = false\r\n    } else if (document.documentElement.clientHeight < document.documentElement.scrollTop && !visible) {\r\n      visible = true\r\n    }\r\n    this.setState({\r\n      visibleBackTop: visible\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    document.addEventListener('scroll', this._handleScroll)\r\n    window.addEventListener('beforeunload', this.props.handleSaveState)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    document.removeEventListener('scroll', this._handleScroll)\r\n    window.removeEventListener('beforeunload', this.props.handleSaveState)\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      id,\r\n      username, \r\n      avatar,\r\n      handleSignout\r\n    } = this.props\r\n    const asideLink = id ? `/user/${id}` : '/'\r\n    const asideUsername = username || 'Unknown'\r\n    const asideAvatar = avatar || 'unknown'\r\n    return (\r\n      <StyledRoutes>\r\n        <StyledHeader role='banner'>\r\n          <div className='header-inner'>\r\n            <Link to='/home'><h1>Cheng的小站</h1></Link>\r\n            <nav>\r\n              <ul>\r\n                <li><Link to='/home'>首页</Link></li>\r\n                { \r\n                  id === '' ?\r\n                    (<li><Link to='/authentication'>登录</Link></li>) :\r\n                    (<li><Link to='/home' onClick={handleSignout}>登出</Link></li>)\r\n                }\r\n                <li>\r\n                  <Link \r\n                    to={asideLink}\r\n                    className={'dropdown-menu'}>\r\n                    <img alt='' \r\n                      src={`${pro_avatars}/${asideAvatar}`}/>\r\n                  </Link>\r\n                </li>\t\r\n              </ul>\r\n            </nav>\r\n\r\n          </div>\r\n        </StyledHeader>\r\n        <StyledMain role='main'>\r\n          <div className='container'>\r\n            <StyledAside>\r\n              <div>\r\n                <Link to={asideLink}>\r\n                  <div>{asideUsername}</div>\r\n                  <img alt='' \r\n                    src={`${pro_avatars}/${asideAvatar}`}/>\r\n                </Link>\r\n              </div>\r\n              <div>\r\n                <nav>\r\n                  <ul>\r\n                    <li><Link to={`/pixelpainter`}>像素画板</Link></li>\r\n                    <li><Link to={`/masonry`}>相册</Link></li>\r\n                    <li><Link to={`/cube`}>魔方</Link></li>\r\n                  </ul>\r\n                </nav>\r\n              </div>\r\n            </StyledAside>\r\n            <StyledSection>\r\n              <Switch>\r\n                <Route exact path='/' render={() => (<Redirect to={`/home`} />)}/>\r\n                <Route path='/pixelpainter'component={PixelPainter}/>\r\n                <Route path='/masonry' component={Masonry}/>\r\n                <Route path='/cube' component={Cube}/>\r\n                <Route path='/authentication' component={AuthenticationRoute}/>\r\n                <Route path='/accessdenied' component={AccessDenied}/>\r\n                <PrivateRoute path='/user/:user_id' condition={id} component={Blog}/>\r\n                <PrivateRoute path='/post/:post_id' condition={id} component={Post}/>\r\n                <Route path='/home' component={Home}/>\r\n                <Route render={NotFound}/>\r\n              </Switch>\r\n            </StyledSection>\r\n          </div>\r\n        </StyledMain>\r\n        <div\r\n          style={{display: `${this.state.visibleBackTop ? 'block' : 'none'}`}} \r\n          onClick={this._handleBackTop}>\r\n        </div>\r\n      </StyledRoutes>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({...state.blog.user})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  handleSignout: () => dispatch(handleSignout()),\r\n  handleSaveState: () => dispatch(handleSaveState())\r\n})\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Routes))","import React from 'react'\r\nimport PropTypes from \"prop-types\";\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\nimport Routes from './routes'\r\n\r\nconst App = ({history}) => (\r\n  <ConnectedRouter history={history}>\r\n    <Routes/>\r\n  </ConnectedRouter>\r\n)\r\n\r\nApp.propTypes = {\r\n  history: PropTypes.object\r\n}\r\n\r\nexport default App\r\n","const cache = [{\r\n  \"url\": \"//p3.pstatp.com/weili/l/189510595871244394.webp\",\r\n  \"width\": 572,\r\n  \"height\": 429\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189471047812382941.webp\",\r\n  \"width\": 687,\r\n  \"height\": 429\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/197699706935312399.webp\",\r\n  \"width\": 561,\r\n  \"height\": 429\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/199469482569367578.webp\",\r\n  \"width\": 788,\r\n  \"height\": 344\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189482498195194400.webp\",\r\n  \"width\": 516,\r\n  \"height\": 344\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/197714524572483585.webp\",\r\n  \"width\": 517,\r\n  \"height\": 344\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189537800194097631.webp\",\r\n  \"width\": 461,\r\n  \"height\": 615\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/198355711650168848.webp\",\r\n  \"width\": 950,\r\n  \"height\": 615\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/200729832132444169.webp\",\r\n  \"width\": 409,\r\n  \"height\": 615\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189476992047120459.webp\",\r\n  \"width\": 546,\r\n  \"height\": 409\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189489516171755872.webp\",\r\n  \"width\": 612,\r\n  \"height\": 409\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189532783672295532.webp\",\r\n  \"width\": 662,\r\n  \"height\": 409\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/200676926725292040.webp\",\r\n  \"width\": 576,\r\n  \"height\": 576\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189469956890689895.webp\",\r\n  \"width\": 860,\r\n  \"height\": 576\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/197571914478387227.webp\",\r\n  \"width\": 384,\r\n  \"height\": 576\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189473057857077569.webp\",\r\n  \"width\": 963,\r\n  \"height\": 302\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/200721001679683634.webp\",\r\n  \"width\": 403,\r\n  \"height\": 302\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/197737545597190225.webp\",\r\n  \"width\": 455,\r\n  \"height\": 302\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/197805345950924870.webp\",\r\n  \"width\": 655,\r\n  \"height\": 436\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189501499130511797.webp\",\r\n  \"width\": 583,\r\n  \"height\": 436\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189504067520954563.webp\",\r\n  \"width\": 583,\r\n  \"height\": 436\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189518661819826535.webp\",\r\n  \"width\": 560,\r\n  \"height\": 420\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/197709559590289455.webp\",\r\n  \"width\": 631,\r\n  \"height\": 420\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/197632190049419276.webp\",\r\n  \"width\": 630,\r\n  \"height\": 420\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189481475992977445.webp\",\r\n  \"width\": 713,\r\n  \"height\": 401\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/198359697379819520.webp\",\r\n  \"width\": 535,\r\n  \"height\": 401\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/198338660630003791.webp\",\r\n  \"width\": 573,\r\n  \"height\": 401\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/200255581843619840.webp\",\r\n  \"width\": 632,\r\n  \"height\": 418\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/199085641342124089.webp\",\r\n  \"width\": 630,\r\n  \"height\": 418\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/198502066955747502.webp\",\r\n  \"width\": 559,\r\n  \"height\": 418\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189479225430114995.webp\",\r\n  \"width\": 620,\r\n  \"height\": 413\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/198578903920672826.webp\",\r\n  \"width\": 578,\r\n  \"height\": 413\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189487360098173271.webp\",\r\n  \"width\": 622,\r\n  \"height\": 413\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189489919898681548.webp\",\r\n  \"width\": 415,\r\n  \"height\": 311\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/200407314448252932.webp\",\r\n  \"width\": 415,\r\n  \"height\": 311\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189473092216815738.webp\",\r\n  \"width\": 990,\r\n  \"height\": 311\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/200036985188122632.webp\",\r\n  \"width\": 364,\r\n  \"height\": 485\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189484534009692595.webp\",\r\n  \"width\": 728,\r\n  \"height\": 485\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/197961218904031240.webp\",\r\n  \"width\": 729,\r\n  \"height\": 485\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/200749649111547933.webp\",\r\n  \"width\": 466,\r\n  \"height\": 625\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/200339788972425228.webp\",\r\n  \"width\": 938,\r\n  \"height\": 625\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/185735293848259534.webp\",\r\n  \"width\": 416,\r\n  \"height\": 625\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189492660087816938.webp\",\r\n  \"width\": 649,\r\n  \"height\": 406\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189518971057471657.webp\",\r\n  \"width\": 562,\r\n  \"height\": 406\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/199916708923965454.webp\",\r\n  \"width\": 610,\r\n  \"height\": 406\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/200885404437839888.webp\",\r\n  \"width\": 477,\r\n  \"height\": 476\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189466572456460337.webp\",\r\n  \"width\": 636,\r\n  \"height\": 476\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189496379529494767.webp\",\r\n  \"width\": 846,\r\n  \"height\": 476\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/185734838581732262.webp\",\r\n  \"width\": 317,\r\n  \"height\": 476\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189482867562381394.webp\",\r\n  \"width\": 658,\r\n  \"height\": 476\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189475179570921915.webp\",\r\n  \"width\": 631,\r\n  \"height\": 396\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189533831644316302.webp\",\r\n  \"width\": 595,\r\n  \"height\": 396\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/198366620867100706.webp\",\r\n  \"width\": 595,\r\n  \"height\": 396\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189482412295848187.webp\",\r\n  \"width\": 745,\r\n  \"height\": 496\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189523412053656134.webp\",\r\n  \"width\": 744,\r\n  \"height\": 496\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189474200318378193.webp\",\r\n  \"width\": 332,\r\n  \"height\": 496\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189487162529677315.webp\",\r\n  \"width\": 455,\r\n  \"height\": 455\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189470437927026706.webp\",\r\n  \"width\": 683,\r\n  \"height\": 455\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/198520260437213193.webp\",\r\n  \"width\": 683,\r\n  \"height\": 455\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189496336579821721.webp\",\r\n  \"width\": 847,\r\n  \"height\": 423\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189502392483709566.webp\",\r\n  \"width\": 674,\r\n  \"height\": 423\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/198465765892161538.webp\",\r\n  \"width\": 300,\r\n  \"height\": 423\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/189521659706999448.webp\",\r\n  \"width\": 648,\r\n  \"height\": 405\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/197917332928200782.webp\",\r\n  \"width\": 542,\r\n  \"height\": 405\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189477318464635178.webp\",\r\n  \"width\": 630.9999389648438,\r\n  \"height\": 405\r\n}, {\r\n  \"url\": \"//p3.pstatp.com/weili/l/189510295223533740.webp\",\r\n  \"width\": 701,\r\n  \"height\": 394\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189491045180113379.webp\",\r\n  \"width\": 593,\r\n  \"height\": 394\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189463445720269344.webp\",\r\n  \"width\": 527,\r\n  \"height\": 394\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/197652384985645082.webp\",\r\n  \"width\": 468,\r\n  \"height\": 624\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189484336441196690.webp\",\r\n  \"width\": 415,\r\n  \"height\": 624\r\n}, {\r\n  \"url\": \"//p1.pstatp.com/weili/l/189531770060014053.webp\",\r\n  \"width\": 937,\r\n  \"height\": 624\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/200160645886509061.webp\",\r\n  \"width\": 364,\r\n  \"height\": 485\r\n}, {\r\n  \"url\": \"//p9.pstatp.com/weili/l/199948045005357064.webp\",\r\n  \"width\": 728,\r\n  \"height\": 485\r\n}, {\r\n  \"url\": \"//p3a.pstatp.com/weili/l/189487360098172993.webp\",\r\n  \"width\": 729,\r\n  \"height\": 485\r\n}]\r\nconst masonryReducer = (state, action) => {\r\n  if (!state) {\r\n    return {\r\n      cache: cache,\r\n      display: [],\r\n      loading: false,\r\n    }\r\n  }\r\n  switch (action.type) {\r\n    case 'GET_IMAGE_SRC':\r\n      return {\r\n        cache: state.cache.slice(30),\r\n        display: [...state.display, ...state.cache.slice(0, 30)],\r\n        loading: true\r\n      }\r\n    case 'FETCH_POSTS_REQUEST':\r\n      return {\r\n        cache: state.cache.slice(30),\r\n        display: [...state.display, ...state.cache.slice(0, 30)],\r\n        loading: true\r\n      }\r\n    case 'FETCH_POSTS_SUCCESS':\r\n      return {\r\n        cache: [...state.cache, ...action.data.slice(45)],\r\n        display: state.display, \r\n        loading: false\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default masonryReducer","import produce from 'immer'\r\nconst colors = {\r\n  FRONT: 'red',\r\n  BEHIND: 'orange',\r\n  LEFT: 'blue',\r\n  RIGHT: 'green',\r\n  UP: 'yellow',\r\n  DOWN: 'white',\r\n}\r\n\r\nconst create = (face, side, color) => {\r\n    const outPos = {\r\n      FRONTX: [\r\n        -1, 0, 1,\r\n        -1, 0, 1,\r\n        -1, 0, 1\r\n      ],      \r\n      FRONTY: [\r\n        -1, -1, -1,\r\n        0, 0, 0,\r\n        1, 1, 1\r\n      ],      \r\n      FRONTZ: 1.5,\r\n      FRONTRotate3d: [0, 0, 0, 0],\r\n      \r\n      BEHINDX: [\r\n        1, 0, -1,\r\n        1, 0, -1,\r\n        1, 0, -1\r\n      ],      \r\n      BEHINDY: [\r\n        -1, -1, -1,\r\n        0, 0, 0,\r\n        1, 1, 1\r\n      ],      \r\n      BEHINDZ: -1.5,\r\n      BEHINDRotate3d: [0, 1, 0, 180],\r\n      \r\n      LEFTX: -1.5,      \r\n      LEFTY: [\r\n        -1, -1, -1,\r\n        0, 0, 0,\r\n        1, 1, 1\r\n      ],      \r\n      LEFTZ: [\r\n        -1, 0, 1,\r\n        -1, 0, 1,\r\n        -1, 0, 1\r\n      ],\r\n      LEFTRotate3d: [0, 1, 0, -90],\r\n      \r\n      RIGHTX: 1.5,      \r\n      RIGHTY: [\r\n        -1, -1, -1,\r\n        0, 0, 0,\r\n        1, 1, 1\r\n      ],      \r\n      RIGHTZ: [\r\n        1, 0, -1,\r\n        1, 0, -1,\r\n        1, 0, -1\r\n      ],\r\n      RIGHTRotate3d: [0, 1, 0, 90],\r\n\r\n      UPX: [\r\n        -1, 0, 1,\r\n        -1, 0, 1,\r\n        -1, 0, 1\r\n      ],      \r\n      UPY: -1.5,      \r\n      UPZ: [\r\n        -1, -1, -1,\r\n        0, 0, 0,\r\n        1, 1, 1\r\n      ],\r\n      UPRotate3d: [1, 0, 0, 90],\r\n      \r\n      DOWNX: [\r\n        -1, 0, 1,\r\n        -1, 0, 1,\r\n        -1, 0, 1\r\n      ],      \r\n      DOWNY: 1.5,      \r\n      DOWNZ: [\r\n        1, 1, 1,\r\n        0, 0, 0,\r\n        -1, -1, -1\r\n      ],\r\n      DOWNRotate3d: [1, 0, 0, -90]      \r\n    }\r\n\r\n    const bgPos = [\r\n      [0, 0],\r\n      [-1, 0],\r\n      [-2, 0],\r\n      [0, -1],\r\n      [-1, -1],\r\n      [-2, -1],\r\n      [0, -2], \r\n      [-1, -2], \r\n      [-2, -2]]\r\n\r\n    return new Array(9).fill(0).map((_, i) => {\r\n      const action = [0, 0, 0]\r\n      const x = outPos[`${face}X`]\r\n      const y = outPos[`${face}Y`]\r\n      const z = outPos[`${face}Z`]\r\n      const translateX = Array.isArray(x) ? x[i] : x \r\n      const translateY = Array.isArray(y) ? y[i] : y\r\n      const translateZ = Array.isArray(z) ? z[i] : z\r\n      const translate3d = [translateX, translateY, translateZ]\r\n      const rotate3d = outPos[`${face}Rotate3d`] \r\n      let backgroundPos\r\n      switch (color) {\r\n        case 'red':\r\n          backgroundPos = {x: bgPos[i][0] - 0, y: bgPos[i][1] - 0}\r\n          break;\r\n        case 'orange':\r\n          backgroundPos = {x: bgPos[i][0] - 0, y: bgPos[i][1] - 3}\r\n          break;\r\n        case 'blue':\r\n          backgroundPos = {x: bgPos[i][0] - 3, y: bgPos[i][1] - 3}\r\n          break;\r\n        case 'green':\r\n          backgroundPos = {x: bgPos[i][0] - 3, y: bgPos[i][1] - 0}\r\n          break;\r\n        case 'yellow':\r\n          backgroundPos = {x: bgPos[i][0] - 6, y: bgPos[i][1] - 0}\r\n          break;\r\n        case 'white':\r\n          backgroundPos = {x: bgPos[i][0] - 6, y: bgPos[i][1] - 3}\r\n          break;\r\n        default:\r\n          break\r\n      }\r\n      return {\r\n        position: {\r\n          action,\r\n          translate3d,\r\n          rotate3d,\r\n        },\r\n        aspect: {\r\n          id: i,\r\n          color,\r\n          backgroundPos,\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\nconst createCube = (colors) => {\r\n  const cubes = []\r\n  for (var [key, value] of Object.entries(colors)) {\r\n    cubes.push(...create(key, 'outside', value))\r\n  }\r\n  return cubes\r\n}\r\n\r\nconst cubes = createCube(colors)\r\n\r\nconst globalDisplay = cubes.map(cube => cube.aspect.color)\r\n\r\nconst defaultState = {\r\n  size: 50,\r\n  cubes,\r\n  globalDisplay,\r\n  view: 'FRONT',\r\n  colors,\r\n  rotating: false,\r\n  records: [],\r\n  inputFieldValue: '',\r\n  submitting: false,\r\n  submitStatus: '请输入操作例如：U D\\' F2 RY。'\r\n}\r\n\r\nconst cubeReducer= (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case 'RESTORE':\r\n      return produce(state, draft => {\r\n        const cubes = createCube(colors)\r\n        draft.cubes = cubes\r\n        draft.globalDisplay = cubes.map(cube => cube.aspect.color)\r\n        draft.records = []\r\n      })\r\n    case 'VIEW_CHANGING':\r\n      return produce(state, draft => {\r\n        draft.view = action.view\r\n        draft.rotating = true\r\n      })\r\n    case 'VIEW_CHANGED':\r\n      return produce(state, draft => {\r\n        draft.rotating = false\r\n      })\r\n    case 'CUBE_ROTATING':\r\n      return produce(state, draft => {\r\n        draft.cubes = action.cubes\r\n        draft.rotating = true\r\n      })\r\n    case 'CUBE_ROTATED':\r\n      return produce(state, draft => {\r\n        draft.cubes = action.cubes\r\n        draft.rotating = false\r\n      })\r\n    case 'INPUT_CHANGE':\r\n      return produce(state, draft => {\r\n        draft.inputFieldValue = action.value\r\n      })\r\n    case 'INPUT_SUBMITTING':\r\n    return produce(state, draft => {\r\n      draft.inputFieldValue && draft.records.unshift(draft.inputFieldValue)\r\n      draft.submitting = true\r\n      draft.submitStatus = '操作魔方中......'\r\n    })\r\n    case 'INPUT_SUBMITTED':\r\n    return produce(state, draft => {\r\n      draft.inputFieldValue = ''\r\n      draft.submitting = false\r\n      draft.submitStatus = '请输入旋转操作。'\r\n      draft.globalDisplay = draft.cubes.map(cube => cube.aspect.color)\r\n    })\r\n    case 'SUBMIT_FAILED':\r\n    return produce(state, draft => {\r\n      draft.inputFieldValue = ''\r\n      draft.submitStatus = '输入有误，请重新输入。'\r\n    })\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default cubeReducer","import produce from 'immer'\r\nimport BraftEditor from 'braft-editor'\r\n\r\nconst defaultState = {\r\n  homeTimeline: {\r\n    timeline: [],\r\n    cursor: {\r\n      bottom: null,\r\n      top: null\r\n    },\r\n    loading: false,\r\n    lastFetch: {\r\n      bottom: null,\r\n      top: null\r\n    },\r\n    isLoadingDirection: 'none',\r\n    atEnd: false,\r\n    unreadCount: 0\r\n  },\r\n  entities: {\r\n    posts: {\r\n      entities: {},\r\n      fetchStatus: {},\r\n    },\r\n    comments: {\r\n      entities: {},\r\n      fetchStatus: {},\r\n    },\r\n    users: {\r\n      entities: {},\r\n      fetchStatus: {},\r\n    }\r\n  },  \r\n  user: {\r\n    username: '',\r\n    id: '',\r\n    avatar: '',\r\n  },\r\n  authentication: {\r\n    status: '',\r\n    message: '',\r\n    fields: {\r\n      username: {\r\n        required: true,\r\n        type: 'text',\r\n        name: 'username',\r\n        prefix: '',\r\n        suffix: '',\r\n        value: '',\r\n        help: '账号需由长度为6至16个字母或数字组成，首字符须为字母。',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '^[a-zA-Z][a-zA-Z0-9]{5,15}$',\r\n          message: '输入有误。'\r\n        }\r\n      },\r\n      password: {\r\n        required: true,\r\n        type: 'password',\r\n        name: 'password',\r\n        prefix: '',\r\n        suffix: '',\r\n        value: '',\r\n        help: '密码需由长度为6至18个字母或数字组成。',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '^[a-zA-Z0-9]{6,18}$',\r\n          message: '输入有误。'\r\n        }\r\n      },\r\n      avatar: {\r\n        required: false,\r\n        type: 'file',\r\n        name: 'avatar',\r\n        prefix: '',\r\n        suffix: '',\r\n        value: '',\r\n        accept: 'image/png, image/jpeg, image/gif, image/jpg, image/svg+xml',\r\n        help: '只能上传图片。',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '^image\\\\/(png|jpeg|gif|jpg|svg\\\\+xml)$',\r\n          message: '上传类型有误。'\r\n        }\r\n      },\r\n      captcha: {\r\n        required: true,\r\n        type: 'text',\r\n        name: 'captcha',\r\n        prefix: '',\r\n        suffix: '/api/captcha',\r\n        value: '',\r\n        help: '输入验证码，注意大小写。',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '^\\\\S+$',\r\n          message: '验证码不能为空。'\r\n        }\r\n      },\r\n    }\r\n  },\r\n  postEditor: {\r\n    status: '',\r\n    message: '',\r\n    fields: {\r\n      title: {\r\n        required: true,\r\n        type: 'text',\r\n        name: 'title',\r\n        prefix: '',\r\n        suffix: '',\r\n        value: '',\r\n        help: '',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '^[\\\\S\\\\s]{6,}$',\r\n          message: '标题不可少于6个字。'\r\n        }\r\n      },\r\n      content: {\r\n        required: true,\r\n        type: 'draft',\r\n        name: 'content',\r\n        prefix: '',\r\n        suffix: '',\r\n        value: BraftEditor.createEditorState(null),\r\n        controls: ['bold', 'italic', 'underline', 'text-color', 'separator', 'link', 'media', 'emoji', 'blockquote', 'code', 'clear', 'undo', 'redo'],\r\n        help: '',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '(?<=,\"text\":)(.)*?(?=,\"type\":\"unstyled\")',\r\n          minLength: 8,\r\n          message: '内容不可少于8个字,上传图片不要大于50kb。',\r\n        }\r\n      }\r\n    }\r\n  },\r\n  commentEditor: {\r\n    status: '',\r\n    message: '',\r\n    fields: {\r\n      content: {\r\n        required: true,\r\n        type: 'draft',\r\n        name: 'content',\r\n        prefix: '',\r\n        suffix: '',\r\n        value: BraftEditor.createEditorState(null),\r\n        controls: ['italic', 'underline', 'text-color', 'emoji', 'clear'],\r\n        help: '',\r\n        error: '',\r\n        validate: false,\r\n        validator: {\r\n          pattern: '(?<=,\"text\":)(.)*?(?=,\"type\":\"unstyled\")',\r\n          minLength: 8,\r\n          maxLength: 150,\r\n          maxLine: 6,\r\n          message: '评论字数不够或者篇幅过长(须150个字以内)。'\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst blogReducer = (state, action) => {\r\n  if (!state) {\r\n    const stateStorage = sessionStorage.getItem('stateStorage')\r\n    if (stateStorage) {\r\n      const { \r\n        authentication,\r\n        postEditor,\r\n        commentEditor,\r\n      } = defaultState\r\n      return {\r\n        authentication,\r\n        postEditor,\r\n        commentEditor,\r\n        ...JSON.parse(stateStorage)\r\n      }\r\n    }\r\n    return defaultState\r\n  }\r\n  switch (action.type) {\r\n    case 'INIT_LAST_FETCH': \r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.lastFetch = action.payload\r\n\r\n      })\r\n    case 'FIRST_QUERY_REQUEST':\r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.lastFetch.top = action.payload.lastFetch\r\n\r\n      })\r\n    case 'QUERY_REQUEST': \r\n      return produce(state, draft => {\r\n \r\n        draft.homeTimeline.loading = true\r\n        draft.homeTimeline.isLoadingDirection = action.payload.direction\r\n\r\n      })\r\n    case 'TIMELINESTATE_QUERY_UPDATED':\r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          unreadCount,\r\n          direction,\r\n          lastFetch\r\n        } = action.payload\r\n        draft.homeTimeline.loading = false\r\n        draft.homeTimeline.isLoadingDirection = 'none'\r\n        draft.homeTimeline.unreadCount = unreadCount\r\n        draft.homeTimeline.lastFetch[direction] = lastFetch\r\n\r\n      })\r\n    case 'QUERY_HOME_POSTS_SUCCESS':\r\n      return produce(state, draft => {\r\n        \r\n        const {\r\n          method,\r\n          ids,\r\n          data\r\n        } = action.payload\r\n        draft.homeTimeline.timeline[method](...ids)\r\n        data.forEach(post => {\r\n          draft.entities.posts.entities[post.id] = {\r\n            ...post,\r\n            timeline: []\r\n          }\r\n          draft.entities.posts.fetchStatus[post.id] = 'loaded'\r\n        }) \r\n        \r\n      })\r\n    case 'QUERY_USER_POSTS_SUCCESS': \r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          user_id,\r\n          method,\r\n          ids,\r\n          data\r\n        } = action.payload\r\n        draft.entities.users.entities[user_id].timeline[method](...ids)\r\n        data.forEach(post => {\r\n          draft.entities.posts.entities[post.id] = {\r\n            ...post,\r\n            timeline: []\r\n          }\r\n          draft.entities.posts.fetchStatus[post.id] = 'loaded'\r\n        })\r\n\r\n      })\r\n    case 'QUERY_POSTS_WITH_ENTITY_SUCCESS': \r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          user_id,\r\n          ids,\r\n          data,\r\n          entity\r\n        } = action.payload\r\n        draft.entities['users'].entities[user_id] = {\r\n          ...entity,\r\n          user_id,\r\n          timeline: ids\r\n        }\r\n        draft.entities['users'].fetchStatus[user_id] = 'loaded'\r\n        data.forEach(post => {\r\n          draft.entities.posts.entities[post.id] = {\r\n            ...post,\r\n            timeline: []\r\n          }\r\n          draft.entities.posts.fetchStatus[post.id] = 'loaded'\r\n        })\r\n\r\n      })\r\n    case 'QUERY_COMMENTS_SUCCESS':\r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          post_id,\r\n          ids,\r\n          method,\r\n          data\r\n        } = action.payload\r\n        draft.entities.posts.entities[post_id].timeline[method](...ids)\r\n        data.forEach(comment => {\r\n          draft.entities.comments.entities[comment.id] = {\r\n            ...comment,\r\n            timeline: []\r\n          }\r\n          draft.entities.comments.fetchStatus[comment.id] = 'loaded'\r\n        })\r\n\r\n      })\r\n    case 'QUERY_REQUEST_FAILURE': \r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.loading = false\r\n        draft.homeTimeline.isLoadingDirection = 'none'\r\n        console.log(action.payload.error)\r\n\r\n      })\r\n    case 'DELETE_REQUEST':\r\n    case 'UPDATE_REQUEST':\r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.loading = true\r\n\r\n      })\r\n\r\n    case 'DELETE_REQUEST_SUCCESS':\r\n    return produce(state, draft => {\r\n\r\n      const {post_id, id} = action.payload\r\n      draft.homeTimeline.loading = false\r\n      draft.entities.posts.entities[post_id].timeline = draft.entities.posts.entities[post_id].timeline.filter((comment_id) => id !== comment_id)\r\n      delete draft.entities.comments.entities[id] \r\n      delete draft.entities.comments.fetchStatus[id]\r\n\r\n    })\r\n    case 'UPDATE_COMMENT_REQUEST_SUCCESS':\r\n      return produce(state, draft => {\r\n\r\n        Object.entries(action.payload.entity).forEach(([key, value]) => {\r\n          draft.entities.comments.entities[action.payload.id][key] = value\r\n        })\r\n\r\n      })\r\n    case 'UPDATE_POST_REQUEST_SUCCESS':\r\n      return produce(state, draft => {\r\n\r\n        Object.entries(action.payload.entity).forEach(([key, value]) => {\r\n          draft.entities.posts.entities[action.payload.id][key] = value\r\n        })\r\n\r\n      })\r\n    case 'DELETE_REQUEST_FAILURE':\r\n      return produce(state, draft => {\r\n\r\n        const {message} = action.payload\r\n        draft.homeTimeline.loading = false\r\n        console.log(message)\r\n\r\n      })\r\n    case 'UPDATE_REQUEST_FAILURE': \r\n      return produce(state, draft => {\r\n\r\n        const {message, inputField} = action.payload\r\n        draft.homeTimeline.loading = false\r\n        draft[inputField].message = message\r\n        console.log(message)\r\n\r\n      })\r\n    case 'PUBLISH_REQUEST': \r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.loading = true\r\n        draft.homeTimeline.isLoadingDirection = 'top'\r\n\r\n      })\r\n    case 'TIMELINE_STATE_PUBLISH_UPDATE':\r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.loading = true\r\n        draft.homeTimeline.isLoadingDirection = 'none'\r\n        draft.homeTimeline.lastFetch[action.payload.direction] = action.payload.lastFetch\r\n\r\n      })\r\n    case 'PUBLISH_POST_SUCCESS': \r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          user_id,\r\n          id,\r\n          entity\r\n        } = action.payload\r\n        draft.entities.users.entities[user_id].timeline.unshift(id)\r\n        draft.entities.posts.entities[id] = {...entity, timeline: []}\r\n        draft.entities.posts.fetchStatus[id] = 'loaded'\r\n\r\n      })\r\n    case 'PUBLISH_COMMENT_SUCCESS': \r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          post_id,\r\n          id,\r\n          entity\r\n        } = action.payload\r\n        draft.entities.posts.entities[post_id].timeline.push(id)\r\n        draft.entities.comments.entities[id] = {...entity, timeline: []}\r\n        draft.entities.comments.fetchStatus[id] = 'loaded'\r\n\r\n      })\r\n    case 'PUBLISH_REQUEST_FAILURE': \r\n      return produce(state, draft => {\r\n\r\n        const {message, inputField} = action.payload\r\n        draft.homeTimeline.loading = false\r\n        draft.homeTimeline.isLoadingDirection = 'none'\r\n        draft[inputField].message = message\r\n\r\n      })\r\n    case 'AUTHENTICATION': \r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.loading = true\r\n\r\n      })\r\n    case 'AUTHENTICATION_SUCCESS':\r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          username,\r\n          id,\r\n          avatar\r\n        } = action.payload\r\n        draft.homeTimeline.loading = false\r\n        draft.user.username = username\r\n        draft.user.id = id\r\n        draft.user.avatar = avatar\r\n        draft.entities['users'].entities[id] = {\r\n          username,\r\n          id,\r\n          avatar,\r\n          timeline: []\r\n        }\r\n        draft.entities['users'].fetchStatus[id] = 'loaded' \r\n\r\n      })\r\n    case 'AUTHENTICATION_FAILURE':\r\n      return produce(state, draft => {\r\n\r\n        const {message, inputField} = action.payload\r\n        draft.homeTimeline.loading = false\r\n        draft[inputField].message = message\r\n\r\n      })\r\n    case 'INPUTFIELD_CHANGE':\r\n      return produce(state, draft => {\r\n\r\n        const {\r\n          inputField,\r\n          field,\r\n          data\r\n        } = action\r\n        Object.entries(data).forEach(([key, value]) => {\r\n          draft[inputField].fields[field][key] = value\r\n        })\r\n\r\n      })\r\n    case 'INPUTFIELD_INIT':\r\n      return produce(state, draft => {\r\n        \r\n        const { inputField, message} = action.payload\r\n        const fields = state[inputField].fields\r\n        if (message) {\r\n          draft[inputField].message = ''\r\n        }\r\n        Object.keys(fields).forEach(field => {\r\n          draft[inputField].fields[field].value = fields[field].type !== 'draft' ? '' : BraftEditor.createEditorState(null)\r\n          draft[inputField].fields[field].error = ''\r\n          draft[inputField].fields[field].prefix = ''\r\n          draft[inputField].fields[field].suffix = ''\r\n          draft[inputField].fields[field].validate = false\r\n        })\r\n\r\n      })\r\n    case 'TRANSMIT_VALUES':\r\n      return produce(state, draft => {\r\n\r\n        const { inputField, entries } = action.payload\r\n        Object.entries(entries).forEach(([field, value]) => {\r\n          draft[inputField].fields[field].value = field !== 'content' ? value : BraftEditor.createEditorState(value)\r\n          draft[inputField].fields[field].validate = field !== 'content' ? true : false\r\n        })\r\n\r\n      })\r\n    case 'SIGNOUT':\r\n      sessionStorage.removeItem('stateStorage')\r\n      return produce(state, draft => {\r\n\r\n        draft.user.username = ''\r\n        draft.user.id = ''\r\n        draft.user.avatar = ''\r\n\r\n      })\r\n    case 'SAVE_STATE':\r\n      const {\r\n        homeTimeline,\r\n        entities,\r\n        user\r\n      } = state\r\n      sessionStorage.setItem('stateStorage', JSON.stringify({\r\n        homeTimeline,\r\n        entities,\r\n        user\r\n      }))\r\n      return state  \r\n    case 'TIMELINESTATE_INIT':\r\n      return produce(state, draft => {\r\n\r\n        draft.homeTimeline.cursor.bottom = null\r\n        draft.homeTimeline.cursor.top = null\r\n        draft.homeTimeline.loading =  false\r\n        draft.homeTimeline.lastFetch.bottom = null\r\n        draft.homeTimeline.lastFetch.top = null\r\n        draft.homeTimeline.isLoadingDirection = 'none'\r\n        draft.homeTimeline.atEnd = false\r\n        draft.homeTimeline.unreadCount = 0\r\n\r\n      })\r\n    case 'XHR_ABORT':\r\n      return produce(state, draft => {\r\n\r\n      })\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default blogReducer","import { combineReducers } from 'redux'\r\nimport { connectRouter } from 'connected-react-router'\r\nimport masonryReducer from './masonryReducer'\r\nimport cubeReducer from './cubeReducer'\r\nimport blogReducer from './blogReducer'\r\n\r\nconst rootReducer = (history) => combineReducers({\r\n  cube: cubeReducer,\r\n  masonry: masonryReducer,\r\n  blog: blogReducer,\r\n  router: connectRouter(history)\r\n})\r\n\r\nexport default rootReducer","import { createBrowserHistory } from 'history'\r\nimport { applyMiddleware, compose, createStore } from 'redux'\r\nimport { routerMiddleware } from 'connected-react-router'\r\nimport createRootReducer from './reducers'\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\nexport const history = createBrowserHistory()\r\n\r\nexport default function configureStore (preloadedState) {\r\n  const composeEnhancer = compose\r\n  const store = createStore(\r\n    createRootReducer(history),\r\n    preloadedState,\r\n    composeEnhancer(\r\n      applyMiddleware(\r\n        routerMiddleware(history),\r\n        thunkMiddleware\r\n      )\r\n    )\r\n  )\r\n  return store\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux'\r\nimport configureStore, { history } from './configureStore'\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { ThemeProvider } from 'styled-components'\r\n\r\nconst store = configureStore()\r\nconst theme = {\r\n  color: 'royalblue',\r\n  bgc: '#E8F5FD'\r\n}\r\n\r\nReactDOM.render(\r\n  <ThemeProvider theme={theme}>\r\n    <Provider store={store}>\r\n      <App history={history} />\r\n    </Provider>\r\n  </ThemeProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();\r\n","const ajax = (method, url, options = {}) => {\r\n  return new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest()\r\n    let {body = null, headers, timeout = 12000} = options\r\n    xhr.open(method, url)\r\n    if (headers && typeof(headers) === 'object') {\r\n      Object.entries(headers).forEach(([header, value]) => xhr.setRequestHeader(header, value))\r\n    }\r\n    xhr.timeout = timeout\r\n    xhr.send(body)\r\n\r\n    xhr.onload = function () {\r\n      if (xhr.status < 400) {\r\n        try {\r\n          resolve(JSON.parse(xhr.responseText))\r\n        } catch (e) {\r\n          resolve(xhr.responseText)\r\n        }\r\n      } else {\r\n        console.log(xhr.statusText)\r\n        try {\r\n          reject(JSON.parse(xhr.responseText))\r\n        } catch (e) {\r\n          reject(xhr.responseText)\r\n        }\r\n      }\r\n    }\r\n\r\n    xhr.onerror = function () {\r\n      reject(xhr.statusText)\r\n    }\r\n\r\n    xhr.ontimeout = function () {\r\n      reject('Timeout!')\r\n    }\r\n  })\r\n}\r\nexport default ajax","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledInput = styled.div`\r\n    width: 100%;\r\n\r\n    &>input {\r\n      box-sizing: border-box;\r\n      font-size: 1rem;\r\n      line-height: 1.25rem;\r\n      width: 100%;\r\n      max-height: 1.25rem;\r\n      border-radius: .5rem;\r\n      text-indent: 1em;\r\n      outline: none;\r\n      border: 1px solid ${(props) => props.theme.color};\r\n    }\r\n\r\n    &>input:focus {\r\n      border: .1rem solid ${(props) => props.theme.color}\r\n    }\r\n`\r\n\r\nconst Input = (props) => {\r\n  return (\r\n    <StyledInput>\r\n      <input \r\n        type={props.type}\r\n        name={props.name}\r\n        value={props.value}\r\n        disabled={props.disabled}\r\n        onChange={props.onChange}/>\r\n    </StyledInput>\r\n  )\r\n}\r\n\r\nInput.propTypes = {\r\n  type: PropTypes.string,\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  name: PropTypes.string.isRequired,\r\n  disabled: PropTypes.bool\r\n}\r\n\r\nexport default Input","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledOuterlayer = styled.div`\r\n  width: 100%;\r\n  background-color: #999c;\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n\r\n    &>div {\r\n      position: absolute;\r\n      top: 40%;\r\n      left: 50%;\r\n      width: 850px;\r\n      transform: translate(-50%, -50%);\r\n      box-shadow: 0 1px 4px rgba(0,0,0,0.25);\r\n      background: #fff;\r\n      border-radius: 1rem;\r\n    }\r\n\r\n`\r\nclass Outerlayer extends Component {\r\n  static propTypes = {\r\n    alive: PropTypes.bool.isRequired,\r\n    handleShutDown: PropTypes.func.isRequired,\r\n    outerlayer: PropTypes.func.isRequired\r\n  }\r\n  render () { \r\n    const {\r\n      alive,\r\n      handleShutDown,\r\n      outerlayer,\r\n      ...rest\r\n    } = this.props\r\n    const display = alive ? 'block' : 'none'\r\n    const pointerEvents = alive ? 'all' : 'none'\r\n    const opacity = alive ? '1' : '0'\r\n    const zIndex = alive ? '999' : '-1'\r\n    return (\r\n      <StyledOuterlayer\r\n        ref={outerlayer} \r\n        onClick={handleShutDown}\r\n        style={{display, pointerEvents, opacity, zIndex}}>\r\n        <div>\r\n          {this.props.render(rest)}\r\n        </div>\r\n      </StyledOuterlayer>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Outerlayer","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledButton = styled.span`\r\n  button {\r\n    border: none;\r\n    background-color: ${(props) => props.theme.color};\r\n    color: #fff;\r\n    border-radius: 1rem;\r\n    min-width: 3.75rem;\r\n    cursor: pointer;\r\n    white-space: nowrap;\r\n    line-height: 1.25rem;\r\n    padding: .25rem;\r\n    outline: none;\r\n  }\r\n\r\n  button.disabled {\r\n    background-color: orange;\r\n  }\r\n\r\n  button.disabled:hover {\r\n    background-color: red;\r\n    cursor: not-allowed;\r\n  }\r\n`\r\n\r\nconst Button = (props) => {\r\n  const onClick = (e) => {\r\n    e.preventDefault()\r\n    props.onClick()\r\n  }\r\n  return (\r\n  <StyledButton>\r\n    <button \r\n      onClick={onClick}\r\n      className={props.className}>\r\n      {props.text}\r\n    </button>\r\n  </StyledButton>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n}\r\n\r\nexport default Button"],"sourceRoot":""}