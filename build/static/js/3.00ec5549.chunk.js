(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{311:function(e,t,n){(function(t){var n="Expected a function",r=NaN,a="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,f=s||d||Function("return this")(),h=Object.prototype.toString,m=Math.max,p=Math.min,y=function(){return f.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&h.call(e)==a}(e))return r;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):o.test(e)?r:+e}e.exports=function(e,t,r){var a,i,o,c,l,u,s=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(n);function g(t){var n=a,r=i;return a=i=void 0,s=t,c=e.apply(r,n)}function O(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-s>=o}function S(){var e=y();if(O(e))return w(e);l=setTimeout(S,function(e){var n=t-(e-u);return f?p(n,o-(e-s)):n}(e))}function w(e){return l=void 0,h&&a?g(e):(a=i=void 0,c)}function j(){var e=y(),n=O(e);if(a=arguments,i=this,u=e,n){if(void 0===l)return function(e){return s=e,l=setTimeout(S,t),d?g(e):c}(u);if(f)return l=setTimeout(S,t),g(u)}return void 0===l&&(l=setTimeout(S,t)),c}return t=b(t)||0,v(r)&&(d=!!r.leading,o=(f="maxWait"in r)?m(b(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h),j.cancel=function(){void 0!==l&&clearTimeout(l),s=0,a=u=i=l=void 0},j.flush=function(){return void 0===l?c:w(y())},j}}).call(this,n(21))},315:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(11),i=n(12),o=n(15),c=n(13),l=n(14),u=n(6),s=n(3),d=n(0),f=n.n(d),h=n(2),m=n(16),p=n(77),y=function(e){var t=e.id,n=e.src,r=e.width,a=e.height,i=e.handleClick;return f.a.createElement("div",{className:"item","data-id":"".concat(t),style:{width:"".concat(200*r/a,"px"),flexGrow:"".concat(200*r/a)}},f.a.createElement("div",{style:{paddingBottom:"".concat(a/r*100,"%")}}),f.a.createElement("img",{onClick:i,src:"https:".concat(n),alt:""}))},v=function(e){return f.a.createElement("div",{className:"masonry-wrapper"},e.imgs.map(function(t,n){var r=e.handleClick.bind(null,t.url);return f.a.createElement(y,{key:"img"+n,id:"img"+n,src:t.url,width:t.width,height:t.height,handleClick:r})}))},b=n(29),g=n(311),O=n.n(g);function S(){var e=Object(s.a)(["\n  .masonry-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.masonry-wrapper::after {\n  content: '';\n  flex-grow: 99999999;\n}\n\n.masonry-wrapper .item {\n  margin: 2px;\n  background-color: #ccc;\n  position: relative;\n  overflow: hidden;\n  cursor: grab;\n}\n\n.masonry-wrapper .item>img {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  vertical-align: bottom;\n  transition: all 0.5s ease-in-out;\n}\n\n.masonry-wrapper .item>img:hover {\n  transform: scale(1.2);\n"]);return S=function(){return e},e}var w,j=h.b.div(S());t.default=Object(m.c)(function(e){return Object(r.a)({},e.masonry)},function(e){return{fetchImageSrc:function(){return e(function(e,t){return e({type:"FETCH_POSTS_REQUEST"}),Object(b.a)("GET","https://www.chengcici.info/masonary").then(function(t){return e({type:"FETCH_POSTS_SUCCESS",data:t})}).catch(function(e){return console.log(e)})})},getImageSrc:function(){return e({type:"GET_IMAGE_SRC"})}}})((w=v,function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={outerlayerSrc:""},n.setOuterlayer=function(e){return n.outerlayer=e},n._getOuterlayerSrc=n._getOuterlayerSrc.bind(Object(u.a)(Object(u.a)(n))),n._handleCloseOuterlayer=n._handleCloseOuterlayer.bind(Object(u.a)(Object(u.a)(n))),n._handPageScroll=O()(n._handPageScroll.bind(Object(u.a)(Object(u.a)(n))),500),n._handVisibleImage=O()(n._handVisibleImage.bind(Object(u.a)(Object(u.a)(n))),50),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchImageSrc(),document.addEventListener("scroll",this._handPageScroll),document.addEventListener("scroll",this._handVisibleImage)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this._handPageScroll),document.removeEventListener("scroll",this._handVisibleImage)}},{key:"_handVisibleImage",value:function(e){var t=document.querySelector(".masonry-wrapper").children,n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value,l=c.getClientRects()[0],u=l.top,s=l.bottom,d=document.documentElement.clientHeight;c.style.visibility=u>-1e3&&s<d+1e3?"visible":"hidden"}}catch(f){r=!0,a=f}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"_handPageScroll",value:function(e){var t=document.documentElement.clientHeight;!this.props.Loading&&0!==this.props.cache.length&&document.body.offsetHeight+document.body.getClientRects()[0].y<t+500&&this.props.getImageSrc()}},{key:"_getOuterlayerSrc",value:function(e){this.setState({outerlayerSrc:e})}},{key:"_handleCloseOuterlayer",value:function(e){e.target===this.outerlayer&&this.setState({outerlayerSrc:""})}},{key:"render",value:function(){var e=this;return f.a.createElement(j,null,f.a.createElement(w,{imgs:this.props.display,handleClick:this._getOuterlayerSrc}),f.a.createElement(p.a,{alive:""!==this.state.outerlayerSrc,outerlayer:this.setOuterlayer,handleShutDown:this._handleCloseOuterlayer,render:function(){return f.a.createElement("div",{style:{height:"525px",backgroundImage:'url("'.concat(e.state.outerlayerSrc,'")'),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}}))}}]),t}(d.Component)))}}]);
//# sourceMappingURL=3.00ec5549.chunk.js.map